{
  "config": "specialist-gemini-2.5-flash",
  "approach": "specialist",
  "config_name": "gemini-2.5-flash",
  "timestamp": "20251112_214852",
  "examples_top_k": null,
  "summary": {
    "total": 106,
    "success_strict": 82,
    "success_similarity": 89,
    "success_jaccard": 80,
    "failures": 24,
    "accuracy": 77.35849056603774,
    "accuracy_strict": 77.35849056603774,
    "accuracy_similarity": 83.9622641509434,
    "accuracy_jaccard": 75.47169811320755,
    "min_query_similarity": 0.8,
    "min_jaccard": 0.8,
    "avg_time": 13.845758339394552,
    "avg_jaccard": 0.7876996770079863,
    "avg_query_similarity": 0.9159136637335007
  },
  "results": [
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-01-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il fatturato totale del cliente BARONE DI FERRANTE EZIO?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE toLower(trim(c.name)) = 'barone di ferrante ezio' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN sum(dr.importo) AS totale",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE toLower(trim(c.name)) = 'barone di ferrante ezio' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN sum(dr.importo) AS fatturatoTotale",
      "time_total": 11.091431298060343,
      "time_generation": 1.6000361340120435,
      "time_db": 0.5512369609205052,
      "time_synthesis": 1.585536102997139,
      "jaccard_index": 1.0,
      "query_similarity": 0.9758241758241758,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-02-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi \u00e8 il cliente con il maggior fatturato?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC LIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC LIMIT 1",
      "time_total": 10.370541590033099,
      "time_generation": 1.7217201279709116,
      "time_db": 0.5825783510226756,
      "time_synthesis": 1.654276655986905,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-03-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca i 5 clienti che hanno fatturato di pi\u00f9 che si trovano a Perugia",
      "success": false,
      "error": "Query mancante",
      "generated_cypher": null,
      "expected_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo) WHERE toLower(trim(l.localita)) = 'perugia' MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC LIMIT 5",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": "ENTITY_RESOLVER",
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-04-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami i 5 prodotti pi\u00f9 popolari in termini di quantit\u00e0 venduta",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nRETURN a.descrizione AS prodotto, sum(dr.quantita) AS quantitaTotale\nORDER BY quantitaTotale DESC\nLIMIT 5",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN a.descrizione AS prodotto, sum(dr.quantita) AS quantitaTotale ORDER BY quantitaTotale DESC LIMIT 5",
      "time_total": 10.675048153032549,
      "time_generation": 1.3462763270363212,
      "time_db": 0.7546140850754455,
      "time_synthesis": 2.4907770570134744,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-05-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami i 5 prodotti meno popolari in termini di quantit\u00e0 venduta",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nRETURN a.descrizione AS prodotto, sum(dr.quantita) AS quantitaTotale\nORDER BY quantitaTotale ASC\nLIMIT 5",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN a.descrizione AS prodotto, sum(dr.quantita) AS quantitaTotale ORDER BY quantitaTotale ASC LIMIT 5",
      "time_total": 12.112213738961145,
      "time_generation": 1.8627341400133446,
      "time_db": 0.7010119350161403,
      "time_synthesis": 2.3429028559476137,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-06-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Dimmi il fatturato di ogni ditta.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN d.dittaId AS ditta, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN d.dittaId AS ditta, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC",
      "time_total": 11.240041688084602,
      "time_generation": 1.875948271015659,
      "time_db": 0.7801920090569183,
      "time_synthesis": 2.0199182899668813,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-07-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Il fatturato di ogni ditta, nel loro anno migliore",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH d, doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoAnnuale\nORDER BY d.dittaId, fatturatoAnnuale DESC\nWITH d, collect({anno: anno, fatturato: fatturatoAnnuale}) AS fatturatiOrdinati\nRETURN d.dittaId AS ditta, fatturatiOrdinati[0].anno AS annoTop, fatturatiOrdinati[0].fatturato AS fatturatoMassimo",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH d, doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoAnnuale ORDER BY d.dittaId, fatturatoAnnuale DESC WITH d, collect({anno: anno, fatturato: fatturatoAnnuale}) AS fatturatiOrdinati RETURN d.dittaId AS ditta, fatturatiOrdinati[0].anno AS annoTop, fatturatiOrdinati[0].fatturato AS fatturatoMassimo",
      "time_total": 13.1317886589095,
      "time_generation": 3.0138384510064498,
      "time_db": 0.8048354448983446,
      "time_synthesis": 2.0478072189725935,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-08-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Il fatturato di ogni ditta, nel loro anno peggiore",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH d, doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoAnnuale\nORDER BY d.dittaId, fatturatoAnnuale ASC\nWITH d, collect({anno: anno, fatturato: fatturatoAnnuale}) AS fatturatiOrdinati\nRETURN d.dittaId AS ditta, fatturatiOrdinati[0].anno AS annoPeggiore, fatturatiOrdinati[0].fatturato AS fatturatoAnnoPeggiore",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH d, doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoAnnuale ORDER BY d.dittaId, fatturatoAnnuale ASC WITH d, collect({anno: anno, fatturato: fatturatoAnnuale}) AS fatturatiOrdinati RETURN d.dittaId AS ditta, fatturatiOrdinati[0].anno AS annoTop, fatturatiOrdinati[0].fatturato AS fatturatoMassimo",
      "time_total": 12.45548029395286,
      "time_generation": 2.2387363590532914,
      "time_db": 0.6698292630026117,
      "time_synthesis": 2.188201239099726,
      "jaccard_index": 1.0,
      "query_similarity": 0.968944099378882,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-09-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 la famiglia di prodotti pi\u00f9 acquistata?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)-[:APPARTIENE_A]->(sf:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia)\nRETURN fam.nome AS famiglia, sum(dr.quantita) AS quantitaTotale\nORDER BY quantitaTotale DESC\nLIMIT 1",
      "expected_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)-[:APPARTIENE_A]->(sf:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia) RETURN fam.nome AS famiglia, sum(dr.quantita) AS quantitaTotale ORDER BY quantitaTotale DESC LIMIT 1",
      "time_total": 9.219977834029123,
      "time_generation": 1.8840810169931501,
      "time_db": 0.7810309029882774,
      "time_synthesis": 1.60857328097336,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-10-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 la famiglia di prodotti meno acquistata?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)-[:APPARTIENE_A]->(sf:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia)\nRETURN fam.nome AS famiglia, sum(dr.quantita) AS quantitaTotale\nORDER BY quantitaTotale ASC\nLIMIT 1",
      "expected_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)-[:APPARTIENE_A]->(sf:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia) RETURN fam.nome AS famiglia, sum(dr.quantita) AS quantitaTotale ORDER BY quantitaTotale ASC LIMIT 1",
      "time_total": 11.380548875895329,
      "time_generation": 2.7236595560098067,
      "time_db": 0.771799822920002,
      "time_synthesis": 2.447967479005456,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-11-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il prodotto pi\u00f9 venduto in generale (per valore)?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN a.descrizione AS prodotto, sum(dr.importo) AS valoreVenduto ORDER BY valoreVenduto DESC LIMIT 1",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN a.descrizione AS prodotto, sum(dr.importo) AS valoreVenduto ORDER BY valoreVenduto DESC LIMIT 1",
      "time_total": 9.759717407054268,
      "time_generation": 1.8045888780616224,
      "time_db": 0.44233389908913523,
      "time_synthesis": 1.5494548910064623,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-12-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il prodotto meno venduto in generale (per valore)?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN a.descrizione AS prodotto, sum(dr.importo) AS valoreVenduto ORDER BY valoreVenduto ASC LIMIT 1",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN a.descrizione AS prodotto, sum(dr.importo) AS valoreVenduto ORDER BY valoreVenduto ASC LIMIT 1",
      "time_total": 12.501338678994216,
      "time_generation": 1.8182866038987413,
      "time_db": 0.6452073449036106,
      "time_synthesis": 2.7557471820618957,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-13-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "A quanto ho acquistato il prodotto GAS FREON SOLSTICE N40 R448A?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' RETURN sum(dr.importo) AS costoTotaleAcquisto",
      "expected_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' RETURN sum(dr.importo) AS costoTotaleAcquisto",
      "time_total": 10.371252667042427,
      "time_generation": 3.1649652660125867,
      "time_db": 0.34358235204126686,
      "time_synthesis": 1.346626439015381,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-14-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "A quanto l'ho venduto il prodotto GAS FREON SOLSTICE N40 R448A?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN sum(dr.importo) AS totaleVenduto",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN sum(dr.importo) AS totaleVenduto",
      "time_total": 12.128121662070043,
      "time_generation": 1.6651049169013277,
      "time_db": 0.6678009169409052,
      "time_synthesis": 1.3277475140057504,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-15-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Situazione attuale della ditta '2'",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta {dittaId: '2'})<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year IN [date().year, date().year - 1] RETURN doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoAnnuale ORDER BY anno DESC",
      "expected_cypher": "MATCH (d:Ditta {dittaId: '2'})<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year IN [date().year, date().year - 1] RETURN doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoAnnuale ORDER BY anno DESC",
      "time_total": 13.268483108025976,
      "time_generation": 2.1116857380839065,
      "time_db": 0.6005867349449545,
      "time_synthesis": 1.7122557850088924,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-16-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali ditte vendono prodotti della famiglia 'CENTRALI FRIGO'?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia)\nWHERE toLower(trim(fam.nome)) = 'centrali frigo' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN DISTINCT d.dittaId AS ditta\nORDER BY ditta\nLIMIT 10",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia) WHERE toLower(trim(fam.nome)) = 'centrali frigo' RETURN DISTINCT d.dittaId AS ditta ORDER BY ditta",
      "time_total": 16.746995605062693,
      "time_generation": 2.166692710015923,
      "time_db": 4.066110888961703,
      "time_synthesis": 1.6375540340086445,
      "jaccard_index": 1.0,
      "query_similarity": 0.9061102831594635,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-17-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quanti clienti unici ha la ditta '1'?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(c:Cliente)\nRETURN count(DISTINCT c) AS numeroClientiUnici",
      "expected_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(c:Cliente) RETURN count(DISTINCT c) AS numeroClientiUnici",
      "time_total": 13.749373523052782,
      "time_generation": 1.4571886070771143,
      "time_db": 0.10858447302598506,
      "time_synthesis": 1.3090024819830433,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "DITTE_QUERY",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-18-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale fornitore ci ha inviato pi\u00f9 documenti?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (f:Fornitore)-[:HA_EMESSO]->(doc:Documento)\nRETURN f.ragioneSociale AS fornitore, count(doc) AS numeroDocumenti\nORDER BY numeroDocumenti DESC\nLIMIT 1",
      "expected_cypher": "MATCH (f:Fornitore)-[:HA_EMESSO]->(doc:Documento) RETURN f.ragioneSociale AS fornitore, count(doc) AS numeroDocumenti ORDER BY numeroDocumenti DESC LIMIT 1",
      "time_total": 10.731566617032513,
      "time_generation": 2.5016044030198827,
      "time_db": 0.12961132894270122,
      "time_synthesis": 1.534210354089737,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-19-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca 5 clienti che non hanno mai acquistato il prodotto 'GAS FREON SOLSTICE N40 R448A'",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo)\nWHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a'\nWITH a\nMATCH (c:Cliente)\nWHERE NOT (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a)\nRETURN c.name AS cliente\nORDER BY cliente\nLIMIT 5",
      "expected_cypher": "MATCH (a:Articolo) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' WITH a MATCH (c:Cliente) WHERE NOT (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a) RETURN c.name AS cliente ORDER BY cliente LIMIT 5",
      "time_total": 23.056754122953862,
      "time_generation": 2.1921594189479947,
      "time_db": 0.84346375009045,
      "time_synthesis": 1.5477029709145427,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-20-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 la localit\u00e0 con il maggior numero di fornitori?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (f:Fornitore)-[:SI_TROVA_A]->(l:Luogo)\nRETURN toLower(trim(l.localita)) AS localita, count(DISTINCT f) AS conteggio\nORDER BY conteggio DESC\nLIMIT 1",
      "expected_cypher": "MATCH (f:Fornitore)-[:SI_TROVA_A]->(l:Luogo) WHERE l.localita IS NOT NULL RETURN l.localita AS localita, count(DISTINCT f) AS numeroFornitori ORDER BY numeroFornitori DESC LIMIT 1",
      "time_total": 11.31540921900887,
      "time_generation": 2.057217280031182,
      "time_db": 0.12591199402231723,
      "time_synthesis": 2.7530421640258282,
      "jaccard_index": 0.0,
      "query_similarity": 0.7349397590361446,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "localita": "PERUGIA",
          "numeroFornitori": 835
        }
      ],
      "mismatch_extra": [
        {
          "localita": "perugia",
          "conteggio": 857
        }
      ]
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-21-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 l'importo medio per riga documento nelle fatture di vendita?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN avg(dr.importo) AS importoMedioRiga",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN avg(dr.importo) AS importoMedioRiga",
      "time_total": 13.617560173966922,
      "time_generation": 1.2884663749719039,
      "time_db": 0.5653475979343057,
      "time_synthesis": 5.447154675028287,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-22-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami 10 documenti di tipo 'FVC' emessi a Gennaio 2025 al cliente 'L'ABBONDANZA SRL'",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType)\nWHERE toLower(trim(c.name)) = 'l\\'abbondanza srl'\nAND dt.codice = 'FVC'\nAND doc.dataEmissione.year = 2025\nAND doc.dataEmissione.month = 1\nRETURN DISTINCT doc.documentoId AS documentoId, doc.dataEmissione AS dataEmissione\nORDER BY dataEmissione DESC\nLIMIT 10",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType) WHERE toLower(trim(c.name)) = 'l\\'abbondanza srl' AND dt.codice = 'FVC' AND doc.dataEmissione.year = 2025 AND doc.dataEmissione.month = 1 RETURN doc.documentoId AS documento LIMIT 10",
      "time_total": 31.21426767599769,
      "time_generation": 2.988341161981225,
      "time_db": 0.37355918204411864,
      "time_synthesis": 3.616002744063735,
      "jaccard_index": 0.0,
      "query_similarity": 0.8726655348047538,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "documento": "2-202500000859"
        },
        {
          "documento": "2-202500000881"
        },
        {
          "documento": "2-202500000049"
        }
      ],
      "mismatch_extra": [
        {
          "documentoId": "2-202500001236",
          "dataEmissione": "2025-01-31"
        },
        {
          "documentoId": "2-202500001221",
          "dataEmissione": "2025-01-31"
        },
        {
          "documentoId": "2-202500001502",
          "dataEmissione": "2025-01-31"
        }
      ]
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-23-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il margine di profitto del prodotto 'GAS FREON SOLSTICE N40 R448A'?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr1:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a'\nAND dr1.tipoValore = 'Fatturato'\nAND dr1.importo > 0\nWITH a, sum(dr1.importo) AS fatturato\nMATCH (f:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr2:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a)\nWITH a, fatturato, sum(dr2.importo) AS costo\nRETURN a.descrizione AS prodotto, fatturato, costo, (fatturato - costo) AS margine",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr1:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' AND dr1.tipoValore = 'Fatturato' AND dr1.importo > 0 WITH a, sum(dr1.importo) AS fatturato MATCH (f:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr2:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a) WITH a, fatturato, sum(dr2.importo) AS costo RETURN a.descrizione AS prodotto, fatturato, costo, (fatturato - costo) AS margine",
      "time_total": 14.082944000023417,
      "time_generation": 4.013807723997161,
      "time_db": 0.9825998080195859,
      "time_synthesis": 2.430563541012816,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-24-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali fornitori ci forniscono prodotti venduti al cliente 'BARONE DI FERRANTE EZIO'?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(c.name)) = 'barone di ferrante ezio' WITH collect(DISTINCT a) AS articoliVenduti MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a) WHERE a IN articoliVenduti RETURN DISTINCT gf.ragioneSociale AS fornitore ORDER BY fornitore",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(c.name)) = 'barone di ferrante ezio' WITH collect(DISTINCT a) AS articoliVenduti MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a) WHERE a IN articoliVenduti RETURN DISTINCT gf.ragioneSociale AS fornitore ORDER BY fornitore",
      "time_total": 12.786973854992539,
      "time_generation": 2.2282318701036274,
      "time_db": 0.5833854280645028,
      "time_synthesis": 2.0193004469620064,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-25-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca 5 prodotti che abbiamo venduto ma mai acquistato",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE NOT EXISTS {\n    MATCH (a)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)\n}\nRETURN DISTINCT a.descrizione AS prodotto\nORDER BY prodotto\nLIMIT 5",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE NOT EXISTS { MATCH (a)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) } RETURN DISTINCT a.descrizione AS prodotto ORDER BY prodotto LIMIT 5",
      "time_total": 12.73249504598789,
      "time_generation": 4.28471159201581,
      "time_db": 0.7404678269522265,
      "time_synthesis": 1.5057784810196608,
      "jaccard_index": 1.0,
      "query_similarity": 0.9983948635634029,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-26-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca 5 prodotti che abbiamo acquistato ma mai venduto",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) WHERE NOT (a)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento {tipoValore: 'Fatturato'}) RETURN DISTINCT a.descrizione AS prodottoMaiVenduto ORDER BY prodottoMaiVenduto LIMIT 5",
      "expected_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)\nWHERE NOT (a)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento {tipoValore: 'Fatturato'})\nRETURN DISTINCT a.descrizione AS prodottoMaiVenduto\nORDER BY prodottoMaiVenduto\nLIMIT 5",
      "time_total": 12.321444962057285,
      "time_generation": 3.5642610510112718,
      "time_db": 0.3665653099305928,
      "time_synthesis": 2.533688451978378,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-27-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il fatturato della sottofamiglia 'COMPRESSORI SEMIERMETICI'?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(a.descrizione)) = 'compressori dorin' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN sum(dr.importo) AS totale",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(:Articolo)-[:APPARTIENE_A]->(sf:Sottofamiglia) WHERE toLower(trim(sf.nome)) = 'compressori semiermetici' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN sum(dr.importo) AS fatturatoSottofamiglia",
      "time_total": 15.532387059996836,
      "time_generation": 1.8817396969534457,
      "time_db": 0.7395853740163147,
      "time_synthesis": 3.3505374640226364,
      "jaccard_index": 1.0,
      "query_similarity": 0.7929824561403509,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-28-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca le sottofamiglie della famiglia 'CENTRALI FRIGO'",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (f:Famiglia)<-[:INCLUSA_IN]-(sf:Sottofamiglia) WHERE toLower(trim(f.nome)) = 'centrali frigo' RETURN DISTINCT sf.nome AS sottofamiglia ORDER BY sottofamiglia",
      "expected_cypher": "MATCH (f:Famiglia)<-[:INCLUSA_IN]-(sf:Sottofamiglia) WHERE toLower(trim(f.nome)) = 'centrali frigo' RETURN DISTINCT sf.nome AS sottofamiglia ORDER BY sottofamiglia",
      "time_total": 13.238938731024973,
      "time_generation": 1.3444353980012238,
      "time_db": 0.1453722290461883,
      "time_synthesis": 4.643059604917653,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "GENERAL_QUERY",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-29-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il fatturato del primo trimestre 2024?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year = 2024 AND doc.dataEmissione.month >= 1 AND doc.dataEmissione.month <= 3 RETURN sum(dr.importo) AS fatturatoTrimestre",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year = 2024 AND doc.dataEmissione.month >= 1 AND doc.dataEmissione.month <= 3 RETURN sum(dr.importo) AS fatturatoTrimestre",
      "time_total": 10.00521614891477,
      "time_generation": 1.5261320229619741,
      "time_db": 0.34546233410947025,
      "time_synthesis": 1.5143329779384658,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-30-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il fatturato tra Gennaio 2024 e Marzo 2024?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione >= date('2024-01-01') AND doc.dataEmissione <= date('2024-03-31') RETURN sum(dr.importo) AS fatturatoPeriodo",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione >= date('2024-01-01') AND doc.dataEmissione <= date('2024-03-31') RETURN sum(dr.importo) AS fatturatoPeriodo",
      "time_total": 10.492829396971501,
      "time_generation": 1.7890462609939277,
      "time_db": 0.310321953962557,
      "time_synthesis": 1.6206268150126562,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-31-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca i clienti con fatturato superiore a 50000 euro",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH c, sum(dr.importo) AS fatturatoTotale\nWHERE fatturatoTotale > 50000\nRETURN c.name AS cliente, fatturatoTotale\nORDER BY fatturatoTotale DESC\nLIMIT 10",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH c, sum(dr.importo) AS fatturatoTotale WHERE fatturatoTotale > 50000 RETURN c.name AS cliente, fatturatoTotale ORDER BY fatturatoTotale DESC",
      "time_total": 13.230718070059083,
      "time_generation": 1.7194190360605717,
      "time_db": 0.5318215569714084,
      "time_synthesis": 2.4650499689159915,
      "jaccard_index": 0.10416666666666667,
      "query_similarity": 0.9842381786339754,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "cliente": "SUPERMERCATO S.LUCIA S.R.L. UNIPERSONALE",
          "fatturatoTotale": 108851.15
        },
        {
          "cliente": "UMBRAGEST SRL",
          "fatturatoTotale": 50975.48
        },
        {
          "cliente": "IPEM 2011 SRL",
          "fatturatoTotale": 338604.54
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-32-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali sono i 3 prodotti pi\u00f9 venduti al cliente 'BARONE DI FERRANTE EZIO'?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(c.name)) = 'barone di ferrante ezio' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN a.descrizione AS prodotto, sum(dr.importo) AS totaleVenduto ORDER BY totaleVenduto DESC LIMIT 3",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(c.name)) = 'barone di ferrante ezio' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN a.descrizione AS prodotto, sum(dr.importo) AS totaleVenduto ORDER BY totaleVenduto DESC LIMIT 3",
      "time_total": 10.587654347997159,
      "time_generation": 2.0097739440388978,
      "time_db": 0.5794360139407218,
      "time_synthesis": 1.9312290569068864,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-33-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali sono i 3 prodotti meno venduti al cliente 'BARONE DI FERRANTE EZIO'?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(c.name)) = 'barone di ferrante ezio' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN a.descrizione AS prodotto, sum(dr.importo) AS totaleVenduto ORDER BY totaleVenduto ASC LIMIT 3",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(c.name)) = 'barone di ferrante ezio' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN a.descrizione AS prodotto, sum(dr.importo) AS totaleVenduto ORDER BY totaleVenduto ASC LIMIT 3",
      "time_total": 12.282630185014568,
      "time_generation": 2.1879755419213325,
      "time_db": 0.7046158380107954,
      "time_synthesis": 2.6987220540177077,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-34-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quanti fornitori appartengono a ciascun gruppo di fornitori?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(f:Fornitore)\nRETURN gf.ragioneSociale AS gruppoFornitore, count(DISTINCT f) AS conteggioFornitori\nORDER BY conteggioFornitori DESC",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(f:Fornitore) RETURN gf.ragioneSociale AS gruppo, count(f) AS numeroFornitori ORDER BY numeroFornitori DESC",
      "time_total": 10.679452858981676,
      "time_generation": 1.579180388012901,
      "time_db": 0.8407275349600241,
      "time_synthesis": 2.0082157648866996,
      "jaccard_index": 0.0,
      "query_similarity": 0.8928571428571429,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-35-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 l'importo minimo registrato in una singola riga di fattura di vendita?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN min(dr.importo) AS importoMinimo",
      "expected_cypher": "MATCH (dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN min(dr.importo) AS importoMinimo",
      "time_total": 12.069534461013973,
      "time_generation": 1.3548249090090394,
      "time_db": 0.19862251495942473,
      "time_synthesis": 1.8069335980108008,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-36-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 l'importo massimo registrato in una singola riga di fattura di vendita?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN max(dr.importo) AS importoMassimo",
      "expected_cypher": "MATCH (dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN max(dr.importo) AS importoMassimo",
      "time_total": 10.821533279959112,
      "time_generation": 0.9758126009255648,
      "time_db": 0.19739712600130588,
      "time_synthesis": 3.1629121869336814,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-37-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 la quantit\u00e0 media di articoli per riga nei documenti di acquisto?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nRETURN avg(dr.quantita) AS quantitaMediaAcquisto",
      "expected_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) RETURN avg(dr.quantita) AS quantitaMediaAcquisto",
      "time_total": 11.877940808073618,
      "time_generation": 1.432467021048069,
      "time_db": 0.23727336898446083,
      "time_synthesis": 1.2378520600032061,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-38-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quanti articoli unici sono presenti nel catalogo?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo)\nRETURN count(DISTINCT a) AS conteggio",
      "expected_cypher": "MATCH (a:Articolo) RETURN count(DISTINCT a) AS totaleArticoli",
      "time_total": 21.224789988948032,
      "time_generation": 1.274343515979126,
      "time_db": 0.0766869360813871,
      "time_synthesis": 2.4366641620872542,
      "jaccard_index": 1.0,
      "query_similarity": 0.8547008547008547,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-39-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca i clienti dell'azienda '1' situati nella provincia di 'PG'",
      "success": false,
      "error": "Query mancante",
      "generated_cypher": null,
      "expected_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(c:Cliente)-[:HAS_ADDRESS]->(l:Luogo) WHERE toLower(trim(l.provincia)) = 'pg' RETURN c.name AS cliente ORDER BY cliente",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": "ENTITY_RESOLVER",
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-40-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Calcola il fatturato totale per il secondo trimestre del 2024 (aprile, maggio, giugno).",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year = 2024 AND doc.dataEmissione.month IN [4, 5, 6] RETURN sum(dr.importo) AS fatturatoTrimestre",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year = 2024 AND doc.dataEmissione.month IN [4, 5, 6] RETURN sum(dr.importo) AS fatturatoTrimestre",
      "time_total": 9.767942514969036,
      "time_generation": 1.779901152011007,
      "time_db": 0.30244308605324477,
      "time_synthesis": 1.5193670380394906,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-41-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Trova tutti gli articoli la cui descrizione inizia con 'TUBO'",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (a:Articolo)\nWHERE toLower(trim(a.descrizione)) STARTS WITH 'tubo'\nRETURN DISTINCT a.descrizione AS articolo\nORDER BY articolo\nLIMIT 10",
      "expected_cypher": "MATCH (a:Articolo) WHERE toLower(trim(a.descrizione)) STARTS WITH 'tubo' RETURN a.descrizione AS articolo",
      "time_total": 12.344142316957004,
      "time_generation": 1.2265129389707,
      "time_db": 0.15131794603075832,
      "time_synthesis": 1.6524545419961214,
      "jaccard_index": 0.03558718861209965,
      "query_similarity": 0.8536585365853658,
      "specialist": "GENERAL_QUERY",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "articolo": "TUBO ARMAFLEX T35"
        },
        {
          "articolo": "TUBO NEON TLD15W/83 L437"
        },
        {
          "articolo": "TUBO ARMAFLEX 13X28"
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-42-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami i documenti di tipo 'FNA' ricevuti dal fornitore 'FORNITORE ESEMPIO SPA'",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(f:Fornitore)-[:HA_EMESSO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType)\nWHERE toLower(trim(gf.ragioneSociale)) = 'sma spa'\nAND toLower(trim(dt.codice)) = 'fna'\nRETURN DISTINCT doc.documentoId AS documento\nORDER BY documento\nLIMIT 10",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType) WHERE toLower(trim(gf.ragioneSociale)) = 'fornitore esempio spa' AND dt.codice = 'FNA' RETURN doc.documentoId AS documento",
      "time_total": 14.229577501071617,
      "time_generation": 2.572160650976002,
      "time_db": 0.3560338889947161,
      "time_synthesis": 1.3690595629159361,
      "jaccard_index": 1.0,
      "query_similarity": 0.8278529980657641,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-43-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi sono i 3 clienti con il fatturato pi\u00f9 basso?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale ASC LIMIT 3",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale ASC LIMIT 3",
      "time_total": 10.65713229496032,
      "time_generation": 1.687225139932707,
      "time_db": 0.5746084520360455,
      "time_synthesis": 1.7994032710557804,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-44-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi sono i 3 clienti con il fatturato pi\u00f9 alto?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC LIMIT 3",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC LIMIT 3",
      "time_total": 9.732241512043402,
      "time_generation": 1.9511076409835368,
      "time_db": 0.516974008991383,
      "time_synthesis": 1.7710324240615591,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-45-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali sono i 5 articoli con il costo totale di acquisto pi\u00f9 alto?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)\nRETURN a.descrizione AS articolo, sum(dr.importo) AS costoTotale\nORDER BY costoTotale DESC\nLIMIT 5",
      "expected_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) RETURN a.descrizione AS articolo, sum(dr.importo) AS costoTotale ORDER BY costoTotale DESC LIMIT 5",
      "time_total": 12.761577774072066,
      "time_generation": 1.920370000996627,
      "time_db": 0.35443289997056127,
      "time_synthesis": 3.121417636051774,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-46-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali sono i 5 articoli con il costo totale di acquisto pi\u00f9 basso?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) RETURN a.descrizione AS articolo, sum(dr.importo) AS costoTotale ORDER BY costoTotale ASC LIMIT 5",
      "expected_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) RETURN a.descrizione AS articolo, sum(dr.importo) AS costoTotale ORDER BY costoTotale ASC LIMIT 5",
      "time_total": 15.145319378003478,
      "time_generation": 2.3137524289777502,
      "time_db": 0.32757185108494014,
      "time_synthesis": 5.00793042301666,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-47-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale fornitore ci vende la gamma pi\u00f9 ampia di articoli unici?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS varietaProdotti ORDER BY varietaProdotti DESC LIMIT 1",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS varietaProdotti ORDER BY varietaProdotti DESC LIMIT 1",
      "time_total": 13.894144893973134,
      "time_generation": 2.150357953971252,
      "time_db": 0.3095013259444386,
      "time_synthesis": 2.1752510239603,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-48-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale fornitore ci vende la gamma meno ampia di articoli unici?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nRETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS varietaProdotti\nORDER BY varietaProdotti ASC\nLIMIT 1",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS varietaProdotti ORDER BY varietaProdotti ASC LIMIT 1",
      "time_total": 14.927283928962424,
      "time_generation": 2.0185744609916583,
      "time_db": 0.2962237820029259,
      "time_synthesis": 1.6774810270871967,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-49-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Ordina le aziende in base al numero totale di documenti di vendita emessi.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)\nRETURN d.dittaId AS azienda, count(DISTINCT doc) AS conteggioDocumenti\nORDER BY conteggioDocumenti DESC\nLIMIT 10",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento) RETURN d.dittaId AS ditta, count(doc) AS numeroDocumenti ORDER BY numeroDocumenti DESC",
      "time_total": 30.879205052973703,
      "time_generation": 12.487557964981534,
      "time_db": 0.16917717701289803,
      "time_synthesis": 2.822314621997066,
      "jaccard_index": 1.0,
      "query_similarity": 0.8742857142857143,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-50-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il fornitore con il maggior numero di articoli forniti?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nRETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS numeroArticoli\nORDER BY numeroArticoli DESC\nLIMIT 1",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS numeroArticoli ORDER BY numeroArticoli DESC LIMIT 1",
      "time_total": 8.608551657991484,
      "time_generation": 1.9609293170506135,
      "time_db": 0.37053550803102553,
      "time_synthesis": 1.396994472015649,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-51-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi sono i principali fornitori degli articoli venduti al nostro miglior cliente?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH c, sum(dr.importo) AS fatturatoCliente\nORDER BY fatturatoCliente DESC\nLIMIT 1\nMATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWITH collect(DISTINCT a) AS articoliDelTopCliente\nMATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE a IN articoliDelTopCliente\nRETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS numeroArticoliDiversiForniti\nORDER BY numeroArticoliDiversiForniti DESC",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH c, sum(dr.importo) AS fatturatoCliente ORDER BY fatturatoCliente DESC LIMIT 1 WITH c AS topCliente MATCH (topCliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WITH topCliente, collect(DISTINCT a) AS articoliDelTopCliente MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE a IN articoliDelTopCliente RETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS numeroArticoliDiversiForniti ORDER BY numeroArticoliDiversiForniti DESC",
      "time_total": 15.868468394037336,
      "time_generation": 3.5391097320243716,
      "time_db": 1.2095936189871281,
      "time_synthesis": 2.4745685750385746,
      "jaccard_index": 1.0,
      "query_similarity": 0.9695712309820194,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-52-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali sono le famiglie di prodotti vendute sia dalla ditta '1' che dalla ditta '2'?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (d1:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(f1:Famiglia)\nWITH COLLECT(DISTINCT f1.nome) AS families_ditta1\nMATCH (d2:Ditta {dittaId: '2'})<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(f2:Famiglia)\nWHERE f2.nome IN families_ditta1\nRETURN DISTINCT f2.nome AS famiglia\nORDER BY famiglia\nLIMIT 10",
      "expected_cypher": "MATCH (fam1:Famiglia)<-[:INCLUSA_IN*0..]-(:Sottofamiglia)<-[:APPARTIENE_A]-(:Articolo)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(:Cliente)-[:APPARTIENE_A]->(:Ditta {dittaId: '1'}) WITH collect(DISTINCT fam1) AS famiglieDitta1 MATCH (fam2:Famiglia)<-[:INCLUSA_IN*0..]-(:Sottofamiglia)<-[:APPARTIENE_A]-(:Articolo)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(:Cliente)-[:APPARTIENE_A]->(:Ditta {dittaId: '2'}) WHERE fam2 IN famiglieDitta1 RETURN DISTINCT fam2.nome AS famigliaComune ORDER BY famigliaComune",
      "time_total": 29.239000822999515,
      "time_generation": 5.176238141953945,
      "time_db": 15.464102727011777,
      "time_synthesis": 1.6743298309156671,
      "jaccard_index": 0.15625,
      "query_similarity": 0.18490245971162,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "famigliaComune": "SIFONI"
        },
        {
          "famigliaComune": "MONITORE"
        },
        {
          "famigliaComune": "INTERRUTTORI"
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-53-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami 5 prodotti che abbiamo acquistato ma mai venduto.",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)\nWHERE NOT (a)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento {tipoValore: 'Fatturato'})\nRETURN DISTINCT a.descrizione AS prodottoMaiVenduto\nORDER BY prodottoMaiVenduto\nLIMIT 5",
      "expected_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) WITH DISTINCT a WHERE NOT (a)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento {tipoValore: 'Fatturato'}) RETURN a.descrizione AS prodottoMaiVenduto LIMIT 5",
      "time_total": 13.33209876390174,
      "time_generation": 3.354891828028485,
      "time_db": 0.24036972492467612,
      "time_synthesis": 1.388856741017662,
      "jaccard_index": 0.0,
      "query_similarity": 0.9023941068139963,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "prodottoMaiVenduto": "COMPR.ERM.SCROLL ZB38KCE"
        },
        {
          "prodottoMaiVenduto": "SERB.ACC A/REFR.LT1000"
        },
        {
          "prodottoMaiVenduto": "COMPR.COPELAND ZF13K4E"
        }
      ],
      "mismatch_extra": [
        {
          "prodottoMaiVenduto": "AEROEVAPORATORE HDI 406 E 3"
        },
        {
          "prodottoMaiVenduto": "ACETILENE IN BOMBOLE"
        },
        {
          "prodottoMaiVenduto": "ACCESSORIO-P5"
        }
      ]
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-54-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami il fatturato totale per ogni mese dell'anno corrente della ditta '1'.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE date(doc.dataEmissione).year = date().year AND dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN date(doc.dataEmissione).month AS mese, sum(dr.importo) AS totale\nORDER BY mese ASC",
      "expected_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE date(doc.dataEmissione).year = date().year AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN date(doc.dataEmissione).month AS mese, sum(dr.importo) AS fatturatoMensile ORDER BY mese ASC",
      "time_total": 11.081569790956564,
      "time_generation": 2.014229408930987,
      "time_db": 0.33073454699479043,
      "time_synthesis": 1.2095245810924098,
      "jaccard_index": 0.0,
      "query_similarity": 0.9720496894409938,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-55-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Confronta il fatturato totale del 2024 con quello del 2023.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year IN [2023, 2024] RETURN doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoTotale ORDER BY anno",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year IN [2023, 2024] RETURN doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoTotale ORDER BY anno",
      "time_total": 13.768024769960903,
      "time_generation": 1.6276517729274929,
      "time_db": 0.4888962130062282,
      "time_synthesis": 3.2805267910007387,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-56-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale fornitore \u00e8 stato il pi\u00f9 attivo (per valore di acquisto) nell'ultimo trimestre?",
      "success": true,
      "error": null,
      "generated_cypher": "WITH date() - duration({months: 3}) AS dataInizioTrimestre\nMATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE doc.dataEmissione >= dataInizioTrimestre\nRETURN gf.ragioneSociale AS fornitore, sum(dr.importo) AS totaleAcquistato\nORDER BY totaleAcquistato DESC\nLIMIT 1",
      "expected_cypher": "WITH date() - duration({months: 3}) AS dataInizioTrimestre MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE doc.dataEmissione >= dataInizioTrimestre RETURN gf.ragioneSociale AS fornitore, sum(dr.importo) AS totaleAcquistato ORDER BY totaleAcquistato DESC LIMIT 1",
      "time_total": 10.665420504054055,
      "time_generation": 2.5066159670241177,
      "time_db": 0.22423684503883123,
      "time_synthesis": 1.1453011550474912,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-57-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami i clienti il cui primo documento di vendita \u00e8 stato emesso negli ultimi 6 mesi.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)\nWITH c, min(doc.dataEmissione) AS primoAcquisto\nWHERE primoAcquisto >= date() - duration({months: 6})\nRETURN c.name AS clienteRecente, primoAcquisto\nORDER BY primoAcquisto DESC",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento) WITH c, min(doc.dataEmissione) AS primoAcquisto WHERE primoAcquisto >= date() - duration({months: 6}) RETURN c.name AS clienteRecente, primoAcquisto ORDER BY primoAcquisto DESC",
      "time_total": 10.927074842038564,
      "time_generation": 1.6940869760001078,
      "time_db": 0.2402015080442652,
      "time_synthesis": 2.4368870289763436,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-58-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Ci sono aziende che non hanno registrato alcun fatturato?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta) WHERE NOT (d)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento {tipoValore: 'Fatturato'}) RETURN d.dittaId AS dittaSenzaFatturato",
      "expected_cypher": "MATCH (d:Ditta) WHERE NOT (d)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento {tipoValore: 'Fatturato'}) RETURN d.dittaId AS dittaSenzaFatturato",
      "time_total": 11.707513181958348,
      "time_generation": 1.7348811560077593,
      "time_db": 0.19556328898761421,
      "time_synthesis": 2.1972400860395283,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-59-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Ultimo documento emesso nel 2024",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (doc:Documento)\nWHERE doc.dataEmissione.year = 2024\nRETURN doc.documentoId AS documentoId, doc.dataEmissione AS dataEmissione\nORDER BY doc.dataEmissione DESC\nLIMIT 1",
      "expected_cypher": "MATCH (doc:Documento) WHERE doc.dataEmissione.year = 2024 WITH doc ORDER BY doc.dataEmissione DESC LIMIT 1 OPTIONAL MATCH (doc)<-[:HA_RICEVUTO]-(c:Cliente) OPTIONAL MATCH (doc)<-[:HA_EMESSO]-(f:Fornitore)-[:RAGGRUPPATO_SOTTO]->(gf:GruppoFornitore) RETURN doc.documentoId AS UltimodocumentoId,  doc.dataEmissione AS DataEmissione, CASE WHEN gf IS NOT NULL THEN gf.ragioneSociale ELSE 'Nostra Azienda (Vendita)' END AS EmessoDa, CASE WHEN c IS NOT NULL THEN c.name ELSE 'Nostra Azienda (Acquisto)' END AS EmessoA",
      "time_total": 18.17013063991908,
      "time_generation": 1.4427951209945604,
      "time_db": 2.349729054956697,
      "time_synthesis": 4.020723198889755,
      "jaccard_index": 0.0,
      "query_similarity": 0.3029411764705882,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "UltimodocumentoId": "2-202400020704",
          "DataEmissione": "2024-12-31",
          "EmessoDa": "Nostra Azienda (Vendita)",
          "EmessoA": "ROMI S.R.L."
        }
      ],
      "mismatch_extra": [
        {
          "documentoId": "2-202400020704",
          "dataEmissione": "2024-12-31"
        }
      ]
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-60-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Trova i fornitori che non ci hanno mai venduto prodotti della famiglia 'CENTRALI FRIGO'",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (targetFam:Famiglia)\nWHERE toLower(trim(targetFam.nome)) = 'centrali frigo'\nWITH targetFam\nMATCH (gf:GruppoFornitore)\nWHERE NOT (gf)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(targetFam)\nRETURN DISTINCT gf.ragioneSociale AS fornitore\nORDER BY fornitore\nLIMIT 10",
      "expected_cypher": "MATCH (fam:Famiglia) WHERE toLower(trim(fam.nome)) = 'centrali frigo' WITH fam MATCH (gf:GruppoFornitore) WHERE NOT (gf)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(fam) RETURN gf.ragioneSociale AS fornitore",
      "time_total": 16.408277879003435,
      "time_generation": 5.579574410105124,
      "time_db": 0.4013979280134663,
      "time_synthesis": 1.8783736049663275,
      "jaccard_index": 0.002631578947368421,
      "query_similarity": 0.9078771695594126,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "fornitore": "P.G. ESOLUTION S.R.L."
        },
        {
          "fornitore": "HOTEL ROMA SUD SRL"
        },
        {
          "fornitore": "RIER SRL"
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-61-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali clienti appartengono esclusivamente all'azienda '1' e non ad altre?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:APPARTIENE_A]->(d:Ditta)\nWITH c, collect(d.dittaId) AS dittaIds\nWHERE size(dittaIds) = 1 AND dittaIds[0] = '1'\nRETURN DISTINCT c.name AS cliente\nORDER BY cliente\nLIMIT 10",
      "expected_cypher": "MATCH (c:Cliente)-[:APPARTIENE_A]->(d:Ditta) WITH c, collect(d.dittaId) AS ditte WHERE size(ditte) = 1 AND ditte[0] = '1' RETURN c.name AS clienteEsclusivo",
      "time_total": 19.55031456903089,
      "time_generation": 6.2104446470038965,
      "time_db": 0.18782698397990316,
      "time_synthesis": 1.6347429919987917,
      "jaccard_index": 0.005305039787798408,
      "query_similarity": 0.8521739130434782,
      "specialist": "DITTE_QUERY",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "clienteEsclusivo": "DOC SNACK BAR"
        },
        {
          "clienteEsclusivo": "OMNIA GEL SRL"
        },
        {
          "clienteEsclusivo": "WONDER SHOP SRLS"
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-62-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Per ogni famiglia di prodotto, chi \u00e8 il cliente che ha generato il fatturato maggiore?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (fam:Famiglia)<-[:INCLUSA_IN]-(:Sottofamiglia)<-[:APPARTIENE_A]-(:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(c:Cliente) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH fam, c, sum(dr.importo) AS fatturato ORDER BY fam.nome, fatturato DESC WITH fam, collect({cliente: c.name, fatturato: fatturato}) AS clientiOrdinati RETURN fam.nome AS famiglia, clientiOrdinati[0].cliente AS topCliente, clientiOrdinati[0].fatturato AS fatturatoMassimo",
      "expected_cypher": "MATCH (fam:Famiglia)<-[:INCLUSA_IN]-(:Sottofamiglia)<-[:APPARTIENE_A]-(:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(c:Cliente) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH fam, c, sum(dr.importo) AS fatturato ORDER BY fam.nome, fatturato DESC WITH fam, collect({cliente: c.name, fatturato: fatturato}) AS clientiOrdinati RETURN fam.nome AS famiglia, clientiOrdinati[0].cliente AS topCliente, clientiOrdinati[0].fatturato AS fatturatoMassimo",
      "time_total": 15.301628056913614,
      "time_generation": 2.449056541081518,
      "time_db": 1.9287214979995042,
      "time_synthesis": 4.942438088939525,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-63-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Calcola il rapporto tra costo totale e fatturato totale per il prodotto 'GAS FREON SOLSTICE N40 R448A'",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (a:Articolo)\nWHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a'\nOPTIONAL MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_acq:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)\nWITH a, coalesce(sum(dr_acq.importo), 0) AS costoTotale\nOPTIONAL MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_ven:RigaDocumento {tipoValore: 'Fatturato'})<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(:Cliente)\nWHERE dr_ven.importo > 0\nWITH costoTotale, coalesce(sum(dr_ven.importo), 0) AS fatturatoTotale\nRETURN\n    costoTotale,\n    fatturatoTotale,\n    CASE\n        WHEN fatturatoTotale <> 0 THEN costoTotale * 1.0 / fatturatoTotale\n        ELSE null\n    END AS rapporto",
      "expected_cypher": "MATCH (a:Articolo) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' OPTIONAL MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_acq:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) WITH a, sum(dr_acq.importo) AS costoTotale OPTIONAL MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_ven:RigaDocumento {tipoValore: 'Fatturato'})<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(:Cliente) WHERE dr_ven.importo > 0 WITH costoTotale, sum(dr_ven.importo) AS fatturatoTotale RETURN  costoTotale, fatturatoTotale, CASE WHEN costoTotale <> 0 THEN fatturatoTotale / costoTotale ELSE null END AS rapporto",
      "time_total": 19.93774975591805,
      "time_generation": 10.631456568953581,
      "time_db": 0.4291487371083349,
      "time_synthesis": 2.2114640360232443,
      "jaccard_index": 0.0,
      "query_similarity": 0.9439102564102564,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "costoTotale": 578501.2,
          "fatturatoTotale": 2225420.2,
          "rapporto": 3.846872227749917
        }
      ],
      "mismatch_extra": [
        {
          "costoTotale": 578501.2,
          "fatturatoTotale": 2225420.2,
          "rapporto": 0.25995144647289525
        }
      ]
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-64-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale provincia ha generato il volume di fatturato pi\u00f9 alto?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo) MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN l.provincia AS provincia, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC LIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo) MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN l.provincia AS provincia, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC LIMIT 1",
      "time_total": 11.19639139296487,
      "time_generation": 1.9914259129436687,
      "time_db": 0.6102659900207072,
      "time_synthesis": 1.3337080009514466,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-65-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale provincia ha generato il volume di fatturato pi\u00f9 basso?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo) MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN l.provincia AS provincia, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale ASC LIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo) MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN l.provincia AS provincia, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale ASC LIMIT 1",
      "time_total": 10.06044605304487,
      "time_generation": 1.6455181679921225,
      "time_db": 0.8139963669236749,
      "time_synthesis": 1.3387547730235383,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-66-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Lista dei clienti il cui fatturato totale \u00e8 superiore al fatturato medio di tutti i clienti.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH count(DISTINCT c) AS totalCustomers, sum(dr.importo) AS totalRevenue\nWITH CASE WHEN totalCustomers = 0 THEN null ELSE totalRevenue / totalCustomers END AS avgRevenue\nWHERE avgRevenue IS NOT NULL\nMATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH c, sum(dr.importo) AS customerRevenue, avgRevenue\nWHERE customerRevenue > avgRevenue\nRETURN c.name AS cliente, customerRevenue\nORDER BY customerRevenue DESC",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH count(DISTINCT c) AS totalCustomers, sum(dr.importo) AS totalRevenue WITH CASE WHEN totalCustomers = 0 THEN null ELSE totalRevenue / totalCustomers END AS avgRevenue WHERE avgRevenue IS NOT NULL MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH c, sum(dr.importo) AS customerRevenue, avgRevenue WHERE customerRevenue > avgRevenue RETURN c.name AS cliente, customerRevenue ORDER BY customerRevenue DESC",
      "time_total": 20.340048043988645,
      "time_generation": 7.935351322987117,
      "time_db": 0.7229392380686477,
      "time_synthesis": 2.8496778120752424,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-67-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami il numero di documenti per ciascun tipo (codice).",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType)\nRETURN dt.codice AS tipoDocumento, count(doc) AS conteggio\nORDER BY tipoDocumento",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType) RETURN dt.codice AS tipoDocumento, count(doc) AS numeroDocumenti ORDER BY numeroDocumenti DESC",
      "time_total": 18.123911689966917,
      "time_generation": 1.7569641569862142,
      "time_db": 0.11618147301487625,
      "time_synthesis": 3.878098025918007,
      "jaccard_index": 1.0,
      "query_similarity": 0.8847583643122676,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-68-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il fatturato totale associato ai documenti di tipo 'FVC'?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'FVC'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN sum(dr.importo) AS totale",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'FVC'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN sum(dr.importo) AS fatturatoFVC",
      "time_total": 10.704377609072253,
      "time_generation": 1.2699023699387908,
      "time_db": 0.4034971488872543,
      "time_synthesis": 2.6517868250375614,
      "jaccard_index": 1.0,
      "query_similarity": 0.965,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-69-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale cliente ha ricevuto il maggior numero di note di credito (codice 'NCC')?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'NCC'})\nRETURN c.name AS cliente, count(doc) AS numeroNoteCredito\nORDER BY numeroNoteCredito DESC\nLIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'NCC'}) RETURN c.name AS cliente, count(doc) AS numeroNoteCredito ORDER BY numeroNoteCredito DESC LIMIT 1",
      "time_total": 15.02558853989467,
      "time_generation": 2.4058264470659196,
      "time_db": 0.13292509596794844,
      "time_synthesis": 1.9688602830283344,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-70-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Calcola il valore medio di un documento per ciascun tipo (considerando solo il fatturato).",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType), (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH dt, doc, sum(dr.importo) AS valoreDocumento\nRETURN dt.codice AS tipoDocumento, avg(valoreDocumento) AS valoreMedio\nORDER BY valoreMedio DESC",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH dt, doc, sum(dr.importo) AS valoreDocumento RETURN dt.codice AS tipoDocumento, avg(valoreDocumento) AS valoreMedio ORDER BY valoreMedio DESC",
      "time_total": 13.552618329995312,
      "time_generation": 3.017029171111062,
      "time_db": 0.6031985490117222,
      "time_synthesis": 1.8274270099354908,
      "jaccard_index": 1.0,
      "query_similarity": 0.9879931389365352,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-71-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi \u00e8 il cliente con il fatturato pi\u00f9 alto?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale\nORDER BY fatturatoTotale DESC\nLIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC LIMIT 1",
      "time_total": 9.193180283997208,
      "time_generation": 1.6351048559881747,
      "time_db": 0.5445761199807748,
      "time_synthesis": 1.5982914950000122,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-72-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca 5 clienti situati a Perugia",
      "success": false,
      "error": "Query mancante",
      "generated_cypher": null,
      "expected_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo) WHERE toLower(trim(l.localita)) = 'perugia' RETURN DISTINCT c.name AS cliente ORDER BY cliente LIMIT 5",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": "ENTITY_RESOLVER",
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-73-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami i 5 prodotti pi\u00f9 popolari in termini di quantit\u00e0 venduta",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN a.descrizione AS prodotto, sum(dr.quantita) AS quantitaTotale ORDER BY quantitaTotale DESC LIMIT 5",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN a.descrizione AS prodotto, sum(dr.quantita) AS quantitaTotale ORDER BY quantitaTotale DESC LIMIT 5",
      "time_total": 10.353803065954708,
      "time_generation": 1.9328273389255628,
      "time_db": 0.5753517650300637,
      "time_synthesis": 1.8420118970097974,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-74-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Dimmi il fatturato di ciascuna azienda.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN d.dittaId AS ditta, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN d.dittaId AS ditta, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC",
      "time_total": 11.60366234893445,
      "time_generation": 2.2097561969421804,
      "time_db": 0.6439236659789458,
      "time_synthesis": 1.5102986419806257,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-75-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quanto ho speso per acquistare il prodotto GAS FREON SOLSTICE N40 R448A?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' RETURN sum(dr.importo) AS costoTotaleAcquisto",
      "expected_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' RETURN sum(dr.importo) AS costoTotaleAcquisto",
      "time_total": 11.544525396078825,
      "time_generation": 2.485498032066971,
      "time_db": 0.1842369280057028,
      "time_synthesis": 2.073771836934611,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-76-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quanto ho guadagnato vendendo il prodotto GAS FREON SOLSTICE N40 R448A?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN sum(dr.importo) AS totaleVenduto",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN sum(dr.importo) AS totaleVenduto",
      "time_total": 10.552749377908185,
      "time_generation": 1.802001071977429,
      "time_db": 0.5103242549812421,
      "time_synthesis": 1.320657637086697,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-77-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali aziende vendono prodotti della famiglia 'CENTRALI FRIGO'?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia)\nWHERE toLower(trim(fam.nome)) = 'centrali frigo'\nRETURN DISTINCT d.dittaId AS ditta\nORDER BY ditta\nLIMIT 10",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia) WHERE toLower(trim(fam.nome)) = 'centrali frigo' RETURN DISTINCT d.dittaId AS ditta ORDER BY ditta",
      "time_total": 17.880179270985536,
      "time_generation": 2.0349618699401617,
      "time_db": 7.277332604047842,
      "time_synthesis": 1.399300886085257,
      "jaccard_index": 1.0,
      "query_similarity": 0.9822294022617124,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-78-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 l'importo medio per riga documento nelle fatture di vendita?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN avg(dr.importo) AS importoMedioRiga",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN avg(dr.importo) AS importoMedioRiga",
      "time_total": 15.6656512679765,
      "time_generation": 1.819702774984762,
      "time_db": 0.329486170085147,
      "time_synthesis": 6.245155811076984,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-79-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Per ogni azienda, classifica il suo fatturato totale come 'Alto' se supera i 10 milioni, 'Medio' se \u00e8 tra 1 e 10 milioni, e 'Basso' altrimenti.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH d, sum(dr.importo) AS fatturatoTotale RETURN d.dittaId AS ditta, fatturatoTotale, CASE WHEN fatturatoTotale > 10000000 THEN 'Alto' WHEN fatturatoTotale > 1000000 THEN 'Medio' ELSE 'Basso' END AS categoriaFatturato",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH d, sum(dr.importo) AS fatturatoTotale RETURN d.dittaId AS ditta, fatturatoTotale, CASE WHEN fatturatoTotale > 10000000 THEN 'Alto' WHEN fatturatoTotale > 1000000 THEN 'Medio' ELSE 'Basso' END AS categoriaFatturato",
      "time_total": 15.94807995192241,
      "time_generation": 3.2647577919997275,
      "time_db": 0.5872736329911277,
      "time_synthesis": 2.7444802050013095,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-80-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il primo e l'ultimo documento di vendita mai registrato per il cliente 'ACME SRL'?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)\nWHERE toLower(trim(c.name)) = 'grazia srsl'\nRETURN min(doc.dataEmissione) AS primoDocumento, max(doc.dataEmissione) AS ultimoDocumento",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento) WHERE toLower(trim(c.name)) = 'acme srl' RETURN min(doc.dataEmissione) AS primoDocumento, max(doc.dataEmissione) AS ultimoDocumento",
      "time_total": 11.766638966975734,
      "time_generation": 1.725683786906302,
      "time_db": 0.12005657097324729,
      "time_synthesis": 1.7296449650311843,
      "jaccard_index": 0.0,
      "query_similarity": 0.9753424657534246,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "primoDocumento": null,
          "ultimoDocumento": null
        }
      ],
      "mismatch_extra": [
        {
          "primoDocumento": "2024-12-12",
          "ultimoDocumento": "2024-12-12"
        }
      ]
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-81-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 la media del fatturato mensile per il cliente 'ACME SRL' nel 2024?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE toLower(trim(c.name)) = 'grazia srsl' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year = 2024 WITH date(doc.dataEmissione).month AS mese, sum(dr.importo) AS fatturatoMensile RETURN avg(fatturatoMensile) AS mediaFatturatoMensile",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE toLower(trim(c.name)) = 'l\\'abbondanza srl' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year = 2024 WITH date(doc.dataEmissione).month AS mese, sum(dr.importo) AS fatturatoMensile RETURN avg(fatturatoMensile) AS mediaFatturatoMensile",
      "time_total": 12.347391959978268,
      "time_generation": 2.011605935986154,
      "time_db": 0.22327472793404013,
      "time_synthesis": 1.6431984869996086,
      "jaccard_index": 0.0,
      "query_similarity": 0.9659090909090909,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "mediaFatturatoMensile": 170779.8825
        }
      ],
      "mismatch_extra": [
        {
          "mediaFatturatoMensile": 2125.9
        }
      ]
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-82-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Per i primi 3 clienti per fatturato, mostra il loro prodotto pi\u00f9 acquistato per valore.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH c, sum(dr.importo) AS fatturatoCliente ORDER BY fatturatoCliente DESC LIMIT 3 MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr2:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE dr2.tipoValore = 'Fatturato' AND dr2.importo > 0 WITH c, a, sum(dr2.importo) AS valoreProdotto ORDER BY c.name, valoreProdotto DESC WITH c, head(collect({prodotto: a.descrizione, valore: valoreProdotto})) AS topProdotto RETURN c.name AS cliente, topProdotto.prodotto AS prodottoTop, topProdotto.valore AS valoreTop ORDER BY c.name",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH c, sum(dr.importo) AS fatturatoCliente ORDER BY fatturatoCliente DESC LIMIT 3 MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr2:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE dr2.tipoValore = 'Fatturato' AND dr2.importo > 0 WITH c, a, sum(dr2.importo) AS valoreProdotto ORDER BY c.name, valoreProdotto DESC WITH c, head(collect({prodotto: a.descrizione, valore: valoreProdotto})) AS topProdotto RETURN c.name AS cliente, topProdotto.prodotto AS prodottoTop, topProdotto.valore AS valoreTop ORDER BY c.name",
      "time_total": 15.270775073906407,
      "time_generation": 3.3397598420269787,
      "time_db": 0.8665442450437695,
      "time_synthesis": 2.9477824280038476,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-83-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali clienti hanno effettuato ordini ma non hanno ancora ricevuto una fattura?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(drOrdine:RigaDocumento)\nWHERE drOrdine.tipoValore = 'Ordinato'\nWITH DISTINCT c\nWHERE NOT (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento {tipoValore: 'Fatturato'})\nRETURN c.name AS cliente\nORDER BY cliente\nLIMIT 10",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento {tipoValore: 'Ordinato'}) WITH DISTINCT c MATCH (c) WHERE NOT (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento {tipoValore: 'Fatturato'}) RETURN c.name AS clienteSenzaFattura",
      "time_total": 27.980910810059868,
      "time_generation": 17.688568921992555,
      "time_db": 0.5385013290215284,
      "time_synthesis": 1.3517714890185744,
      "jaccard_index": 1.0,
      "query_similarity": 0.36363636363636365,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-84-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi \u00e8 il fornitore principale per ogni famiglia di prodotto, in base al valore acquistato?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (fam:Famiglia)<-[:INCLUSA_IN]-(:Sottofamiglia)<-[:APPARTIENE_A]-(:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)-[:RAGGRUPPATO_SOTTO]->(gf:GruppoFornitore)\nWITH fam, gf, sum(dr.importo) AS valoreAcquistato\nORDER BY fam.nome, valoreAcquistato DESC\nWITH fam, collect({fornitore: gf.ragioneSociale, valore: valoreAcquistato})[0] AS fornitoreTop\nRETURN fam.nome AS famiglia, fornitoreTop.fornitore AS fornitorePrincipale",
      "expected_cypher": "MATCH (fam:Famiglia)<-[:INCLUSA_IN]-(:Sottofamiglia)<-[:APPARTIENE_A]-(:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)-[:RAGGRUPPATO_SOTTO]->(gf:GruppoFornitore) WITH fam, gf, sum(dr.importo) AS valoreAcquistato ORDER BY fam.nome, valoreAcquistato DESC WITH fam, collect({fornitore: gf.ragioneSociale, valore: valoreAcquistato})[0] AS fornitoreTop RETURN fam.nome AS famiglia, fornitoreTop.fornitore AS fornitorePrincipale",
      "time_total": 14.411054064985365,
      "time_generation": 3.283574757981114,
      "time_db": 1.00066053296905,
      "time_synthesis": 2.103045772993937,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-85-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il valore totale degli ordini in sospeso (ordinati ma non fatturati)?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Ordinato'\nAND NOT (doc)-[:IS_TYPE]->(:DocType {codice: 'FFA'})\nRETURN sum(dr.importo) AS totale",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Ordinato' WITH c, doc, sum(dr.importo) AS valoreOrdinato WHERE NOT (doc)<-[:CONTIENE_RIGA]-(:RigaDocumento {tipoValore:'Fatturato'}) RETURN sum(valoreOrdinato) AS totaleOrdiniSospesi",
      "time_total": 18.53571536904201,
      "time_generation": 7.664062623050995,
      "time_db": 0.46563838399015367,
      "time_synthesis": 1.895416705054231,
      "jaccard_index": 0.0,
      "query_similarity": 0.5245202558635395,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "totaleOrdiniSospesi": 2376823.710000001
        }
      ],
      "mismatch_extra": [
        {
          "totale": 9526589.930000026
        }
      ]
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-86-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami i clienti che acquistano pi\u00f9 di 10 articoli unici diversi.",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWITH c, count(DISTINCT a.productId) AS conteggioArticoli\nWHERE conteggioArticoli > 10\nRETURN c.name AS cliente, conteggioArticoli\nORDER BY conteggioArticoli DESC\nLIMIT 10",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WITH c, count(DISTINCT a) AS numeroArticoliUnici WHERE numeroArticoliUnici > 10 RETURN c.name AS cliente, numeroArticoliUnici ORDER BY numeroArticoliUnici DESC",
      "time_total": 11.926543421926908,
      "time_generation": 1.8133583159651607,
      "time_db": 0.6804900210117921,
      "time_synthesis": 2.350583481020294,
      "jaccard_index": 0.031446540880503145,
      "query_similarity": 0.6856127886323268,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "cliente": "SMA SRL",
          "numeroArticoliUnici": 13
        },
        {
          "cliente": "GMA.G. SRL",
          "numeroArticoliUnici": 35
        },
        {
          "cliente": "DISCOUNT SETTE SRL",
          "numeroArticoliUnici": 34
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-87-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Per il prodotto pi\u00f9 venduto per quantit\u00e0, qual \u00e8 il suo costo medio di acquisto?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWITH a, sum(dr.quantita) AS quantitaTotale\nORDER BY quantitaTotale DESC\nLIMIT 1\nMATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_acq:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)\nRETURN a.descrizione AS prodotto, avg(CASE WHEN dr_acq.quantita = 0 OR dr_acq.quantita IS NULL THEN null ELSE dr_acq.importo / dr_acq.quantita END) AS costoMedioUnitario",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WITH a, sum(dr.quantita) AS quantitaTotale ORDER BY quantitaTotale DESC LIMIT 1 MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_acq:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) RETURN a.descrizione AS prodotto, avg(CASE WHEN dr_acq.quantita = 0 OR dr_acq.quantita IS NULL THEN null ELSE dr_acq.importo / dr_acq.quantita END) AS costoMedioUnitario",
      "time_total": 17.56922821304761,
      "time_generation": 4.227837337064557,
      "time_db": 1.0512027989607304,
      "time_synthesis": 2.007579521043226,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-88-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca i fornitori che trattano solo prodotti di una singola famiglia.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(f:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia)\nWITH gf, COLLECT(DISTINCT fam.nome) AS families\nWHERE size(families) = 1\nRETURN gf.ragioneSociale AS fornitore\nORDER BY fornitore\nLIMIT 10",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia) WITH gf, count(DISTINCT fam) AS numeroFamiglie WHERE numeroFamiglie = 1 RETURN gf.ragioneSociale AS fornitoreMonoFamiglia",
      "time_total": 14.248750430997461,
      "time_generation": 3.793456261046231,
      "time_db": 0.7630927381105721,
      "time_synthesis": 1.9705441830446944,
      "jaccard_index": 1.0,
      "query_similarity": 0.7982954545454546,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-89-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 la percentuale di fatturato generata dai clienti nella regione 'Umbria' sul totale?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH sum(dr.importo) AS totaleFatturato, sum(CASE WHEN toLower(trim(c.name)) = 'aiab umbria' THEN dr.importo ELSE 0 END) AS fatturatoCliente\nRETURN CASE WHEN totaleFatturato = 0 THEN 0.0 ELSE (fatturatoCliente * 100.0 / totaleFatturato) END AS percentualeFatturatoAIABUmbria",
      "expected_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo),(c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH sum(dr.importo) AS totaleFatturato,  sum(CASE WHEN toLower(trim(l.regione)) = 'umbria' THEN dr.importo ELSE 0 END) AS fatturatoUmbria RETURN CASE WHEN totaleFatturato = 0 THEN 0.0 ELSE (fatturatoUmbria * 100.0 / totaleFatturato) END AS percentualeUmbria",
      "time_total": 12.618654877063818,
      "time_generation": 2.365887549938634,
      "time_db": 0.6706152179976925,
      "time_synthesis": 1.5411050610709935,
      "jaccard_index": 0.0,
      "query_similarity": 0.6323353293413174,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "percentualeUmbria": 58.464609552069845
        }
      ],
      "mismatch_extra": [
        {
          "percentualeFatturatoAIABUmbria": 0.0
        }
      ]
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-90-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Trova il cliente con il valore medio degli ordini pi\u00f9 alto.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH c, doc, sum(dr.importo) AS valoreOrdine\nRETURN c.name AS cliente, avg(valoreOrdine) AS valoreMedioOrdine\nORDER BY valoreMedioOrdine DESC\nLIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH c, doc, sum(dr.importo) AS valoreOrdine RETURN c.name AS cliente, avg(valoreOrdine) AS valoreMedioOrdine ORDER BY valoreMedioOrdine DESC LIMIT 1",
      "time_total": 14.451023036963306,
      "time_generation": 3.16683214798104,
      "time_db": 0.4862157249590382,
      "time_synthesis": 2.495149433030747,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-91-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami i 3 mesi con il maggior numero di documenti di acquisto registrati.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(doc:Documento)\nRETURN doc.dataEmissione.year AS anno, doc.dataEmissione.month AS mese, count(doc) AS numeroDocumenti\nORDER BY numeroDocumenti DESC\nLIMIT 3",
      "expected_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(doc:Documento) RETURN doc.dataEmissione.year AS anno, doc.dataEmissione.month AS mese, count(doc) AS numeroDocumenti ORDER BY numeroDocumenti DESC LIMIT 3",
      "time_total": 11.533970213960856,
      "time_generation": 1.3831853070296347,
      "time_db": 0.1471151519799605,
      "time_synthesis": 1.989883217960596,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-92-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Ci sono prodotti venduti a un prezzo inferiore al loro costo medio di acquisto?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo)\nOPTIONAL MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_acq:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)\nWITH a, avg(CASE WHEN dr_acq.quantita = 0 OR dr_acq.quantita IS NULL THEN null ELSE dr_acq.importo / dr_acq.quantita END) AS costoMedio\nOPTIONAL MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_ven:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(:Cliente)\nWHERE dr_ven.tipoValore = 'Fatturato' AND dr_ven.importo > 0\nWITH a, costoMedio, avg(CASE WHEN dr_ven.quantita = 0 OR dr_ven.quantita IS NULL THEN null ELSE dr_ven.importo / dr_ven.quantita END) AS prezzoMedioVendita\nWHERE prezzoMedioVendita IS NOT NULL AND costoMedio IS NOT NULL AND prezzoMedioVendita < costoMedio\nRETURN a.descrizione AS prodottoInPerdita",
      "expected_cypher": "MATCH (a:Articolo) OPTIONAL MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_acq:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) WITH a, avg(CASE WHEN dr_acq.quantita = 0 OR dr_acq.quantita IS NULL THEN null ELSE dr_acq.importo / dr_acq.quantita END) AS costoMedio OPTIONAL MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_ven:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(:Cliente) WHERE dr_ven.tipoValore = 'Fatturato' AND dr_ven.importo > 0 WITH a, costoMedio, avg(CASE WHEN dr_ven.quantita = 0 OR dr_ven.quantita IS NULL THEN null ELSE dr_ven.importo / dr_ven.quantita END) AS prezzoMedioVendita WHERE prezzoMedioVendita < costoMedio RETURN a.descrizione AS prodottoInPerdita",
      "time_total": 17.139409856055863,
      "time_generation": 7.082946281996556,
      "time_db": 1.3215517229400575,
      "time_synthesis": 1.827673107967712,
      "jaccard_index": 1.0,
      "query_similarity": 0.9573002754820936,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-93-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale tipo di documento (codice) \u00e8 pi\u00f9 frequentemente associato al ciclo di acquisto?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType)\nRETURN dt.codice AS tipoDocumento, count(doc) AS frequenza\nORDER BY frequenza DESC\nLIMIT 1",
      "expected_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType) RETURN dt.codice AS tipoDocumento, count(doc) AS frequenza ORDER BY frequenza DESC LIMIT 1",
      "time_total": 12.177367323078215,
      "time_generation": 1.7976285420591012,
      "time_db": 0.15201464504934847,
      "time_synthesis": 3.2049635850125924,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-94-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca i fornitori situati in un luogo dove non abbiamo clienti.",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l_cliente:Luogo)\nWITH collect(DISTINCT toLower(trim(l_cliente.localita))) AS customerLocalities\nMATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:SI_TROVA_A]->(l_fornitore:Luogo)\nWHERE NOT toLower(trim(l_fornitore.localita)) IN customerLocalities\nRETURN DISTINCT gf.ragioneSociale AS fornitore\nORDER BY fornitore\nLIMIT 10",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(f:Fornitore)-[:SI_TROVA_A]->(lf:Luogo) WHERE NOT EXISTS { MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo {localita: lf.localita}) } RETURN DISTINCT gf.ragioneSociale AS fornitore ORDER BY fornitore",
      "time_total": 19.89718079403974,
      "time_generation": 8.494931648019701,
      "time_db": 0.22837299795355648,
      "time_synthesis": 1.689708972000517,
      "jaccard_index": 0.00998003992015968,
      "query_similarity": 0.5611745513866232,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "fornitore": "P.G. ESOLUTION S.R.L."
        },
        {
          "fornitore": "Stampaprint srl"
        },
        {
          "fornitore": "PERFILI"
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-95-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quante note di credito clienti (NCC) abbiamo emesso in totale?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'NCC'})\nRETURN count(doc) AS conteggio",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'NCC'}) RETURN count(doc) AS numeroNoteCredito",
      "time_total": 13.436033342033625,
      "time_generation": 1.1854108060942963,
      "time_db": 0.0951583239948377,
      "time_synthesis": 1.3086230960907415,
      "jaccard_index": 1.0,
      "query_similarity": 0.9175257731958762,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-96-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami tutti gli ordini fornitori (OF) per maggio 2024.",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType)\nWHERE toLower(trim(dt.codice)) = 'of'\nAND doc.dataEmissione >= date('2024-05-01')\nAND doc.dataEmissione <= date('2024-05-31')\nRETURN gf.ragioneSociale AS fornitore, doc.documentoId AS documentoId, doc.dataEmissione AS dataEmissione\nORDER BY doc.dataEmissione\nLIMIT 10",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'OF'}) WHERE doc.dataEmissione.year = 2024 AND doc.dataEmissione.month = 5 RETURN doc.documentoId AS ordine",
      "time_total": 18.96437047107611,
      "time_generation": 5.182269429904409,
      "time_db": 0.24197583203203976,
      "time_synthesis": 3.7693348680622876,
      "jaccard_index": 0.0,
      "query_similarity": 0.41025641025641024,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "ordine": "2-202400007424"
        },
        {
          "ordine": "2-202400007222"
        },
        {
          "ordine": "2-202400006888"
        }
      ],
      "mismatch_extra": [
        {
          "fornitore": "WUERTH SRL",
          "documentoId": "2-202400006263",
          "dataEmissione": "2024-05-02"
        },
        {
          "fornitore": "MORELLI SPA",
          "documentoId": "2-202400006260",
          "dataEmissione": "2024-05-02"
        },
        {
          "fornitore": "GRUPPO FRANCESCHINI SRL",
          "documentoId": "2-202400006355",
          "dataEmissione": "2024-05-03"
        }
      ]
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-97-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il valore totale delle fatture fornitori (FFA) ricevute?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType)\nWHERE dt.codice = 'FFA'\nMATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nRETURN sum(dr.importo) AS totaleFattureFornitore",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'FFA'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) RETURN sum(dr.importo) AS totaleFattureFornitore",
      "time_total": 11.287191414972767,
      "time_generation": 1.5162788850720972,
      "time_db": 0.11683321406599134,
      "time_synthesis": 1.2797271000454202,
      "jaccard_index": 1.0,
      "query_similarity": 0.9512195121951219,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-98-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca i clienti a cui abbiamo inviato una nota di consegna clienti (DDTV) a Roma.",
      "success": false,
      "error": "Query mancante",
      "generated_cypher": null,
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'DDTV'}) WHERE toLower(trim(doc.tipoOriginale)) CONTAINS 'roma' RETURN DISTINCT c.name AS cliente",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": "ENTITY_RESOLVER",
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-99-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il valore fatturato presente solo nelle fatture clienti (FVC)?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType)\nWHERE dt.codice = 'FVC'\nMATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN sum(dr.importo) AS totale",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'FVC'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' RETURN sum(dr.importo) AS totaleFatturatoInFVC",
      "time_total": 13.835435632965527,
      "time_generation": 1.8087990429485217,
      "time_db": 0.43421207007486373,
      "time_synthesis": 2.3963028070284054,
      "jaccard_index": 1.0,
      "query_similarity": 0.8413098236775819,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-100-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami il totale ordinato attraverso gli ordini clienti (OC) per la ditta '1'.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType) WHERE dt.codice = 'OC' MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Ordinato' RETURN sum(dr.importo) AS totale",
      "expected_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'OC'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Ordinato' RETURN sum(dr.importo) AS totaleOrdinatoDitta1",
      "time_total": 15.076496588997543,
      "time_generation": 2.0604769219644368,
      "time_db": 0.24605260393582284,
      "time_synthesis": 3.932032900978811,
      "jaccard_index": 1.0,
      "query_similarity": 0.89453125,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-101-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il valore medio delle righe fatturate nelle note di consegna clienti (DDTV)?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType)\nWHERE dt.codice = 'DDTV'\nMATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato'\nRETURN avg(dr.importo) AS media",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'DDTV'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Bollato' RETURN avg(dr.importo) AS valoreMedioBollato",
      "time_total": 16.68830694805365,
      "time_generation": 3.065575596061535,
      "time_db": 0.16939697600901127,
      "time_synthesis": 4.055687028099783,
      "jaccard_index": 0.0,
      "query_similarity": 0.8906666666666667,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "valoreMedioBollato": 287.930263878516
        }
      ],
      "mismatch_extra": [
        {
          "media": null
        }
      ]
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-102-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi \u00e8 il cliente con il valore fatturato pi\u00f9 alto considerando solo le fatture immediate (FVC)?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType)\nWHERE dt.codice = 'FVC'\nMATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN c.name AS cliente, sum(dr.importo) AS totale\nORDER BY totale DESC\nLIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'FVC'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS totale ORDER BY totale DESC LIMIT 1",
      "time_total": 12.229044581064954,
      "time_generation": 2.049711826024577,
      "time_db": 0.6090963729657233,
      "time_synthesis": 1.8372837509959936,
      "jaccard_index": 1.0,
      "query_similarity": 0.9458483754512635,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-103-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Per il cliente 'ACME SRL', confronta il totale ordinato e il totale fatturato.",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE toLower(trim(c.name)) = 'grazia srsl'\nRETURN\n  sum(CASE WHEN dr.tipoValore = 'Ordinato' THEN dr.importo ELSE 0 END) AS totaleOrdinato,\n  sum(CASE WHEN dr.tipoValore = 'Fatturato' THEN dr.importo ELSE 0 END) AS totaleFatturato",
      "expected_cypher": "MATCH (c:Cliente) WHERE toLower(trim(c.name)) = 'acme srl' OPTIONAL MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr_ord:RigaDocumento {tipoValore: 'Ordinato'}) WITH c, sum(dr_ord.importo) AS totaleOrdinato OPTIONAL MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr_fat:RigaDocumento {tipoValore: 'Fatturato'}) WHERE dr_fat.importo > 0 RETURN totaleOrdinato, sum(dr_fat.importo) AS totaleFatturato",
      "time_total": 15.068495685933158,
      "time_generation": 3.0984760150313377,
      "time_db": 0.1437344680307433,
      "time_synthesis": 2.638314779032953,
      "jaccard_index": 0.0,
      "query_similarity": 0.3228454172366621,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [],
      "mismatch_extra": [
        {
          "totaleOrdinato": 0,
          "totaleFatturato": 2125.9
        }
      ]
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-104-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca i documenti d'ordine clienti (OC) che non sono ancora stati completamente fatturati.",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc_oc:Documento)-[:IS_TYPE]->(dt_oc:DocType)\nWHERE toLower(trim(dt_oc.codice)) = 'oc'\nMATCH (doc_oc)-[:CONTIENE_RIGA]->(dr_oc:RigaDocumento)\nWHERE dr_oc.tipoValore = 'Ordinato'\nWITH c, doc_oc, sum(dr_oc.importo) AS total_ordered_amount\n\nOPTIONAL MATCH (c)-[:HA_RICEVUTO]->(doc_inv:Documento)-[:CONTIENE_RIGA]->(dr_inv:RigaDocumento)\nWHERE doc_inv.tipoOriginale = doc_oc.documentoId AND dr_inv.tipoValore = 'Fatturato'\nWITH doc_oc, total_ordered_amount, sum(dr_inv.importo) AS total_invoiced_amount\n\nWHERE total_invoiced_amount IS NULL OR total_invoiced_amount < total_ordered_amount\nRETURN doc_oc.documentoId AS documentoOrdineCliente, doc_oc.dataEmissione AS dataEmissione\nORDER BY dataEmissione\nLIMIT 10",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'OC'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento {tipoValore: 'Ordinato'}) WITH doc, sum(dr.importo) AS valoreOrdinato MATCH (doc)-[:CONTIENE_RIGA]->(dr_fat:RigaDocumento {tipoValore: 'Fatturato'}) WITH doc, valoreOrdinato, sum(dr_fat.importo) AS valoreFatturato WHERE valoreOrdinato > valoreFatturato RETURN doc.documentoId AS ordineNonSaldato",
      "time_total": 39.412370842997916,
      "time_generation": 29.700196513091214,
      "time_db": 1.311654945020564,
      "time_synthesis": 2.7641759219113737,
      "jaccard_index": 0.0,
      "query_similarity": 0.3916083916083916,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [],
      "mismatch_extra": [
        {
          "documentoOrdineCliente": "2-202100001619",
          "dataEmissione": "2021-02-05"
        },
        {
          "documentoOrdineCliente": "2-202100000875",
          "dataEmissione": "2021-01-19"
        },
        {
          "documentoOrdineCliente": "2-202100000991",
          "dataEmissione": "2021-01-22"
        }
      ]
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-105-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale tipo di documento (nome) ha il valore medio pi\u00f9 alto per riga (considerando solo i valori fatturati)?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType)\nMATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN dt.nome AS nomeTipoDocumento, avg(dr.importo) AS valoreMedioRiga\nORDER BY valoreMedioRiga DESC\nLIMIT 1",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN dt.nome AS nomeTipoDocumento, avg(dr.importo) AS valoreMedioRiga ORDER BY valoreMedioRiga DESC LIMIT 1",
      "time_total": 12.217408371972851,
      "time_generation": 1.554699985892512,
      "time_db": 0.48571932001505047,
      "time_synthesis": 3.407961096963845,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-106-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami il totale fatturato e il totale ordinato per ciascuna ditta.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nRETURN d.dittaId AS ditta,\n       sum(CASE dr.tipoValore WHEN 'Fatturato' THEN dr.importo ELSE 0 END) AS totaleFatturato,\n       sum(CASE dr.tipoValore WHEN 'Ordinato' THEN dr.importo ELSE 0 END) AS totaleOrdinato\nORDER BY ditta ASC",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) RETURN d.dittaId AS ditta, sum(CASE dr.tipoValore WHEN 'Fatturato' THEN dr.importo ELSE 0 END) AS totaleFatturato, sum(CASE dr.tipoValore WHEN 'Ordinato' THEN dr.importo ELSE 0 END) AS totaleOrdinato ORDER BY ditta ASC",
      "time_total": 22.80561647308059,
      "time_generation": 2.7267650199355558,
      "time_db": 0.5436565770069137,
      "time_synthesis": 3.0636483780108392,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    }
  ]
}