{
  "config": "specialist-gemini-2.5-flash",
  "approach": "specialist",
  "config_name": "gemini-2.5-flash",
  "timestamp": "20251124_161208",
  "examples_top_k": null,
  "summary": {
    "total": 106,
    "success_strict": 83,
    "success_similarity": 89,
    "success_jaccard": 82,
    "failures": 23,
    "accuracy": 78.30188679245283,
    "accuracy_strict": 78.30188679245283,
    "accuracy_similarity": 83.9622641509434,
    "accuracy_jaccard": 77.35849056603774,
    "min_query_similarity": 0.8,
    "min_jaccard": 0.8,
    "avg_time": 17.387723307697463,
    "avg_jaccard": 0.7835007471923059,
    "avg_query_similarity": 0.9083314523219846
  },
  "results": [
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-01-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il fatturato totale del cliente BARONE DI FERRANTE EZIO?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE toLower(trim(c.name)) = 'barone di ferrante ezio' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN sum(dr.importo) AS totale",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE toLower(trim(c.name)) = 'barone di ferrante ezio' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN sum(dr.importo) AS fatturatoTotale",
      "time_total": 10.195976329036057,
      "time_generation": 1.3587429209146649,
      "time_db": 0.2360822909977287,
      "time_synthesis": 1.3337224379647523,
      "jaccard_index": 1.0,
      "query_similarity": 0.9758241758241758,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-02-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi \u00e8 il cliente con il maggior fatturato?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC LIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC LIMIT 1",
      "time_total": 14.09899286692962,
      "time_generation": 1.7792023830115795,
      "time_db": 0.23282600904349238,
      "time_synthesis": 1.4841789259808138,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-03-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca i 5 clienti che hanno fatturato di pi\u00f9 che si trovano in Umbria",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo)\nWHERE toLower(trim(l.regione)) = 'umbria'\nMATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale\nORDER BY fatturatoTotale DESC\nLIMIT 5",
      "expected_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo) WHERE toLower(trim(l.regione)) = 'umbria' MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC LIMIT 5",
      "time_total": 22.660750280017965,
      "time_generation": 9.192446802044287,
      "time_db": 0.293014527997002,
      "time_synthesis": 2.3571459900122136,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-04-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami i 5 prodotti pi\u00f9 popolari in termini di quantit\u00e0 venduta",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN a.descrizione AS prodotto, sum(dr.quantita) AS quantitaTotale ORDER BY quantitaTotale DESC LIMIT 5",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN a.descrizione AS prodotto, sum(dr.quantita) AS quantitaTotale ORDER BY quantitaTotale DESC LIMIT 5",
      "time_total": 13.266644913004711,
      "time_generation": 1.561571177910082,
      "time_db": 0.3434058269485831,
      "time_synthesis": 2.043032969930209,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-05-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami i 5 prodotti meno popolari in termini di quantit\u00e0 venduta",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN a.descrizione AS prodotto, sum(dr.quantita) AS quantitaTotale ORDER BY quantitaTotale ASC LIMIT 5",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN a.descrizione AS prodotto, sum(dr.quantita) AS quantitaTotale ORDER BY quantitaTotale ASC LIMIT 5",
      "time_total": 13.41015663498547,
      "time_generation": 1.4206848660251126,
      "time_db": 0.367229292052798,
      "time_synthesis": 1.6934470590204,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-06-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Dimmi il fatturato di ogni ditta.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN d.dittaId AS ditta, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN d.dittaId AS ditta, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC",
      "time_total": 14.086295319953933,
      "time_generation": 1.6954176960280165,
      "time_db": 0.29151405999436975,
      "time_synthesis": 1.440185884013772,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-07-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Il fatturato di ogni ditta, nel loro anno migliore",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH d, doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoAnnuale\nORDER BY d.dittaId, fatturatoAnnuale DESC\nWITH d, collect({anno: anno, fatturato: fatturatoAnnuale}) AS fatturatiOrdinati\nRETURN d.dittaId AS ditta, fatturatiOrdinati[0].anno AS annoTop, fatturatiOrdinati[0].fatturato AS fatturatoMassimo",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH d, doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoAnnuale ORDER BY d.dittaId, fatturatoAnnuale DESC WITH d, collect({anno: anno, fatturato: fatturatoAnnuale}) AS fatturatiOrdinati RETURN d.dittaId AS ditta, fatturatiOrdinati[0].anno AS annoTop, fatturatiOrdinati[0].fatturato AS fatturatoMassimo",
      "time_total": 16.96697051997762,
      "time_generation": 2.893658410059288,
      "time_db": 0.38063166197389364,
      "time_synthesis": 2.3864994950126857,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-08-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Il fatturato di ogni ditta, nel loro anno peggiore",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH d, doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoAnnuale\nORDER BY d.dittaId, fatturatoAnnuale ASC\nWITH d, collect({anno: anno, fatturato: fatturatoAnnuale}) AS fatturatiOrdinati\nRETURN d.dittaId AS ditta, fatturatiOrdinati[0].anno AS annoPeggiore, fatturatiOrdinati[0].fatturato AS fatturatoPeggiore",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH d, doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoAnnuale ORDER BY d.dittaId, fatturatoAnnuale ASC WITH d, collect({anno: anno, fatturato: fatturatoAnnuale}) AS fatturatiOrdinati RETURN d.dittaId AS ditta, fatturatiOrdinati[0].anno AS annoTop, fatturatiOrdinati[0].fatturato AS fatturatoMassimo",
      "time_total": 17.512632819009013,
      "time_generation": 3.352194859064184,
      "time_db": 0.3369168690405786,
      "time_synthesis": 2.7988936010515317,
      "jaccard_index": 1.0,
      "query_similarity": 0.972972972972973,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-09-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 la famiglia di prodotti pi\u00f9 acquistata?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(f:Famiglia)\nRETURN f.nome AS famiglia, sum(dr.quantita) AS quantitaTotale\nORDER BY quantitaTotale DESC\nLIMIT 1",
      "expected_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)-[:APPARTIENE_A]->(sf:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia) RETURN fam.nome AS famiglia, sum(dr.quantita) AS quantitaTotale ORDER BY quantitaTotale DESC LIMIT 1",
      "time_total": 11.869300929945894,
      "time_generation": 2.1359343819785863,
      "time_db": 0.3599777650088072,
      "time_synthesis": 1.4369195089675486,
      "jaccard_index": 1.0,
      "query_similarity": 0.9893238434163701,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-10-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 la famiglia di prodotti meno acquistata?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)-[:APPARTIENE_A]->(sf:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia)\nRETURN fam.nome AS famiglia, sum(dr.quantita) AS quantitaTotale\nORDER BY quantitaTotale ASC\nLIMIT 1",
      "expected_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)-[:APPARTIENE_A]->(sf:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia) RETURN fam.nome AS famiglia, sum(dr.quantita) AS quantitaTotale ORDER BY quantitaTotale ASC LIMIT 1",
      "time_total": 14.139113868004642,
      "time_generation": 3.0093675879761577,
      "time_db": 0.2218275829218328,
      "time_synthesis": 1.4921917079482228,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-11-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il prodotto pi\u00f9 venduto in generale (per valore)?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN a.descrizione AS prodotto, sum(dr.importo) AS valoreVenduto ORDER BY valoreVenduto DESC LIMIT 1",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN a.descrizione AS prodotto, sum(dr.importo) AS valoreVenduto ORDER BY valoreVenduto DESC LIMIT 1",
      "time_total": 12.540431902045384,
      "time_generation": 1.7151091130217537,
      "time_db": 0.2857728280359879,
      "time_synthesis": 1.7220905480207875,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-12-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il prodotto meno venduto in generale (per valore)?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN a.descrizione AS prodotto, sum(dr.importo) AS valoreVenduto ORDER BY valoreVenduto ASC LIMIT 1",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN a.descrizione AS prodotto, sum(dr.importo) AS valoreVenduto ORDER BY valoreVenduto ASC LIMIT 1",
      "time_total": 16.087565792026,
      "time_generation": 1.6996801600325853,
      "time_db": 0.29103058704640716,
      "time_synthesis": 2.661809023004025,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-13-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "A quanto ho acquistato il prodotto GAS FREON SOLSTICE N40 R448A?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' RETURN sum(dr.importo) AS costoTotaleAcquisto",
      "expected_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' RETURN sum(dr.importo) AS costoTotaleAcquisto",
      "time_total": 17.97393751295749,
      "time_generation": 1.8235924449982122,
      "time_db": 0.1074345379602164,
      "time_synthesis": 1.3734367729630321,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-14-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "A quanto l'ho venduto il prodotto GAS FREON SOLSTICE N40 R448A?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN sum(dr.importo) AS totaleVenduto",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN sum(dr.importo) AS totaleVenduto",
      "time_total": 15.35708055307623,
      "time_generation": 2.163468098966405,
      "time_db": 0.2642954910406843,
      "time_synthesis": 1.4593162160599604,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-15-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Situazione attuale della ditta '2'",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta {dittaId: '2'})<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year IN [date().year, date().year - 1] RETURN doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoAnnuale ORDER BY anno DESC",
      "expected_cypher": "MATCH (d:Ditta {dittaId: '2'})<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year IN [date().year, date().year - 1] RETURN doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoAnnuale ORDER BY anno DESC",
      "time_total": 14.969817972974852,
      "time_generation": 2.0071694660000503,
      "time_db": 0.1525579420849681,
      "time_synthesis": 1.495250349980779,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-16-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali ditte vendono prodotti della famiglia 'CENTRALI FRIGO'?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(f:Famiglia)\nWHERE toLower(trim(f.nome)) = 'centrali frigo'\nRETURN DISTINCT d.dittaId AS ditta\nORDER BY ditta",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia) WHERE toLower(trim(fam.nome)) = 'centrali frigo' RETURN DISTINCT d.dittaId AS ditta ORDER BY ditta",
      "time_total": 12.529444575076923,
      "time_generation": 2.597497312934138,
      "time_db": 0.5394451241008937,
      "time_synthesis": 1.1703616479644552,
      "jaccard_index": 1.0,
      "query_similarity": 0.9917355371900827,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-17-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quanti clienti unici ha la ditta '1'?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(c:Cliente)\nRETURN count(DISTINCT c) AS numeroClientiUnici",
      "expected_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(c:Cliente) RETURN count(DISTINCT c) AS numeroClientiUnici",
      "time_total": 11.216323521919549,
      "time_generation": 1.3707746190484613,
      "time_db": 0.00714518001768738,
      "time_synthesis": 1.4668689289828762,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "DITTE_QUERY",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-18-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale fornitore ci ha inviato pi\u00f9 documenti?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (f:Fornitore)-[:HA_EMESSO]->(doc:Documento)\nRETURN f.ragioneSociale AS fornitore, count(doc) AS numeroDocumenti\nORDER BY numeroDocumenti DESC\nLIMIT 1",
      "expected_cypher": "MATCH (f:Fornitore)-[:HA_EMESSO]->(doc:Documento) RETURN f.ragioneSociale AS fornitore, count(doc) AS numeroDocumenti ORDER BY numeroDocumenti DESC LIMIT 1",
      "time_total": 15.664545377949253,
      "time_generation": 1.5747474180534482,
      "time_db": 0.017861881060525775,
      "time_synthesis": 1.610303369932808,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-19-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca 5 clienti che non hanno mai acquistato il prodotto 'GAS FREON SOLSTICE N40 R448A'",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo)\nWHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a'\nWITH a\nMATCH (c:Cliente)\nWHERE NOT (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a)\nRETURN c.name AS cliente\nORDER BY cliente\nLIMIT 5",
      "expected_cypher": "MATCH (a:Articolo) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' WITH a MATCH (c:Cliente) WHERE NOT (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a) RETURN c.name AS cliente ORDER BY cliente LIMIT 5",
      "time_total": 16.34366745396983,
      "time_generation": 2.1930389469489455,
      "time_db": 0.15488101600203663,
      "time_synthesis": 1.4921247740276158,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-20-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 la localit\u00e0 con il maggior numero di fornitori?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (l:Luogo)<-[:SI_TROVA_A]-(f:Fornitore)\nRETURN toLower(trim(l.localita)) AS localita, count(DISTINCT f) AS conteggio\nORDER BY conteggio DESC\nLIMIT 1",
      "expected_cypher": "MATCH (f:Fornitore)-[:SI_TROVA_A]->(l:Luogo) WHERE l.localita IS NOT NULL RETURN l.localita AS localita, count(DISTINCT f) AS numeroFornitori ORDER BY numeroFornitori DESC LIMIT 1",
      "time_total": 13.458133919048123,
      "time_generation": 1.3830073289573193,
      "time_db": 0.06254127295687795,
      "time_synthesis": 1.5103340959176421,
      "jaccard_index": 0.0,
      "query_similarity": 0.6566265060240963,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "localita": "PERUGIA",
          "numeroFornitori": 835
        }
      ],
      "mismatch_extra": [
        {
          "localita": "perugia",
          "conteggio": 857
        }
      ]
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-21-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 l'importo medio per riga documento nelle fatture di vendita?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN avg(dr.importo) AS importoMedioRiga",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN avg(dr.importo) AS importoMedioRiga",
      "time_total": 11.469955057022162,
      "time_generation": 1.3677252810448408,
      "time_db": 0.16150384698994458,
      "time_synthesis": 1.5490703800460324,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-22-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami 10 documenti di tipo 'FVC' emessi a Gennaio 2025 al cliente 'L'ABBONDANZA SRL'",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType)\nWHERE toLower(trim(c.name)) = 'l\\'abbondanza srl'\n  AND dt.codice = 'FVC'\n  AND doc.dataEmissione.year = 2025\n  AND doc.dataEmissione.month = 1\nRETURN doc.documentoId AS documentoId, doc.dataEmissione AS dataEmissione\nORDER BY dataEmissione DESC\nLIMIT 10",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType) WHERE toLower(trim(c.name)) = 'l\\'abbondanza srl' AND dt.codice = 'FVC' AND doc.dataEmissione.year = 2025 AND doc.dataEmissione.month = 1 RETURN doc.documentoId AS documento LIMIT 10",
      "time_total": 40.11959153600037,
      "time_generation": 2.933707709889859,
      "time_db": 0.1571337329223752,
      "time_synthesis": 3.3364955679280683,
      "jaccard_index": 0.0,
      "query_similarity": 0.8862068965517241,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "documento": "2-202500000049"
        },
        {
          "documento": "2-202500001417"
        },
        {
          "documento": "2-202500000835"
        }
      ],
      "mismatch_extra": [
        {
          "documentoId": "2-202500001242",
          "dataEmissione": "2025-01-31"
        },
        {
          "documentoId": "2-202500001233",
          "dataEmissione": "2025-01-31"
        },
        {
          "documentoId": "2-202500001221",
          "dataEmissione": "2025-01-31"
        }
      ]
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-23-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il margine di profitto del prodotto 'GAS FREON SOLSTICE N40 R448A'?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr1:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a'\nAND dr1.tipoValore = 'Fatturato'\nAND dr1.importo > 0\nWITH a, sum(dr1.importo) AS fatturato\n\nMATCH (f:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr2:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a)\nWITH a, fatturato, sum(dr2.importo) AS costo\n\nRETURN\n    a.descrizione AS prodotto,\n    fatturato,\n    costo,\n    (fatturato - costo) AS margine",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr1:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' AND dr1.tipoValore = 'Fatturato' AND dr1.importo > 0 WITH a, sum(dr1.importo) AS fatturato MATCH (f:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr2:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a) WITH a, fatturato, sum(dr2.importo) AS costo RETURN a.descrizione AS prodotto, fatturato, costo, (fatturato - costo) AS margine",
      "time_total": 23.824727568076923,
      "time_generation": 9.789539991063066,
      "time_db": 0.26400165702216327,
      "time_synthesis": 2.9660051959799603,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-24-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali fornitori ci forniscono prodotti venduti al cliente 'BARONE DI FERRANTE EZIO'?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(c.name)) = 'barone di ferrante ezio' WITH collect(DISTINCT a) AS articoliVenduti MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a) WHERE a IN articoliVenduti RETURN DISTINCT gf.ragioneSociale AS fornitore ORDER BY fornitore",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(c.name)) = 'barone di ferrante ezio' WITH collect(DISTINCT a) AS articoliVenduti MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a) WHERE a IN articoliVenduti RETURN DISTINCT gf.ragioneSociale AS fornitore ORDER BY fornitore",
      "time_total": 16.065910184988752,
      "time_generation": 2.06554453400895,
      "time_db": 0.12484501907601953,
      "time_synthesis": 1.9097214719513431,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-25-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca 5 prodotti che abbiamo venduto ma mai acquistato",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE NOT EXISTS {\n    MATCH (a)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)\n}\nRETURN DISTINCT a.descrizione AS prodotto\nORDER BY prodotto\nLIMIT 5",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE NOT EXISTS { MATCH (a)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) } RETURN DISTINCT a.descrizione AS prodotto ORDER BY prodotto LIMIT 5",
      "time_total": 16.070655458956026,
      "time_generation": 4.3369724929798394,
      "time_db": 0.3646797150140628,
      "time_synthesis": 1.4034150770166889,
      "jaccard_index": 1.0,
      "query_similarity": 0.9983948635634029,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-26-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca 5 prodotti che abbiamo acquistato ma mai venduto",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)\nWHERE NOT (a)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento {tipoValore: 'Fatturato'})\nRETURN DISTINCT a.descrizione AS prodottoMaiVenduto\nORDER BY prodottoMaiVenduto\nLIMIT 5",
      "expected_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)\nWHERE NOT (a)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento {tipoValore: 'Fatturato'})\nRETURN DISTINCT a.descrizione AS prodottoMaiVenduto\nORDER BY prodottoMaiVenduto\nLIMIT 5",
      "time_total": 15.361362432013266,
      "time_generation": 2.7021484579890966,
      "time_db": 0.11639747698791325,
      "time_synthesis": 2.8376215969910845,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-27-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il fatturato della sottofamiglia 'COMPRESSORI SEMIERMETICI'?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(:Articolo)-[:APPARTIENE_A]->(sf:Sottofamiglia) WHERE toLower(trim(sf.nome)) = 'compressori dorin' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN sum(dr.importo) AS fatturatoSottofamiglia",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(:Articolo)-[:APPARTIENE_A]->(sf:Sottofamiglia) WHERE toLower(trim(sf.nome)) = 'compressori semiermetici' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN sum(dr.importo) AS fatturatoSottofamiglia",
      "time_total": 15.875448017963208,
      "time_generation": 2.09835932997521,
      "time_db": 0.3434148009400815,
      "time_synthesis": 1.435181271051988,
      "jaccard_index": 1.0,
      "query_similarity": 0.9723577235772358,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-28-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca le sottofamiglie della famiglia 'CENTRALI FRIGO'",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (f:Famiglia)<-[:INCLUSA_IN]-(sf:Sottofamiglia) WHERE toLower(trim(f.nome)) = 'centrali frigo' RETURN DISTINCT sf.nome AS sottofamiglia ORDER BY sottofamiglia",
      "expected_cypher": "MATCH (f:Famiglia)<-[:INCLUSA_IN]-(sf:Sottofamiglia) WHERE toLower(trim(f.nome)) = 'centrali frigo' RETURN DISTINCT sf.nome AS sottofamiglia ORDER BY sottofamiglia",
      "time_total": 17.212768831057474,
      "time_generation": 1.2837628240231425,
      "time_db": 0.005192048032768071,
      "time_synthesis": 1.44016024004668,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "GENERAL_QUERY",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-29-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il fatturato del primo trimestre 2024?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year = 2024 AND doc.dataEmissione.month >= 1 AND doc.dataEmissione.month <= 3 RETURN sum(dr.importo) AS fatturatoTrimestre",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year = 2024 AND doc.dataEmissione.month >= 1 AND doc.dataEmissione.month <= 3 RETURN sum(dr.importo) AS fatturatoTrimestre",
      "time_total": 11.111062506912276,
      "time_generation": 1.4800928749609739,
      "time_db": 0.05732664605602622,
      "time_synthesis": 1.3694461019476876,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-30-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il fatturato tra Gennaio 2024 e Marzo 2024?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione >= date('2024-01-01') AND doc.dataEmissione <= date('2024-03-31') RETURN sum(dr.importo) AS fatturatoPeriodo",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione >= date('2024-01-01') AND doc.dataEmissione <= date('2024-03-31') RETURN sum(dr.importo) AS fatturatoPeriodo",
      "time_total": 13.0834784359904,
      "time_generation": 1.6524312450783327,
      "time_db": 0.01895538007374853,
      "time_synthesis": 1.4974204520694911,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-31-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca i clienti con fatturato superiore a 50000 euro",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH c, sum(dr.importo) AS fatturatoTotale\nWHERE fatturatoTotale > 50000\nRETURN c.name AS cliente, fatturatoTotale\nORDER BY fatturatoTotale DESC\nLIMIT 10",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH c, sum(dr.importo) AS fatturatoTotale WHERE fatturatoTotale > 50000 RETURN c.name AS cliente, fatturatoTotale ORDER BY fatturatoTotale DESC",
      "time_total": 15.319868791964836,
      "time_generation": 1.7530361249810085,
      "time_db": 0.20306622399948537,
      "time_synthesis": 3.475579957012087,
      "jaccard_index": 0.10416666666666667,
      "query_similarity": 0.9842381786339754,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "cliente": "TOLA SRL",
          "fatturatoTotale": 51529.14999999999
        },
        {
          "cliente": "ARNEG SPA",
          "fatturatoTotale": 361904.6699999998
        },
        {
          "cliente": "LAY QUALITY SERVICE SRL",
          "fatturatoTotale": 106242.09999999999
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-32-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali sono i 3 prodotti pi\u00f9 venduti al cliente 'BARONE DI FERRANTE EZIO'?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(c.name)) = 'barone di ferrante ezio' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN a.descrizione AS prodotto, sum(dr.importo) AS totaleVenduto ORDER BY totaleVenduto DESC LIMIT 3",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(c.name)) = 'barone di ferrante ezio' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN a.descrizione AS prodotto, sum(dr.importo) AS totaleVenduto ORDER BY totaleVenduto DESC LIMIT 3",
      "time_total": 13.404513422050513,
      "time_generation": 1.9572416419396177,
      "time_db": 0.2127244049916044,
      "time_synthesis": 1.9217236039694399,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-33-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali sono i 3 prodotti meno venduti al cliente 'BARONE DI FERRANTE EZIO'?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(c.name)) = 'barone di ferrante ezio' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN a.descrizione AS prodotto, sum(dr.importo) AS totaleVenduto ORDER BY totaleVenduto ASC LIMIT 3",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(c.name)) = 'barone di ferrante ezio' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN a.descrizione AS prodotto, sum(dr.importo) AS totaleVenduto ORDER BY totaleVenduto ASC LIMIT 3",
      "time_total": 16.372658625012264,
      "time_generation": 1.710518257925287,
      "time_db": 0.21739950496703386,
      "time_synthesis": 4.779273498104885,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-34-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quanti fornitori appartengono a ciascun gruppo di fornitori?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(f:Fornitore)\nRETURN gf.ragioneSociale AS gruppoFornitore, count(f) AS conteggio\nORDER BY gruppoFornitore",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(f:Fornitore) RETURN gf.ragioneSociale AS gruppo, count(f) AS numeroFornitori ORDER BY numeroFornitori DESC",
      "time_total": 15.241085094981827,
      "time_generation": 1.2280497070169076,
      "time_db": 0.43451668799389154,
      "time_synthesis": 4.976231546024792,
      "jaccard_index": 0.0,
      "query_similarity": 0.864516129032258,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-35-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 l'importo minimo registrato in una singola riga di fattura di vendita?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN min(dr.importo) AS importoMinimo",
      "expected_cypher": "MATCH (dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN min(dr.importo) AS importoMinimo",
      "time_total": 12.75798402307555,
      "time_generation": 1.322054875898175,
      "time_db": 0.046012725098989904,
      "time_synthesis": 1.552957084029913,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-36-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 l'importo massimo registrato in una singola riga di fattura di vendita?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN max(dr.importo) AS importoMassimo",
      "expected_cypher": "MATCH (dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN max(dr.importo) AS importoMassimo",
      "time_total": 11.67956357600633,
      "time_generation": 1.5718943229876459,
      "time_db": 0.047861973056569695,
      "time_synthesis": 2.2242564579937607,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-37-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 la quantit\u00e0 media di articoli per riga nei documenti di acquisto?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) RETURN avg(dr.quantita) AS quantitaMediaAcquisto",
      "expected_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) RETURN avg(dr.quantita) AS quantitaMediaAcquisto",
      "time_total": 11.620892714941874,
      "time_generation": 1.5093016989994794,
      "time_db": 0.06109567207749933,
      "time_synthesis": 2.7543634509202093,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-38-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quanti articoli unici sono presenti nel catalogo?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo)\nRETURN count(DISTINCT a) AS conteggio",
      "expected_cypher": "MATCH (a:Articolo) RETURN count(DISTINCT a) AS totaleArticoli",
      "time_total": 27.523508650949225,
      "time_generation": 1.0086299229878932,
      "time_db": 0.006200624979101121,
      "time_synthesis": 3.4702465379377827,
      "jaccard_index": 1.0,
      "query_similarity": 0.8547008547008547,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-39-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca 10 clienti dell'azienda '1'",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(c:Cliente)\nRETURN DISTINCT c.name AS cliente\nORDER BY cliente\nLIMIT 10",
      "expected_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(c:Cliente) RETURN c.name AS cliente ORDER BY cliente LIMIT 10",
      "time_total": 17.334762829937972,
      "time_generation": 1.2310890100197867,
      "time_db": 0.06550440704450011,
      "time_synthesis": 1.6852118329843506,
      "jaccard_index": 1.0,
      "query_similarity": 0.9606986899563319,
      "specialist": "GENERAL_QUERY",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-40-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Calcola il fatturato totale per il secondo trimestre del 2024 (aprile, maggio, giugno).",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year = 2024 AND doc.dataEmissione.month IN [4, 5, 6] RETURN sum(dr.importo) AS fatturatoTrimestre",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year = 2024 AND doc.dataEmissione.month IN [4, 5, 6] RETURN sum(dr.importo) AS fatturatoTrimestre",
      "time_total": 11.424584563006647,
      "time_generation": 1.7386899120174348,
      "time_db": 0.059914499055594206,
      "time_synthesis": 1.386841275030747,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-41-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Trova tutti gli articoli la cui descrizione inizia con 'TUBO'",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo)\nWHERE toLower(trim(a.descrizione)) STARTS WITH 'tubo'\nRETURN a.descrizione AS articolo",
      "expected_cypher": "MATCH (a:Articolo) WHERE toLower(trim(a.descrizione)) STARTS WITH 'tubo' RETURN a.descrizione AS articolo",
      "time_total": 13.034446306061,
      "time_generation": 0.9943981759715825,
      "time_db": 0.08573804795742035,
      "time_synthesis": 2.102357489988208,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "GENERAL_QUERY",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-42-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami i documenti di tipo 'FNA' ricevuti dal fornitore 'FORNITORE ESEMPIO SPA'",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType)\nWHERE toLower(trim(gf.ragioneSociale)) = 'sma spa'\nAND toLower(trim(dt.codice)) = 'fna'\nRETURN DISTINCT doc.documentoId AS documento\nORDER BY documento\nLIMIT 10",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType) WHERE toLower(trim(gf.ragioneSociale)) = 'fornitore esempio spa' AND dt.codice = 'FNA' RETURN doc.documentoId AS documento",
      "time_total": 16.86594386701472,
      "time_generation": 1.783020603004843,
      "time_db": 0.13979084300808609,
      "time_synthesis": 1.2053783499868587,
      "jaccard_index": 1.0,
      "query_similarity": 0.627906976744186,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-43-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi sono i 3 clienti con il fatturato pi\u00f9 basso?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale ASC LIMIT 3",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale ASC LIMIT 3",
      "time_total": 13.70138691610191,
      "time_generation": 1.2812616640003398,
      "time_db": 0.2412282160948962,
      "time_synthesis": 1.735270865028724,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-44-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi sono i 3 clienti con il fatturato pi\u00f9 alto?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC LIMIT 3",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC LIMIT 3",
      "time_total": 15.002355508040637,
      "time_generation": 1.4748549739597365,
      "time_db": 0.2474584880983457,
      "time_synthesis": 3.6706692109582946,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-45-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali sono i 5 articoli con il costo totale di acquisto pi\u00f9 alto?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)\nRETURN a.descrizione AS articolo, sum(dr.importo) AS costoTotale\nORDER BY costoTotale DESC\nLIMIT 5",
      "expected_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) RETURN a.descrizione AS articolo, sum(dr.importo) AS costoTotale ORDER BY costoTotale DESC LIMIT 5",
      "time_total": 14.609168544993736,
      "time_generation": 1.9536893490003422,
      "time_db": 0.12920970004051924,
      "time_synthesis": 2.6681628179503605,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-46-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali sono i 5 articoli con il costo totale di acquisto pi\u00f9 basso?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)\nRETURN a.descrizione AS articolo, sum(dr.importo) AS costoTotale\nORDER BY costoTotale ASC\nLIMIT 5",
      "expected_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) RETURN a.descrizione AS articolo, sum(dr.importo) AS costoTotale ORDER BY costoTotale ASC LIMIT 5",
      "time_total": 13.816695831017569,
      "time_generation": 1.7107758889906108,
      "time_db": 0.11708366393577307,
      "time_synthesis": 2.156900768983178,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-47-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale fornitore ci vende la gamma pi\u00f9 ampia di articoli unici?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nRETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS varietaProdotti\nORDER BY varietaProdotti DESC\nLIMIT 1",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS varietaProdotti ORDER BY varietaProdotti DESC LIMIT 1",
      "time_total": 18.59142943401821,
      "time_generation": 2.1305701920064166,
      "time_db": 0.06696127203758806,
      "time_synthesis": 1.4118470360990614,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-48-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale fornitore ci vende la gamma meno ampia di articoli unici?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nRETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS varietaProdotti\nORDER BY varietaProdotti ASC\nLIMIT 1",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS varietaProdotti ORDER BY varietaProdotti ASC LIMIT 1",
      "time_total": 23.264718409976922,
      "time_generation": 2.283100518048741,
      "time_db": 0.1506245689233765,
      "time_synthesis": 1.7836464220890775,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-49-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Ordina le aziende in base al numero totale di documenti di vendita emessi.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)\nRETURN d.dittaId AS ditta, count(doc) AS numeroDocumenti\nORDER BY numeroDocumenti DESC",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento) RETURN d.dittaId AS ditta, count(doc) AS numeroDocumenti ORDER BY numeroDocumenti DESC",
      "time_total": 30.81289972399827,
      "time_generation": 1.5047819030005485,
      "time_db": 0.07788397592958063,
      "time_synthesis": 2.632537118042819,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-50-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il fornitore con il maggior numero di articoli forniti?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nRETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS numeroArticoli\nORDER BY numeroArticoli DESC\nLIMIT 1",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS numeroArticoli ORDER BY numeroArticoli DESC LIMIT 1",
      "time_total": 14.968797335983254,
      "time_generation": 2.1673402530141175,
      "time_db": 0.15744358801748604,
      "time_synthesis": 1.7455050660064444,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-51-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi sono i principali fornitori degli articoli venduti al nostro miglior cliente?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH c, sum(dr.importo) AS fatturatoCliente\nORDER BY fatturatoCliente DESC\nLIMIT 1\nMATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWITH collect(DISTINCT a) AS articoliDelTopCliente\nMATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE a IN articoliDelTopCliente\nRETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS numeroArticoliDiversiForniti\nORDER BY numeroArticoliDiversiForniti DESC",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH c, sum(dr.importo) AS fatturatoCliente ORDER BY fatturatoCliente DESC LIMIT 1 WITH c AS topCliente MATCH (topCliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WITH topCliente, collect(DISTINCT a) AS articoliDelTopCliente MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE a IN articoliDelTopCliente RETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS numeroArticoliDiversiForniti ORDER BY numeroArticoliDiversiForniti DESC",
      "time_total": 18.79726644407492,
      "time_generation": 4.615561850951053,
      "time_db": 0.5808921620482579,
      "time_synthesis": 2.198030130006373,
      "jaccard_index": 1.0,
      "query_similarity": 0.9695712309820194,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-52-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali sono le famiglie di prodotti vendute sia dalla ditta '1' che dalla ditta '2'?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (d1:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(f:Famiglia)\nWITH DISTINCT f AS familyFromDitta1\n\nMATCH (d2:Ditta {dittaId: '2'})<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(familyFromDitta1)\nRETURN familyFromDitta1.nome AS famiglia\nORDER BY famiglia\nLIMIT 10",
      "expected_cypher": "MATCH (fam1:Famiglia)<-[:INCLUSA_IN*0..]-(:Sottofamiglia)<-[:APPARTIENE_A]-(:Articolo)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(:Cliente)-[:APPARTIENE_A]->(:Ditta {dittaId: '1'}) WITH collect(DISTINCT fam1) AS famiglieDitta1 MATCH (fam2:Famiglia)<-[:INCLUSA_IN*0..]-(:Sottofamiglia)<-[:APPARTIENE_A]-(:Articolo)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(:Cliente)-[:APPARTIENE_A]->(:Ditta {dittaId: '2'}) WHERE fam2 IN famiglieDitta1 RETURN DISTINCT fam2.nome AS famigliaComune ORDER BY famigliaComune",
      "time_total": 35.34908069297671,
      "time_generation": 7.965923320967704,
      "time_db": 14.394105050014332,
      "time_synthesis": 2.0291750869946554,
      "jaccard_index": 0.015625,
      "query_similarity": 0.23488168273444346,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "famigliaComune": "TELESALVAMOT."
        },
        {
          "famigliaComune": "RISERVA"
        },
        {
          "famigliaComune": "TERMOMETRI"
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-53-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami 5 prodotti che abbiamo acquistato ma mai venduto.",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)\nWITH DISTINCT a\nWHERE NOT (a)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento {tipoValore: 'Fatturato'})\nRETURN a.descrizione AS prodottoMaiVenduto\nORDER BY prodottoMaiVenduto\nLIMIT 5",
      "expected_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) WITH DISTINCT a WHERE NOT (a)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento {tipoValore: 'Fatturato'}) RETURN a.descrizione AS prodottoMaiVenduto LIMIT 5",
      "time_total": 15.482836833107285,
      "time_generation": 4.106025725021027,
      "time_db": 0.16402137896511704,
      "time_synthesis": 1.4910440309904516,
      "jaccard_index": 0.0,
      "query_similarity": 0.9490909090909091,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "prodottoMaiVenduto": "FABBRICATORE TIPO SG230A"
        },
        {
          "prodottoMaiVenduto": "COMPR.COPELAND ZF13K4E"
        },
        {
          "prodottoMaiVenduto": "cap de cddc"
        }
      ],
      "mismatch_extra": [
        {
          "prodottoMaiVenduto": "ACETILENE IN BOMBOLE"
        },
        {
          "prodottoMaiVenduto": "ACCESSORIO-P5"
        },
        {
          "prodottoMaiVenduto": "ADBLUE CISTERNA DA 1000LT"
        }
      ]
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-54-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami il fatturato totale per ogni mese dell'anno corrente della ditta '1'.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE date(doc.dataEmissione).year = date().year AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN date(doc.dataEmissione).month AS mese, sum(dr.importo) AS fatturatoMensile ORDER BY mese ASC",
      "expected_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE date(doc.dataEmissione).year = date().year AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN date(doc.dataEmissione).month AS mese, sum(dr.importo) AS fatturatoMensile ORDER BY mese ASC",
      "time_total": 12.283237810945138,
      "time_generation": 2.327401813934557,
      "time_db": 0.18295761197805405,
      "time_synthesis": 1.4163136139977723,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-55-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Confronta il fatturato totale del 2024 con quello del 2023.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year IN [2023, 2024] RETURN doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoTotale ORDER BY anno",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year IN [2023, 2024] RETURN doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoTotale ORDER BY anno",
      "time_total": 13.617530073039234,
      "time_generation": 2.0164462570101023,
      "time_db": 0.27293140708934516,
      "time_synthesis": 1.8024213949684054,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-56-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale fornitore \u00e8 stato il pi\u00f9 attivo (per valore di acquisto) nell'ultimo trimestre?",
      "success": true,
      "error": null,
      "generated_cypher": "WITH date() - duration({months: 3}) AS dataInizioTrimestre MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE doc.dataEmissione >= dataInizioTrimestre RETURN gf.ragioneSociale AS fornitore, sum(dr.importo) AS totaleAcquistato ORDER BY totaleAcquistato DESC LIMIT 1",
      "expected_cypher": "WITH date() - duration({months: 3}) AS dataInizioTrimestre MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE doc.dataEmissione >= dataInizioTrimestre RETURN gf.ragioneSociale AS fornitore, sum(dr.importo) AS totaleAcquistato ORDER BY totaleAcquistato DESC LIMIT 1",
      "time_total": 11.273825419018976,
      "time_generation": 2.3535810279427096,
      "time_db": 0.10637558693997562,
      "time_synthesis": 1.2689636390423402,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-57-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami i clienti il cui primo documento di vendita \u00e8 stato emesso negli ultimi 6 mesi.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)\nWITH c, min(doc.dataEmissione) AS primoAcquisto\nWHERE primoAcquisto >= date() - duration({months: 6})\nRETURN c.name AS clienteRecente, primoAcquisto\nORDER BY primoAcquisto DESC",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento) WITH c, min(doc.dataEmissione) AS primoAcquisto WHERE primoAcquisto >= date() - duration({months: 6}) RETURN c.name AS clienteRecente, primoAcquisto ORDER BY primoAcquisto DESC",
      "time_total": 9.42414233495947,
      "time_generation": 1.710040568956174,
      "time_db": 0.12257509201299399,
      "time_synthesis": 1.139161296072416,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-58-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Ci sono aziende che non hanno registrato alcun fatturato?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta) WHERE NOT (d)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento {tipoValore: 'Fatturato'}) RETURN d.dittaId AS dittaSenzaFatturato",
      "expected_cypher": "MATCH (d:Ditta) WHERE NOT (d)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento {tipoValore: 'Fatturato'}) RETURN d.dittaId AS dittaSenzaFatturato",
      "time_total": 12.334388351999223,
      "time_generation": 1.81169998110272,
      "time_db": 0.10193814104422927,
      "time_synthesis": 2.273101100930944,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-59-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Ultimo documento emesso nel 2024",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (f:Fornitore)-[:HA_EMESSO]->(doc:Documento)\nWHERE doc.dataEmissione.year = 2024\nRETURN doc.documentoId AS documentoId, doc.tipoOriginale AS tipoDocumento, doc.dataEmissione AS dataEmissione, f.ragioneSociale AS fornitore\nORDER BY doc.dataEmissione DESC\nLIMIT 1",
      "expected_cypher": "MATCH (doc:Documento) WHERE doc.dataEmissione.year = 2024 WITH doc ORDER BY doc.dataEmissione DESC LIMIT 1 OPTIONAL MATCH (doc)<-[:HA_RICEVUTO]-(c:Cliente) OPTIONAL MATCH (doc)<-[:HA_EMESSO]-(f:Fornitore)-[:RAGGRUPPATO_SOTTO]->(gf:GruppoFornitore) RETURN doc.documentoId AS UltimodocumentoId,  doc.dataEmissione AS DataEmissione, CASE WHEN gf IS NOT NULL THEN gf.ragioneSociale ELSE 'Nostra Azienda (Vendita)' END AS EmessoDa, CASE WHEN c IS NOT NULL THEN c.name ELSE 'Nostra Azienda (Acquisto)' END AS EmessoA",
      "time_total": 26.12478855601512,
      "time_generation": 2.620523781981319,
      "time_db": 2.3681721340399235,
      "time_synthesis": 5.0171838470268995,
      "jaccard_index": 0.0,
      "query_similarity": 0.23483870967741935,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "UltimodocumentoId": "2-202400020704",
          "DataEmissione": "2024-12-31",
          "EmessoDa": "Nostra Azienda (Vendita)",
          "EmessoA": "ROMI S.R.L."
        }
      ],
      "mismatch_extra": [
        {
          "documentoId": "1-202400003851",
          "tipoDocumento": "Fattura (autofattura) TD18 senza Coge",
          "dataEmissione": "2024-12-31",
          "fornitore": "AMAZON EU S.A.R.L. 4 NIEDERLASSUNG DEUTSCHLAND"
        }
      ]
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-60-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Trova i fornitori che non ci hanno mai venduto prodotti della famiglia 'CENTRALI FRIGO'",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (f:Famiglia)<-[:INCLUSA_IN]-(:Sottofamiglia)<-[:APPARTIENE_A]-(a:Articolo)\nWHERE toLower(trim(f.nome)) = toLower(trim('CENTRALI FRIGO'))\nWITH collect(a) AS problematicArticles\nMATCH (gf:GruppoFornitore)\nWHERE NOT EXISTS {\n    MATCH (gf)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(pa:Articolo)\n    WHERE pa IN problematicArticles\n}\nRETURN DISTINCT gf.ragioneSociale AS fornitore\nORDER BY fornitore\nLIMIT 10",
      "expected_cypher": "MATCH (fam:Famiglia) WHERE toLower(trim(fam.nome)) = 'centrali frigo' WITH fam MATCH (gf:GruppoFornitore) WHERE NOT (gf)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(fam) RETURN gf.ragioneSociale AS fornitore",
      "time_total": 22.366762641933747,
      "time_generation": 6.406515414011665,
      "time_db": 0.2590334339765832,
      "time_synthesis": 2.0786192229716107,
      "jaccard_index": 0.002631578947368421,
      "query_similarity": 0.6116504854368932,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "fornitore": "STRUGALA"
        },
        {
          "fornitore": "GALLI PAOLO"
        },
        {
          "fornitore": "DISPLAY ITALIA SRL"
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-61-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali clienti appartengono esclusivamente all'azienda '1' e non ad altre?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:APPARTIENE_A]->(d:Ditta)\nWITH c, collect(d.dittaId) AS ditteCliente\nWHERE size(ditteCliente) = 1 AND '1' IN ditteCliente\nRETURN c.name AS cliente\nORDER BY cliente\nLIMIT 10",
      "expected_cypher": "MATCH (c:Cliente)-[:APPARTIENE_A]->(d:Ditta) WITH c, collect(d.dittaId) AS ditte WHERE size(ditte) = 1 AND ditte[0] = '1' RETURN c.name AS clienteEsclusivo",
      "time_total": 17.98430550203193,
      "time_generation": 3.061409139074385,
      "time_db": 0.09440544503740966,
      "time_synthesis": 2.4733328300062567,
      "jaccard_index": 0.005305039787798408,
      "query_similarity": 0.815028901734104,
      "specialist": "DITTE_QUERY",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "clienteEsclusivo": "A.I. SRL"
        },
        {
          "clienteEsclusivo": "VINCENTI GATTI GIULIANO"
        },
        {
          "clienteEsclusivo": "TOLDE SNC"
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-62-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Per ogni famiglia di prodotto, chi \u00e8 il cliente che ha generato il fatturato maggiore?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH fam, c, sum(dr.importo) AS fatturato\nORDER BY fam.nome, fatturato DESC\nWITH fam, collect({cliente: c.name, fatturato: fatturato}) AS clientiOrdinati\nRETURN fam.nome AS famiglia, clientiOrdinati[0].cliente AS topCliente, clientiOrdinati[0].fatturato AS fatturatoMassimo",
      "expected_cypher": "MATCH (fam:Famiglia)<-[:INCLUSA_IN]-(:Sottofamiglia)<-[:APPARTIENE_A]-(:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(c:Cliente) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH fam, c, sum(dr.importo) AS fatturato ORDER BY fam.nome, fatturato DESC WITH fam, collect({cliente: c.name, fatturato: fatturato}) AS clientiOrdinati RETURN fam.nome AS famiglia, clientiOrdinati[0].cliente AS topCliente, clientiOrdinati[0].fatturato AS fatturatoMassimo",
      "time_total": 23.975397162023,
      "time_generation": 3.5843663950217888,
      "time_db": 5.03793912299443,
      "time_synthesis": 3.346579561010003,
      "jaccard_index": 1.0,
      "query_similarity": 0.7066929133858267,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-63-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Calcola il rapporto tra costo totale e fatturato totale per il prodotto 'GAS FREON SOLSTICE N40 R448A'",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (a:Articolo)\nWHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a'\n\nOPTIONAL MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_acq:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)\nWITH a, COALESCE(sum(dr_acq.importo), 0) AS costoTotale\n\nOPTIONAL MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_ven:RigaDocumento {tipoValore: 'Fatturato'})<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(:Cliente)\nWHERE dr_ven.importo > 0\nWITH costoTotale, COALESCE(sum(dr_ven.importo), 0) AS fatturatoTotale\n\nRETURN\n    costoTotale,\n    fatturatoTotale,\n    CASE\n        WHEN fatturatoTotale <> 0 THEN costoTotale / fatturatoTotale\n        ELSE null\n    END AS rapporto",
      "expected_cypher": "MATCH (a:Articolo) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' OPTIONAL MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_acq:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) WITH a, sum(dr_acq.importo) AS costoTotale OPTIONAL MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_ven:RigaDocumento {tipoValore: 'Fatturato'})<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(:Cliente) WHERE dr_ven.importo > 0 WITH costoTotale, sum(dr_ven.importo) AS fatturatoTotale RETURN  costoTotale, fatturatoTotale, CASE WHEN costoTotale <> 0 THEN fatturatoTotale / costoTotale ELSE null END AS rapporto",
      "time_total": 20.619574510026723,
      "time_generation": 6.652458871016279,
      "time_db": 0.3515687860781327,
      "time_synthesis": 1.5749301959294826,
      "jaccard_index": 0.0,
      "query_similarity": 0.9484702093397746,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "costoTotale": 578501.2,
          "fatturatoTotale": 2225420.2,
          "rapporto": 3.846872227749917
        }
      ],
      "mismatch_extra": [
        {
          "costoTotale": 578501.2,
          "fatturatoTotale": 2225420.2,
          "rapporto": 0.25995144647289525
        }
      ]
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-64-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale provincia ha generato il volume di fatturato pi\u00f9 alto?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo) MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN l.provincia AS provincia, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC LIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo) MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN l.provincia AS provincia, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC LIMIT 1",
      "time_total": 14.044192645000294,
      "time_generation": 1.5575036690570414,
      "time_db": 0.4132380720693618,
      "time_synthesis": 1.140694011002779,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-65-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale provincia ha generato il volume di fatturato pi\u00f9 basso?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo) MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN l.provincia AS provincia, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale ASC LIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo) MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN l.provincia AS provincia, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale ASC LIMIT 1",
      "time_total": 13.95528882497456,
      "time_generation": 2.0844870570581406,
      "time_db": 0.4222675709752366,
      "time_synthesis": 1.3500080929370597,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-66-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Lista dei clienti il cui fatturato totale \u00e8 superiore al fatturato medio di tutti i clienti.",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH count(DISTINCT c) AS totalCustomers, sum(dr.importo) AS totalRevenue\nWITH CASE WHEN totalCustomers = 0 THEN null ELSE totalRevenue / totalCustomers END AS avgRevenue\nWHERE avgRevenue IS NOT NULL\nMATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH c, sum(dr.importo) AS customerRevenue, avgRevenue\nWHERE customerRevenue > avgRevenue\nRETURN c.name AS cliente, customerRevenue AS fatturato\nORDER BY fatturato DESC\nLIMIT 10",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH count(DISTINCT c) AS totalCustomers, sum(dr.importo) AS totalRevenue WITH CASE WHEN totalCustomers = 0 THEN null ELSE totalRevenue / totalCustomers END AS avgRevenue WHERE avgRevenue IS NOT NULL MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH c, sum(dr.importo) AS customerRevenue, avgRevenue WHERE customerRevenue > avgRevenue RETURN c.name AS cliente, customerRevenue ORDER BY customerRevenue DESC",
      "time_total": 21.732839872012846,
      "time_generation": 6.933749387040734,
      "time_db": 0.5687317810952663,
      "time_synthesis": 3.003633535001427,
      "jaccard_index": 0.12987012987012986,
      "query_similarity": 0.9564541213063764,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "cliente": "ARNEG SPA",
          "customerRevenue": 361904.6699999998
        },
        {
          "cliente": "LAY QUALITY SERVICE SRL",
          "customerRevenue": 106242.09999999999
        },
        {
          "cliente": "FAMILY NEGOZI SRL",
          "customerRevenue": 85123.83000000002
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-67-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami il numero di documenti per ciascun tipo (codice).",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType)\nRETURN dt.codice AS tipoDocumento, count(doc) AS conteggio\nORDER BY tipoDocumento",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType) RETURN dt.codice AS tipoDocumento, count(doc) AS numeroDocumenti ORDER BY numeroDocumenti DESC",
      "time_total": 29.58877145999577,
      "time_generation": 1.2165814869804308,
      "time_db": 0.07595709094312042,
      "time_synthesis": 3.5783356269821525,
      "jaccard_index": 1.0,
      "query_similarity": 0.8847583643122676,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-68-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il fatturato totale associato ai documenti di tipo 'FVC'?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE toLower(trim(c.name)) = 'f.c. impianti srl' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN sum(dr.importo) AS totale",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'FVC'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN sum(dr.importo) AS fatturatoFVC",
      "time_total": 15.619874713011086,
      "time_generation": 1.8225558300036937,
      "time_db": 0.24065791990142316,
      "time_synthesis": 1.7631424189312384,
      "jaccard_index": 0.0,
      "query_similarity": 0.638095238095238,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "fatturatoFVC": 43854717.48000137
        }
      ],
      "mismatch_extra": [
        {
          "totale": 55394.31999999999
        }
      ]
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-69-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale cliente ha ricevuto il maggior numero di note di credito (codice 'NCC')?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType)\nWHERE dt.codice = 'NCC'\nRETURN c.name AS cliente, count(doc) AS numeroNoteCredito\nORDER BY numeroNoteCredito DESC\nLIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'NCC'}) RETURN c.name AS cliente, count(doc) AS numeroNoteCredito ORDER BY numeroNoteCredito DESC LIMIT 1",
      "time_total": 13.905310041969642,
      "time_generation": 1.5107844680314884,
      "time_db": 0.07012463908176869,
      "time_synthesis": 1.3489639529725537,
      "jaccard_index": 1.0,
      "query_similarity": 0.9583333333333334,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-70-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Calcola il valore medio di un documento per ciascun tipo (considerando solo il fatturato).",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType)\nMATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH dt, doc, sum(dr.importo) AS valoreDocumento\nRETURN dt.codice AS tipoDocumento, avg(valoreDocumento) AS valoreMedio\nORDER BY valoreMedio DESC",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH dt, doc, sum(dr.importo) AS valoreDocumento RETURN dt.codice AS tipoDocumento, avg(valoreDocumento) AS valoreMedio ORDER BY valoreMedio DESC",
      "time_total": 14.630135086015798,
      "time_generation": 3.2207919280044734,
      "time_db": 0.29126264702063054,
      "time_synthesis": 1.568787805037573,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-71-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi \u00e8 il cliente con il fatturato pi\u00f9 alto?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC LIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC LIMIT 1",
      "time_total": 13.71287377900444,
      "time_generation": 1.5842799689853564,
      "time_db": 0.2469264940591529,
      "time_synthesis": 1.537044066004455,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-72-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca 5 clienti situati in Umbria",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(f:Fornitore)-[:SI_TROVA_A]->(l_f:Luogo)\nWHERE toLower(trim(gf.ragioneSociale)) = 'umbria touring'\nWITH DISTINCT toLower(trim(l_f.regione)) AS supplierRegion\nMATCH (c:Cliente)-[:HAS_ADDRESS]->(l_c:Luogo)\nWHERE toLower(trim(l_c.regione)) = supplierRegion\nRETURN DISTINCT c.name AS cliente\nORDER BY cliente\nLIMIT 5",
      "expected_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo) WHERE toLower(trim(l.regione)) = 'umbria' RETURN DISTINCT c.name AS cliente ORDER BY cliente LIMIT 5",
      "time_total": 42.91400740202516,
      "time_generation": 16.81900817900896,
      "time_db": 0.1142102770972997,
      "time_synthesis": 1.6241874020779505,
      "jaccard_index": 1.0,
      "query_similarity": 0.4633663366336634,
      "specialist": "GENERAL_QUERY",
      "jaccard_success": true,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-73-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami i 5 prodotti pi\u00f9 popolari in termini di quantit\u00e0 venduta",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nRETURN a.descrizione AS prodotto, sum(dr.quantita) AS quantitaTotale\nORDER BY quantitaTotale DESC\nLIMIT 5",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN a.descrizione AS prodotto, sum(dr.quantita) AS quantitaTotale ORDER BY quantitaTotale DESC LIMIT 5",
      "time_total": 12.770837254007347,
      "time_generation": 1.246148478006944,
      "time_db": 0.3315942969638854,
      "time_synthesis": 1.710580313927494,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-74-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Dimmi il fatturato di ciascuna azienda.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN d.dittaId AS ditta, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN d.dittaId AS ditta, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC",
      "time_total": 13.78372629196383,
      "time_generation": 1.6421956040430814,
      "time_db": 0.3042368449969217,
      "time_synthesis": 2.8241262909723446,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-75-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quanto ho speso per acquistare il prodotto GAS FREON SOLSTICE N40 R448A?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' RETURN sum(dr.importo) AS costoTotaleAcquisto",
      "expected_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' RETURN sum(dr.importo) AS costoTotaleAcquisto",
      "time_total": 15.988264210987836,
      "time_generation": 2.7975937579758465,
      "time_db": 0.0754253389313817,
      "time_synthesis": 2.497800210956484,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-76-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quanto ho guadagnato vendendo il prodotto GAS FREON SOLSTICE N40 R448A?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN sum(dr.importo) AS totaleVenduto",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN sum(dr.importo) AS totaleVenduto",
      "time_total": 13.828082052059472,
      "time_generation": 1.7022383660078049,
      "time_db": 0.2643495639786124,
      "time_synthesis": 2.8113906449871138,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-77-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali aziende vendono prodotti della famiglia 'CENTRALI FRIGO'?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia)\nWHERE toLower(trim(fam.nome)) = 'centrali frigo'\nAND dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN DISTINCT d.dittaId AS ditta\nORDER BY ditta\nLIMIT 10",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia) WHERE toLower(trim(fam.nome)) = 'centrali frigo' RETURN DISTINCT d.dittaId AS ditta ORDER BY ditta",
      "time_total": 18.449420133023523,
      "time_generation": 3.2448043859330937,
      "time_db": 2.9846875430084765,
      "time_synthesis": 1.5724048729753122,
      "jaccard_index": 1.0,
      "query_similarity": 0.9047619047619048,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-78-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 l'importo medio per riga documento nelle fatture di vendita?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN avg(dr.importo) AS importoMedioRiga",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN avg(dr.importo) AS importoMedioRiga",
      "time_total": 10.52044330094941,
      "time_generation": 1.8847581980517134,
      "time_db": 0.1817206289852038,
      "time_synthesis": 1.5561218119692057,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-79-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Per ogni azienda, classifica il suo fatturato totale come 'Alto' se supera i 10 milioni, 'Medio' se \u00e8 tra 1 e 10 milioni, e 'Basso' altrimenti.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH d, sum(dr.importo) AS fatturatoTotale RETURN d.dittaId AS ditta, fatturatoTotale, CASE WHEN fatturatoTotale > 10000000 THEN 'Alto' WHEN fatturatoTotale > 1000000 THEN 'Medio' ELSE 'Basso' END AS categoriaFatturato",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH d, sum(dr.importo) AS fatturatoTotale RETURN d.dittaId AS ditta, fatturatoTotale, CASE WHEN fatturatoTotale > 10000000 THEN 'Alto' WHEN fatturatoTotale > 1000000 THEN 'Medio' ELSE 'Basso' END AS categoriaFatturato",
      "time_total": 16.568931900896132,
      "time_generation": 2.2111407549818978,
      "time_db": 0.3892199720721692,
      "time_synthesis": 2.72963478800375,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-80-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il primo e l'ultimo documento di vendita mai registrato per il cliente 'ACME SRL'?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento) WHERE toLower(trim(c.name)) = 'grazia srsl' RETURN min(doc.dataEmissione) AS primoDocumento, max(doc.dataEmissione) AS ultimoDocumento",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento) WHERE toLower(trim(c.name)) = 'acme srl' RETURN min(doc.dataEmissione) AS primoDocumento, max(doc.dataEmissione) AS ultimoDocumento",
      "time_total": 16.17654145497363,
      "time_generation": 1.7980772969312966,
      "time_db": 0.06140673893969506,
      "time_synthesis": 2.152938941027969,
      "jaccard_index": 0.0,
      "query_similarity": 0.9753424657534246,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "primoDocumento": null,
          "ultimoDocumento": null
        }
      ],
      "mismatch_extra": [
        {
          "primoDocumento": "2024-12-12",
          "ultimoDocumento": "2024-12-12"
        }
      ]
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-81-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 la media del fatturato mensile per il cliente 'ACME SRL' nel 2024?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE toLower(trim(c.name)) = 'grazia srsl'\n  AND dr.tipoValore = 'Fatturato'\n  AND dr.importo > 0\n  AND doc.dataEmissione.year = 2024\nWITH date(doc.dataEmissione).month AS mese, sum(dr.importo) AS fatturatoMensile\nRETURN avg(fatturatoMensile) AS media",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE toLower(trim(c.name)) = 'l\\'abbondanza srl' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year = 2024 WITH date(doc.dataEmissione).month AS mese, sum(dr.importo) AS fatturatoMensile RETURN avg(fatturatoMensile) AS mediaFatturatoMensile",
      "time_total": 18.077274070936255,
      "time_generation": 2.0634551940020174,
      "time_db": 0.10567788197658956,
      "time_synthesis": 1.5506792420055717,
      "jaccard_index": 0.0,
      "query_similarity": 0.9418604651162791,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "mediaFatturatoMensile": 170779.8825
        }
      ],
      "mismatch_extra": [
        {
          "media": 2125.9
        }
      ]
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-82-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Per i primi 3 clienti per fatturato, mostra il loro prodotto pi\u00f9 acquistato per valore.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH c, sum(dr.importo) AS fatturatoCliente\nORDER BY fatturatoCliente DESC\nLIMIT 3\nMATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr2:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE dr2.tipoValore = 'Fatturato' AND dr2.importo > 0\nWITH c, a, sum(dr2.importo) AS valoreProdotto\nORDER BY valoreProdotto DESC\nWITH c, head(collect({prodotto: a.descrizione, valore: valoreProdotto})) AS topProdotto\nRETURN c.name AS cliente, topProdotto.prodotto AS prodottoTop, topProdotto.valore AS valoreTop\nORDER BY cliente",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH c, sum(dr.importo) AS fatturatoCliente ORDER BY fatturatoCliente DESC LIMIT 3 MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr2:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE dr2.tipoValore = 'Fatturato' AND dr2.importo > 0 WITH c, a, sum(dr2.importo) AS valoreProdotto ORDER BY c.name, valoreProdotto DESC WITH c, head(collect({prodotto: a.descrizione, valore: valoreProdotto})) AS topProdotto RETURN c.name AS cliente, topProdotto.prodotto AS prodottoTop, topProdotto.valore AS valoreTop ORDER BY c.name",
      "time_total": 31.150929301977158,
      "time_generation": 6.663716743001714,
      "time_db": 0.6012698380509391,
      "time_synthesis": 2.488976527005434,
      "jaccard_index": 1.0,
      "query_similarity": 0.9857035364936042,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-83-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali clienti hanno effettuato ordini ma non hanno ancora ricevuto una fattura?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(d_order:Documento)-[:IS_TYPE]->(dt_order:DocType)\nWHERE dt_order.codice = 'ORDINE'\nWITH DISTINCT c\nWHERE NOT (c)-[:HA_RICEVUTO]->(:Documento)-[:IS_TYPE]->(:DocType {codice: 'FATTURA'})\nRETURN c.name AS cliente\nORDER BY cliente\nLIMIT 10",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento {tipoValore: 'Ordinato'}) WITH DISTINCT c MATCH (c) WHERE NOT (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento {tipoValore: 'Fatturato'}) RETURN c.name AS clienteSenzaFattura",
      "time_total": 18.448275704984553,
      "time_generation": 7.523113408009522,
      "time_db": 0.2183369710110128,
      "time_synthesis": 3.614818983944133,
      "jaccard_index": 0.0,
      "query_similarity": 0.3425414364640884,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "clienteSenzaFattura": "MACELLERIA SAN SECONDO"
        },
        {
          "clienteSenzaFattura": "HONG KONG UGREEN LIMITED"
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-84-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi \u00e8 il fornitore principale per ogni famiglia di prodotto, in base al valore acquistato?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (fam:Famiglia)<-[:INCLUSA_IN]-(:Sottofamiglia)<-[:APPARTIENE_A]-(:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)-[:RAGGRUPPATO_SOTTO]->(gf:GruppoFornitore)\nWITH fam, gf, sum(dr.importo) AS valoreAcquistato\nORDER BY fam.nome, valoreAcquistato DESC\nWITH fam, collect({fornitore: gf.ragioneSociale, valore: valoreAcquistato})[0] AS fornitoreTop\nRETURN fam.nome AS famiglia, fornitoreTop.fornitore AS fornitorePrincipale",
      "expected_cypher": "MATCH (fam:Famiglia)<-[:INCLUSA_IN]-(:Sottofamiglia)<-[:APPARTIENE_A]-(:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)-[:RAGGRUPPATO_SOTTO]->(gf:GruppoFornitore) WITH fam, gf, sum(dr.importo) AS valoreAcquistato ORDER BY fam.nome, valoreAcquistato DESC WITH fam, collect({fornitore: gf.ragioneSociale, valore: valoreAcquistato})[0] AS fornitoreTop RETURN fam.nome AS famiglia, fornitoreTop.fornitore AS fornitorePrincipale",
      "time_total": 17.22338846209459,
      "time_generation": 3.2895729519659653,
      "time_db": 0.4846365209668875,
      "time_synthesis": 2.1041376210050657,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-85-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il valore totale degli ordini in sospeso (ordinati ma non fatturati)?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Ordinato'\nWITH c, doc, sum(dr.importo) AS valoreOrdinato\nWHERE NOT (doc)<-[:CONTIENE_RIGA]-(:RigaDocumento {tipoValore:'Fatturato'})\nRETURN sum(valoreOrdinato) AS totaleOrdiniSospesi",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Ordinato' WITH c, doc, sum(dr.importo) AS valoreOrdinato WHERE NOT (doc)<-[:CONTIENE_RIGA]-(:RigaDocumento {tipoValore:'Fatturato'}) RETURN sum(valoreOrdinato) AS totaleOrdiniSospesi",
      "time_total": 26.900836220011115,
      "time_generation": 4.74711907398887,
      "time_db": 0.18325693905353546,
      "time_synthesis": 1.3603798190597445,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-86-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami i clienti che acquistano pi\u00f9 di 10 articoli unici diversi.",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWITH c.name AS cliente, count(DISTINCT a) AS conteggioArticoliUnici\nWHERE conteggioArticoliUnici > 10\nRETURN cliente\nORDER BY cliente\nLIMIT 10",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WITH c, count(DISTINCT a) AS numeroArticoliUnici WHERE numeroArticoliUnici > 10 RETURN c.name AS cliente, numeroArticoliUnici ORDER BY numeroArticoliUnici DESC",
      "time_total": 19.46918174799066,
      "time_generation": 4.326951698982157,
      "time_db": 0.08232561103068292,
      "time_synthesis": 1.6671892569866031,
      "jaccard_index": 0.0,
      "query_similarity": 0.7588785046728972,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "cliente": "FALUNI SRL",
          "numeroArticoliUnici": 40
        },
        {
          "cliente": "2 P SRL",
          "numeroArticoliUnici": 21
        },
        {
          "cliente": "SUPERSTORE SAN SISTO SRL",
          "numeroArticoliUnici": 52
        }
      ],
      "mismatch_extra": [
        {
          "cliente": "A C S 21 s.r.l."
        },
        {
          "cliente": "A.C.S. CARNI SRL"
        },
        {
          "cliente": "2 ESSE snc"
        }
      ]
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-87-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Per il prodotto pi\u00f9 venduto per quantit\u00e0, qual \u00e8 il suo costo medio di acquisto?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWITH a, sum(dr.quantita) AS quantitaTotale\nORDER BY quantitaTotale DESC\nLIMIT 1\nMATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_acq:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)\nRETURN a.descrizione AS prodotto, avg(CASE WHEN dr_acq.quantita = 0 OR dr_acq.quantita IS NULL THEN null ELSE dr_acq.importo / dr_acq.quantita END) AS costoMedioUnitario",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WITH a, sum(dr.quantita) AS quantitaTotale ORDER BY quantitaTotale DESC LIMIT 1 MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_acq:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) RETURN a.descrizione AS prodotto, avg(CASE WHEN dr_acq.quantita = 0 OR dr_acq.quantita IS NULL THEN null ELSE dr_acq.importo / dr_acq.quantita END) AS costoMedioUnitario",
      "time_total": 18.502785541000776,
      "time_generation": 4.469836103962734,
      "time_db": 0.6250575060257688,
      "time_synthesis": 1.5432777779642493,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-88-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca i fornitori che trattano solo prodotti di una singola famiglia.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia)\nWITH gf, collect(DISTINCT fam.nome) AS families\nWHERE size(families) = 1\nRETURN gf.ragioneSociale AS fornitore\nORDER BY fornitore\nLIMIT 10",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia) WITH gf, count(DISTINCT fam) AS numeroFamiglie WHERE numeroFamiglie = 1 RETURN gf.ragioneSociale AS fornitoreMonoFamiglia",
      "time_total": 14.577973553910851,
      "time_generation": 2.3452725729439408,
      "time_db": 0.3899250290123746,
      "time_synthesis": 2.355399930034764,
      "jaccard_index": 1.0,
      "query_similarity": 0.8051209103840683,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-89-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 la percentuale di fatturato generata dai clienti nella regione 'Umbria' sul totale?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH sum(dr.importo) AS totaleFatturato, sum(CASE WHEN toLower(trim(c.name)) = 'aiab umbria' THEN dr.importo ELSE 0 END) AS fatturatoCliente\nRETURN CASE WHEN totaleFatturato = 0 THEN 0.0 ELSE (fatturatoCliente * 100.0 / totaleFatturato) END AS percentualeFatturatoAIABUmbria",
      "expected_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo),(c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH sum(dr.importo) AS totaleFatturato,  sum(CASE WHEN toLower(trim(l.regione)) = 'umbria' THEN dr.importo ELSE 0 END) AS fatturatoUmbria RETURN CASE WHEN totaleFatturato = 0 THEN 0.0 ELSE (fatturatoUmbria * 100.0 / totaleFatturato) END AS percentualeUmbria",
      "time_total": 17.23688843101263,
      "time_generation": 2.1886452430626377,
      "time_db": 0.3222827330464497,
      "time_synthesis": 1.5248672539601102,
      "jaccard_index": 0.0,
      "query_similarity": 0.6323353293413174,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "percentualeUmbria": 58.464609552069845
        }
      ],
      "mismatch_extra": [
        {
          "percentualeFatturatoAIABUmbria": 0.0
        }
      ]
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-90-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Trova il cliente con il valore medio degli ordini pi\u00f9 alto.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH c, doc, sum(dr.importo) AS valoreOrdine\nRETURN c.name AS cliente, avg(valoreOrdine) AS valoreMedioOrdine\nORDER BY valoreMedioOrdine DESC\nLIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH c, doc, sum(dr.importo) AS valoreOrdine RETURN c.name AS cliente, avg(valoreOrdine) AS valoreMedioOrdine ORDER BY valoreMedioOrdine DESC LIMIT 1",
      "time_total": 16.01889427797869,
      "time_generation": 2.6635771750006825,
      "time_db": 0.3301700400188565,
      "time_synthesis": 3.290784107055515,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-91-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami i 3 mesi con il maggior numero di documenti di acquisto registrati.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(doc:Documento)\nRETURN doc.dataEmissione.year AS anno, doc.dataEmissione.month AS mese, count(doc) AS numeroDocumenti\nORDER BY numeroDocumenti DESC\nLIMIT 3",
      "expected_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(doc:Documento) RETURN doc.dataEmissione.year AS anno, doc.dataEmissione.month AS mese, count(doc) AS numeroDocumenti ORDER BY numeroDocumenti DESC LIMIT 3",
      "time_total": 12.409060567966662,
      "time_generation": 1.312678372953087,
      "time_db": 0.06253791798371822,
      "time_synthesis": 1.6733247730880976,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-92-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Ci sono prodotti venduti a un prezzo inferiore al loro costo medio di acquisto?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo)\nOPTIONAL MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_acq:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)\nWITH a, avg(CASE WHEN dr_acq.quantita = 0 OR dr_acq.quantita IS NULL THEN null ELSE dr_acq.importo / dr_acq.quantita END) AS costoMedio\nOPTIONAL MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_ven:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(:Cliente)\nWHERE dr_ven.tipoValore = 'Fatturato' AND dr_ven.importo > 0\nWITH a, costoMedio, avg(CASE WHEN dr_ven.quantita = 0 OR dr_ven.quantita IS NULL THEN null ELSE dr_ven.importo / dr_ven.quantita END) AS prezzoMedioVendita\nWHERE prezzoMedioVendita < costoMedio\nRETURN a.descrizione AS prodottoInPerdita",
      "expected_cypher": "MATCH (a:Articolo) OPTIONAL MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_acq:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) WITH a, avg(CASE WHEN dr_acq.quantita = 0 OR dr_acq.quantita IS NULL THEN null ELSE dr_acq.importo / dr_acq.quantita END) AS costoMedio OPTIONAL MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_ven:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(:Cliente) WHERE dr_ven.tipoValore = 'Fatturato' AND dr_ven.importo > 0 WITH a, costoMedio, avg(CASE WHEN dr_ven.quantita = 0 OR dr_ven.quantita IS NULL THEN null ELSE dr_ven.importo / dr_ven.quantita END) AS prezzoMedioVendita WHERE prezzoMedioVendita < costoMedio RETURN a.descrizione AS prodottoInPerdita",
      "time_total": 17.35286045796238,
      "time_generation": 2.6777420919388533,
      "time_db": 0.8947203459683806,
      "time_synthesis": 2.049375882023014,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-93-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale tipo di documento (codice) \u00e8 pi\u00f9 frequentemente associato al ciclo di acquisto?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType)\nRETURN dt.codice AS tipoDocumento, count(doc) AS frequenza\nORDER BY frequenza DESC\nLIMIT 1",
      "expected_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType) RETURN dt.codice AS tipoDocumento, count(doc) AS frequenza ORDER BY frequenza DESC LIMIT 1",
      "time_total": 11.982137623010203,
      "time_generation": 1.6149319370742887,
      "time_db": 0.07533626700751483,
      "time_synthesis": 1.6662228149361908,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-94-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca i fornitori situati in un luogo dove non abbiamo clienti.",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo)\nWITH collect(DISTINCT toLower(trim(l.localita))) AS customerLocations\nMATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:SI_TROVA_A]->(l_fornitore:Luogo)\nWHERE NOT toLower(trim(l_fornitore.localita)) IN customerLocations\nRETURN DISTINCT gf.ragioneSociale AS fornitore\nORDER BY fornitore\nLIMIT 10",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(f:Fornitore)-[:SI_TROVA_A]->(lf:Luogo) WHERE NOT EXISTS { MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo {localita: lf.localita}) } RETURN DISTINCT gf.ragioneSociale AS fornitore ORDER BY fornitore",
      "time_total": 22.438643158995546,
      "time_generation": 1.951545097050257,
      "time_db": 0.10319628589786589,
      "time_synthesis": 1.9443168599391356,
      "jaccard_index": 0.00998003992015968,
      "query_similarity": 0.5781512605042017,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "fornitore": "ALBERGO RIST.LA ROSETTA"
        },
        {
          "fornitore": "INTERARREDO SRL"
        },
        {
          "fornitore": "STRUGALA"
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-95-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quante note di credito clienti (NCC) abbiamo emesso in totale?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType)\nWHERE toLower(trim(dt.codice)) = 'ncc'\nRETURN count(DISTINCT doc) AS conteggio",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'NCC'}) RETURN count(doc) AS numeroNoteCredito",
      "time_total": 23.571858127019368,
      "time_generation": 1.5968028740026057,
      "time_db": 0.06334069091826677,
      "time_synthesis": 2.6371724900091067,
      "jaccard_index": 1.0,
      "query_similarity": 0.6456692913385826,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-96-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami tutti gli ordini fornitori (OF) per maggio 2024.",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (f:Fornitore)-[:HA_EMESSO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType)\nMATCH (f)-[:RAGGRUPPATO_SOTTO]->(gf:GruppoFornitore)\nWHERE dt.codice = 'OF'\n  AND doc.dataEmissione >= date('2024-05-01')\n  AND doc.dataEmissione <= date('2024-05-31')\nRETURN\n  doc.documentoId AS ordineFornitoreId,\n  doc.dataEmissione AS dataEmissione,\n  gf.ragioneSociale AS fornitore\nORDER BY\n  dataEmissione,\n  fornitore,\n  ordineFornitoreId\nLIMIT 10",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'OF'}) WHERE doc.dataEmissione.year = 2024 AND doc.dataEmissione.month = 5 RETURN doc.documentoId AS ordine",
      "time_total": 23.22018742596265,
      "time_generation": 5.542311327997595,
      "time_db": 0.18165697203949094,
      "time_synthesis": 3.744444058975205,
      "jaccard_index": 0.0,
      "query_similarity": 0.4181184668989547,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "ordine": "2-202400006355"
        },
        {
          "ordine": "2-202400007137"
        },
        {
          "ordine": "2-202400006812"
        }
      ],
      "mismatch_extra": [
        {
          "ordineFornitoreId": "2-202400006352",
          "dataEmissione": "2024-05-03",
          "fornitore": "MORELLI SPA"
        },
        {
          "ordineFornitoreId": "2-202400006354",
          "dataEmissione": "2024-05-03",
          "fornitore": "MORELLI SPA"
        },
        {
          "ordineFornitoreId": "2-202400006216",
          "dataEmissione": "2024-05-02",
          "fornitore": "MORELLI SPA"
        }
      ]
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-97-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il valore totale delle fatture fornitori (FFA) ricevute?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'FFA'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) RETURN sum(dr.importo) AS totaleFattureFornitore",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'FFA'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) RETURN sum(dr.importo) AS totaleFattureFornitore",
      "time_total": 15.339725446072407,
      "time_generation": 1.4315645740134642,
      "time_db": 0.07064800499938428,
      "time_synthesis": 1.6782004149863496,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-98-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca i clienti a cui abbiamo inviato una nota di consegna clienti (DDTV) a Roma.",
      "success": false,
      "error": "Query mancante",
      "generated_cypher": null,
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'DDTV'}) WHERE toLower(trim(doc.tipoOriginale)) CONTAINS 'roma' RETURN DISTINCT c.name AS cliente",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": "ENTITY_RESOLVER",
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-99-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il valore fatturato presente solo nelle fatture clienti (FVC)?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'FVC'})-[:IS_TYPE]-(doc)\nMATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN sum(dr.importo) AS totale",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'FVC'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' RETURN sum(dr.importo) AS totaleFatturatoInFVC",
      "time_total": 14.13404035300482,
      "time_generation": 1.5082227350212634,
      "time_db": 0.27563170494977385,
      "time_synthesis": 1.7652686910005286,
      "jaccard_index": 0.0,
      "query_similarity": 0.8768472906403941,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "totaleFatturatoInFVC": 43854717.48000137
        }
      ],
      "mismatch_extra": [
        {
          "totale": 0
        }
      ]
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-100-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami il totale ordinato attraverso gli ordini clienti (OC) per la ditta '1'.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'OC'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Ordinato' RETURN sum(dr.importo) AS totaleOrdinatoDitta1",
      "expected_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'OC'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Ordinato' RETURN sum(dr.importo) AS totaleOrdinatoDitta1",
      "time_total": 16.615666475961916,
      "time_generation": 1.9816474380204454,
      "time_db": 0.12838164193090051,
      "time_synthesis": 2.6425852079410106,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-101-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il valore medio delle righe fatturate nelle note di consegna clienti (DDTV)?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'DDTV'})-[:HAS_DOCUMENT]->(doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Bollato'\nRETURN avg(dr.importo) AS media",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'DDTV'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Bollato' RETURN avg(dr.importo) AS valoreMedioBollato",
      "time_total": 15.265967386076227,
      "time_generation": 2.3038146469043568,
      "time_db": 0.09082355501595885,
      "time_synthesis": 1.379305595997721,
      "jaccard_index": 0.0,
      "query_similarity": 0.9042553191489362,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "valoreMedioBollato": 287.930263878516
        }
      ],
      "mismatch_extra": [
        {
          "media": null
        }
      ]
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-102-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi \u00e8 il cliente con il valore fatturato pi\u00f9 alto considerando solo le fatture immediate (FVC)?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType)\nWHERE dt.codice = 'FVC'\nMATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN c.name AS cliente, sum(dr.importo) AS totale\nORDER BY totale DESC\nLIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'FVC'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS totale ORDER BY totale DESC LIMIT 1",
      "time_total": 12.91239416692406,
      "time_generation": 1.4765327470377088,
      "time_db": 0.3718651969684288,
      "time_synthesis": 1.930400897981599,
      "jaccard_index": 1.0,
      "query_similarity": 0.9458483754512635,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-103-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Per il cliente 'ACME SRL', confronta il totale ordinato e il totale fatturato.",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE toLower(trim(c.name)) = 'grazia srsl'\nRETURN c.name AS cliente,\n       sum(CASE WHEN dr.tipoValore = 'Ordinato' THEN dr.importo ELSE 0 END) AS totaleOrdinato,\n       sum(CASE WHEN dr.tipoValore = 'Fatturato' THEN dr.importo ELSE 0 END) AS totaleFatturato",
      "expected_cypher": "MATCH (c:Cliente) WHERE toLower(trim(c.name)) = 'acme srl' OPTIONAL MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr_ord:RigaDocumento {tipoValore: 'Ordinato'}) WITH c, sum(dr_ord.importo) AS totaleOrdinato OPTIONAL MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr_fat:RigaDocumento {tipoValore: 'Fatturato'}) WHERE dr_fat.importo > 0 RETURN totaleOrdinato, sum(dr_fat.importo) AS totaleFatturato",
      "time_total": 14.243697386002168,
      "time_generation": 1.9411957670236006,
      "time_db": 0.07463904505129904,
      "time_synthesis": 1.55481066997163,
      "jaccard_index": 0.0,
      "query_similarity": 0.31466666666666665,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [],
      "mismatch_extra": [
        {
          "cliente": "GRAZIA SRSL",
          "totaleOrdinato": 0,
          "totaleFatturato": 2125.9
        }
      ]
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-104-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca i documenti d'ordine clienti (OC) che non sono ancora stati completamente fatturati.",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (oc_doc:Documento)-[:IS_TYPE]->(dt_oc:DocType)\nWHERE dt_oc.codice = 'OC'\nMATCH (oc_doc)-[:CONTIENE_RIGA]->(oc_dr:RigaDocumento)\nWHERE oc_dr.tipoValore = 'Ordinato'\nWITH oc_doc, SUM(oc_dr.importo) AS total_ordered_amount\n\nOPTIONAL MATCH (ft_doc:Documento)-[:IS_TYPE]->(dt_ft:DocType)\nWHERE dt_ft.codice = 'FT' AND ft_doc.tipoOriginale = oc_doc.documentoId\nOPTIONAL MATCH (ft_doc)-[:CONTIENE_RIGA]->(ft_dr:RigaDocumento)\nWHERE ft_dr.tipoValore = 'Fatturato'\nWITH oc_doc, total_ordered_amount, SUM(COALESCE(ft_dr.importo, 0)) AS total_invoiced_amount\n\nWHERE total_ordered_amount > total_invoiced_amount\nRETURN oc_doc.documentoId AS documentoOrdineCliente\nORDER BY documentoOrdineCliente\nLIMIT 10",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'OC'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento {tipoValore: 'Ordinato'}) WITH doc, sum(dr.importo) AS valoreOrdinato MATCH (doc)-[:CONTIENE_RIGA]->(dr_fat:RigaDocumento {tipoValore: 'Fatturato'}) WITH doc, valoreOrdinato, sum(dr_fat.importo) AS valoreFatturato WHERE valoreOrdinato > valoreFatturato RETURN doc.documentoId AS ordineNonSaldato",
      "time_total": 62.656245902064256,
      "time_generation": 13.097175062051974,
      "time_db": 0.24589051795192063,
      "time_synthesis": 1.902157244971022,
      "jaccard_index": 0.0,
      "query_similarity": 0.23796548592188918,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [],
      "mismatch_extra": [
        {
          "documentoOrdineCliente": "2-202100000991"
        },
        {
          "documentoOrdineCliente": "2-202100001498"
        },
        {
          "documentoOrdineCliente": "2-202100000892"
        }
      ]
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-105-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale tipo di documento (nome) ha il valore medio pi\u00f9 alto per riga (considerando solo i valori fatturati)?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN dt.nome AS nomeTipoDocumento, avg(dr.importo) AS valoreMedioRiga ORDER BY valoreMedioRiga DESC LIMIT 1",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN dt.nome AS nomeTipoDocumento, avg(dr.importo) AS valoreMedioRiga ORDER BY valoreMedioRiga DESC LIMIT 1",
      "time_total": 19.261903669917956,
      "time_generation": 1.5676650329260156,
      "time_db": 0.296050142031163,
      "time_synthesis": 2.6176564290653914,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-gemini-2.5-flash",
      "test_id": "TEST-106-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami il totale fatturato e il totale ordinato per ciascuna ditta.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nRETURN d.dittaId AS ditta, sum(CASE dr.tipoValore WHEN 'Fatturato' THEN dr.importo ELSE 0 END) AS totaleFatturato, sum(CASE dr.tipoValore WHEN 'Ordinato' THEN dr.importo ELSE 0 END) AS totaleOrdinato\nORDER BY ditta ASC",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) RETURN d.dittaId AS ditta, sum(CASE dr.tipoValore WHEN 'Fatturato' THEN dr.importo ELSE 0 END) AS totaleFatturato, sum(CASE dr.tipoValore WHEN 'Ordinato' THEN dr.importo ELSE 0 END) AS totaleOrdinato ORDER BY ditta ASC",
      "time_total": 24.375171142048202,
      "time_generation": 2.9565879099536687,
      "time_db": 0.2971723140217364,
      "time_synthesis": 3.75130242400337,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    }
  ]
}