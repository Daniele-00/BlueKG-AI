{
  "config": "specialist-llama3",
  "approach": "specialist",
  "config_name": "llama3",
  "timestamp": "20251113_171816",
  "examples_top_k": null,
  "summary": {
    "total": 106,
    "success_strict": 66,
    "success_similarity": 64,
    "success_jaccard": 65,
    "failures": 40,
    "accuracy": 62.264150943396224,
    "accuracy_strict": 62.264150943396224,
    "accuracy_similarity": 60.37735849056604,
    "accuracy_jaccard": 61.32075471698113,
    "min_query_similarity": 0.8,
    "min_jaccard": 0.8,
    "avg_time": 58.19928100603229,
    "avg_jaccard": 0.704682363755898,
    "avg_query_similarity": 0.8111812504745066
  },
  "results": [
    {
      "config": "specialist-llama3",
      "test_id": "TEST-01-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il fatturato totale del cliente BARONE DI FERRANTE EZIO?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente {name: 'BARONE DI FERRANTE EZIO'})-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN sum(dr.importo) AS totaleVenduto",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE toLower(trim(c.name)) = 'barone di ferrante ezio' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN sum(dr.importo) AS fatturatoTotale",
      "time_total": 64.46726760803722,
      "time_generation": 48.48785520205274,
      "time_db": 0.01364554394967854,
      "time_synthesis": 1.4454378029331565,
      "jaccard_index": 1.0,
      "query_similarity": 0.48868778280542985,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-02-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi \u00e8 il cliente con il maggior fatturato?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) \nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 \nRETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale \nORDER BY fatturatoTotale DESC LIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC LIMIT 1",
      "time_total": 54.09703504596837,
      "time_generation": 43.551840464933775,
      "time_db": 0.5019316209945828,
      "time_synthesis": 1.6694777470547706,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-03-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca i 5 clienti che hanno fatturato di pi\u00f9 che si trovano a Perugia",
      "success": false,
      "error": "Query mancante",
      "generated_cypher": null,
      "expected_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo) WHERE toLower(trim(l.localita)) = 'perugia' MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC LIMIT 5",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": "ENTITY_RESOLVER",
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-04-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami i 5 prodotti pi\u00f9 popolari in termini di quantit\u00e0 venduta",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nRETURN a.descrizione AS prodotto, sum(dr.quantita) AS quantitaTotale\nORDER BY quantitaTotale DESC\nLIMIT 5",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN a.descrizione AS prodotto, sum(dr.quantita) AS quantitaTotale ORDER BY quantitaTotale DESC LIMIT 5",
      "time_total": 49.54639567201957,
      "time_generation": 37.784449373953976,
      "time_db": 0.6521555639337748,
      "time_synthesis": 2.085891462978907,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-05-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami i 5 prodotti meno popolari in termini di quantit\u00e0 venduta",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nRETURN a.descrizione AS prodotto, sum(dr.quantita) AS quantitaTotale\nORDER BY quantitaTotale ASC\nLIMIT 5",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN a.descrizione AS prodotto, sum(dr.quantita) AS quantitaTotale ORDER BY quantitaTotale ASC LIMIT 5",
      "time_total": 53.99055938294623,
      "time_generation": 40.636646034079604,
      "time_db": 0.7341203589458019,
      "time_synthesis": 3.699810174992308,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-06-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Dimmi il fatturato di ogni ditta.",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)\nWHERE doc.tipoValore = 'Fatturato'\nWITH c, sum(doc.importo) AS totale\nRETURN c.name AS cliente, totale AS revenue ORDER BY revenue DESC LIMIT 20",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN d.dittaId AS ditta, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC",
      "time_total": 42.149153243983164,
      "time_generation": 32.8079373689834,
      "time_db": 0.3258880920475349,
      "time_synthesis": 1.0407996700378135,
      "jaccard_index": 0.0,
      "query_similarity": 0.5580357142857143,
      "specialist": "GENERAL_QUERY",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "ditta": "4",
          "fatturatoTotale": 1268387.26
        },
        {
          "ditta": "2",
          "fatturatoTotale": 37155291.67000106
        },
        {
          "ditta": "1",
          "fatturatoTotale": 3871373.63
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-07-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Il fatturato di ogni ditta, nel loro anno migliore",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH d, doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoAnnuale\nORDER BY d.dittaId, fatturatoAnnuale DESC\nWITH d, collect({anno: anno, fatturato: fatturatoAnnuale}) AS fatturatiOrdinati\nRETURN d.dittaId AS ditta, fatturatiOrdinati[0].anno AS annoTop, fatturatiOrdinati[0].fatturato AS fatturatoMassimo",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH d, doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoAnnuale ORDER BY d.dittaId, fatturatoAnnuale DESC WITH d, collect({anno: anno, fatturato: fatturatoAnnuale}) AS fatturatiOrdinati RETURN d.dittaId AS ditta, fatturatiOrdinati[0].anno AS annoTop, fatturatiOrdinati[0].fatturato AS fatturatoMassimo",
      "time_total": 84.27447259193286,
      "time_generation": 72.61570982099511,
      "time_db": 0.5405964979436249,
      "time_synthesis": 2.3173825970152393,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-08-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Il fatturato di ogni ditta, nel loro anno peggiore",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH d, doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoAnnuale\nORDER BY d.dittaId, fatturatoAnnuale ASC\nWITH d, collect({anno: anno, fatturato: fatturatoAnnuale}) AS fatturatiOrdinati\nRETURN d.dittaId AS ditta, fatturatiOrdinati[0].anno AS annoPeggio, fatturatiOrdinati[0].fatturato AS fatturatoPeggio",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH d, doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoAnnuale ORDER BY d.dittaId, fatturatoAnnuale ASC WITH d, collect({anno: anno, fatturato: fatturatoAnnuale}) AS fatturatiOrdinati RETURN d.dittaId AS ditta, fatturatiOrdinati[0].anno AS annoTop, fatturatiOrdinati[0].fatturato AS fatturatoMassimo",
      "time_total": 93.01625032001175,
      "time_generation": 79.88474359200336,
      "time_db": 0.8981201449641958,
      "time_synthesis": 2.8288731740321964,
      "jaccard_index": 1.0,
      "query_similarity": 0.9770354906054279,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-09-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 la famiglia di prodotti pi\u00f9 acquistata?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)-[:APPARTIENE_A]->(sf:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia) \nRETURN fam.nome AS famiglia, sum(dr.quantita) AS quantitaTotale \nORDER BY quantitaTotale DESC \nLIMIT 1",
      "expected_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)-[:APPARTIENE_A]->(sf:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia) RETURN fam.nome AS famiglia, sum(dr.quantita) AS quantitaTotale ORDER BY quantitaTotale DESC LIMIT 1",
      "time_total": 55.06127603305504,
      "time_generation": 44.612259526969865,
      "time_db": 0.5361207920359448,
      "time_synthesis": 1.670731991995126,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-10-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 la famiglia di prodotti meno acquistata?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)-[:APPARTIENE_A]->(sf:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia)\nRETURN fam.nome AS famiglia, sum(dr.quantita) AS quantitaTotale\nORDER BY quantitaTotale ASC\nLIMIT 1",
      "expected_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)-[:APPARTIENE_A]->(sf:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia) RETURN fam.nome AS famiglia, sum(dr.quantita) AS quantitaTotale ORDER BY quantitaTotale ASC LIMIT 1",
      "time_total": 57.52077283500694,
      "time_generation": 44.9137080530636,
      "time_db": 0.40139673999510705,
      "time_synthesis": 2.3127396350027993,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-11-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il prodotto pi\u00f9 venduto in generale (per valore)?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN a.descrizione AS prodotto, sum(dr.importo) AS valoreVenduto\nORDER BY valoreVenduto DESC\nLIMIT 1",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN a.descrizione AS prodotto, sum(dr.importo) AS valoreVenduto ORDER BY valoreVenduto DESC LIMIT 1",
      "time_total": 74.97089306102134,
      "time_generation": 63.26443186099641,
      "time_db": 0.4825475040124729,
      "time_synthesis": 2.299964742967859,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-12-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il prodotto meno venduto in generale (per valore)?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) \nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 \nRETURN a.descrizione AS prodotto, sum(dr.importo) AS valoreVenduto \nORDER BY valoreVenduto ASC LIMIT 1",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN a.descrizione AS prodotto, sum(dr.importo) AS valoreVenduto ORDER BY valoreVenduto ASC LIMIT 1",
      "time_total": 73.62460502295289,
      "time_generation": 61.26483779493719,
      "time_db": 0.5053148630540818,
      "time_synthesis": 3.033672127989121,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-13-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "A quanto ho acquistato il prodotto GAS FREON SOLSTICE N40 R448A?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) \nWHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' \nRETURN sum(dr.importo) AS costoTotaleAcquisto",
      "expected_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' RETURN sum(dr.importo) AS costoTotaleAcquisto",
      "time_total": 43.45701134810224,
      "time_generation": 31.217119471984915,
      "time_db": 0.2627832479774952,
      "time_synthesis": 1.6039348150370643,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-14-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "A quanto l'ho venduto il prodotto GAS FREON SOLSTICE N40 R448A?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN sum(dr.importo) AS totaleVenduto",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN sum(dr.importo) AS totaleVenduto",
      "time_total": 71.40187912492547,
      "time_generation": 57.902795342961326,
      "time_db": 0.7198894550092518,
      "time_synthesis": 2.5911455990280956,
      "jaccard_index": 1.0,
      "query_similarity": 0.9981916817359855,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-15-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Situazione attuale della ditta '2'",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (d:Ditta {dittaId: '2'})<-[:APPARTIENE_A]-(c:Cliente)\nRETURN c.name AS cliente, count(DISTINCT c) AS numeroClientiUnici\nORDER BY numeroClientiUnici DESC\nLIMIT 10",
      "expected_cypher": "MATCH (d:Ditta {dittaId: '2'})<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year IN [date().year, date().year - 1] RETURN doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoAnnuale ORDER BY anno DESC",
      "time_total": 65.4398544949945,
      "time_generation": 48.98440485401079,
      "time_db": 0.13795026706065983,
      "time_synthesis": 7.501260091084987,
      "jaccard_index": 0.0,
      "query_similarity": 0.42231075697211157,
      "specialist": "DITTE_QUERY",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "anno": 2025,
          "fatturatoAnnuale": 1365461.8500000003
        },
        {
          "anno": 2024,
          "fatturatoAnnuale": 10316724.920000026
        }
      ],
      "mismatch_extra": [
        {
          "cliente": "MEMORYKING GMBH & CO. KG",
          "numeroClientiUnici": 2
        },
        {
          "cliente": "AUTDORS SPORTS LIMITED",
          "numeroClientiUnici": 3
        },
        {
          "cliente": "SHENZHENSHIHUISHUNWANGLUOKEJIYOUXIANGONGSI",
          "numeroClientiUnici": 2
        }
      ]
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-16-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali ditte vendono prodotti della famiglia 'CENTRALI FRIGO'?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia) WHERE toLower(trim(fam.nome)) = 'centrali frigo' RETURN DISTINCT d.dittaId AS ditta ORDER BY ditta",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia) WHERE toLower(trim(fam.nome)) = 'centrali frigo' RETURN DISTINCT d.dittaId AS ditta ORDER BY ditta",
      "time_total": 49.78449815500062,
      "time_generation": 38.0636519480031,
      "time_db": 0.6772775528952479,
      "time_synthesis": 1.79410720593296,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "DITTE_QUERY",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-17-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quanti clienti unici ha la ditta '1'?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(c:Cliente)\nRETURN count(DISTINCT c) AS numeroClientiUnici",
      "expected_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(c:Cliente) RETURN count(DISTINCT c) AS numeroClientiUnici",
      "time_total": 53.57039142400026,
      "time_generation": 41.347608038107865,
      "time_db": 0.0219664319884032,
      "time_synthesis": 3.4821688079973683,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "DITTE_QUERY",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-18-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale fornitore ci ha inviato pi\u00f9 documenti?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (f:Fornitore)-[:HA_EMESSO]->(doc:Documento)\nRETURN f.ragioneSociale AS fornitore, count(doc) AS numeroDocumenti\nORDER BY numeroDocumenti DESC\nLIMIT 1",
      "expected_cypher": "MATCH (f:Fornitore)-[:HA_EMESSO]->(doc:Documento) RETURN f.ragioneSociale AS fornitore, count(doc) AS numeroDocumenti ORDER BY numeroDocumenti DESC LIMIT 1",
      "time_total": 29.957664696965367,
      "time_generation": 19.960944833001122,
      "time_db": 0.03986600192729384,
      "time_synthesis": 1.6938914759084582,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-19-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca 5 clienti che non hanno mai acquistato il prodotto 'GAS FREON SOLSTICE N40 R448A'",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' \nWITH a MATCH (c:Cliente) WHERE NOT (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a) \nRETURN c.name AS cliente ORDER BY cliente LIMIT 5",
      "expected_cypher": "MATCH (a:Articolo) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' WITH a MATCH (c:Cliente) WHERE NOT (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a) RETURN c.name AS cliente ORDER BY cliente LIMIT 5",
      "time_total": 44.11189697997179,
      "time_generation": 31.09363028802909,
      "time_db": 0.3959747380577028,
      "time_synthesis": 1.674164967960678,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "GENERAL_QUERY",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-20-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 la localit\u00e0 con il maggior numero di fornitori?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (l:Luogo)-[:SI_TROVA_A]->(f:Fornitore)\nWITH l, count(f) AS numeroFornitori\nORDER BY numeroFornitori DESC\nRETURN l.localita AS localita, numeroFornitori AS numeroFornitori\nLIMIT 1;",
      "expected_cypher": "MATCH (f:Fornitore)-[:SI_TROVA_A]->(l:Luogo) WHERE l.localita IS NOT NULL RETURN l.localita AS localita, count(DISTINCT f) AS numeroFornitori ORDER BY numeroFornitori DESC LIMIT 1",
      "time_total": 54.39130997203756,
      "time_generation": 44.611516922013834,
      "time_db": 0.10982213099487126,
      "time_synthesis": 1.3761125330347568,
      "jaccard_index": 0.0,
      "query_similarity": 0.5714285714285714,
      "specialist": "DITTE_QUERY",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "localita": "PERUGIA",
          "numeroFornitori": 835
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-21-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 l'importo medio per riga documento nelle fatture di vendita?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN avg(dr.importo) AS importoMedioRiga",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN avg(dr.importo) AS importoMedioRiga",
      "time_total": 74.07034873589873,
      "time_generation": 54.867352174944244,
      "time_db": 0.27921420708298683,
      "time_synthesis": 10.234545317012817,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-22-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami 10 documenti di tipo 'FVC' emessi a Gennaio 2025 al cliente 'L'ABBONDANZA SRL'",
      "success": false,
      "error": "Query mancante",
      "generated_cypher": null,
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType) WHERE toLower(trim(c.name)) = 'l\\'abbondanza srl' AND dt.codice = 'FVC' AND doc.dataEmissione.year = 2025 AND doc.dataEmissione.month = 1 RETURN doc.documentoId AS documento LIMIT 10",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": "ENTITY_RESOLVER",
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-23-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il margine di profitto del prodotto 'GAS FREON SOLSTICE N40 R448A'?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr1:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) \nWHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' AND dr1.tipoValore = 'Fatturato' AND dr1.importo > 0\nWITH a, sum(dr1.importo) AS fatturato\nMATCH (f:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr2:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a)\nWITH a, fatturato, sum(dr2.importo) AS costo\nRETURN a.descrizione AS prodotto, fatturato, costo, (fatturato - costo) AS margine",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr1:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' AND dr1.tipoValore = 'Fatturato' AND dr1.importo > 0 WITH a, sum(dr1.importo) AS fatturato MATCH (f:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr2:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a) WITH a, fatturato, sum(dr2.importo) AS costo RETURN a.descrizione AS prodotto, fatturato, costo, (fatturato - costo) AS margine",
      "time_total": 88.21804446796887,
      "time_generation": 74.32495813001879,
      "time_db": 0.6746306520653889,
      "time_synthesis": 2.3337098829215392,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-24-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali fornitori ci forniscono prodotti venduti al cliente 'BARONE DI FERRANTE EZIO'?",
      "success": false,
      "error": "'str' object has no attribute 'get'",
      "generated_cypher": null,
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(c.name)) = 'barone di ferrante ezio' WITH collect(DISTINCT a) AS articoliVenduti MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a) WHERE a IN articoliVenduti RETURN DISTINCT gf.ragioneSociale AS fornitore ORDER BY fornitore",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": null,
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-25-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca 5 prodotti che abbiamo venduto ma mai acquistato",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE NOT EXISTS { MATCH (a)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) }\nRETURN DISTINCT a.descrizione AS prodotto\nORDER BY prodotto\nLIMIT 5",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE NOT EXISTS { MATCH (a)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) } RETURN DISTINCT a.descrizione AS prodotto ORDER BY prodotto LIMIT 5",
      "time_total": 64.59787975007202,
      "time_generation": 51.44611256499775,
      "time_db": 0.46923946600873023,
      "time_synthesis": 2.2767604200635105,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-26-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca 5 prodotti che abbiamo acquistato ma mai venduto",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (f:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE NOT (a)-[:HA_RICEVUTO]->(:Documento)\nRETURN a.descrizione AS articolo\nORDER BY articolo\nLIMIT 5",
      "expected_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)\nWHERE NOT (a)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento {tipoValore: 'Fatturato'})\nRETURN DISTINCT a.descrizione AS prodottoMaiVenduto\nORDER BY prodottoMaiVenduto\nLIMIT 5",
      "time_total": 63.412036876077764,
      "time_generation": 49.019644326064736,
      "time_db": 0.3194936739746481,
      "time_synthesis": 5.018367246026173,
      "jaccard_index": 0.6,
      "query_similarity": 0.2948207171314741,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "prodottoMaiVenduto": "AEROEVAPORATORE HDI 406 E 3"
        },
        {
          "prodottoMaiVenduto": "ADBLUE CISTERNA DA 1000LT"
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-27-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il fatturato della sottofamiglia 'COMPRESSORI SEMIERMETICI'?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE toLower(trim(a.descrizione)) = 'compressori dorin' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN sum(dr.importo) AS fatturatoSottofamiglia",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(:Articolo)-[:APPARTIENE_A]->(sf:Sottofamiglia) WHERE toLower(trim(sf.nome)) = 'compressori semiermetici' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN sum(dr.importo) AS fatturatoSottofamiglia",
      "time_total": 62.361902441014536,
      "time_generation": 45.779654457001016,
      "time_db": 0.7151629240252078,
      "time_synthesis": 2.1779146080370992,
      "jaccard_index": 1.0,
      "query_similarity": 0.4709897610921502,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-28-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca le sottofamiglie della famiglia 'CENTRALI FRIGO'",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (f:Famiglia)<-[:INCLUSA_IN]-(sf:Sottofamiglia) WHERE toLower(trim(f.nome)) = 'centrali frigo' RETURN DISTINCT sf.nome AS sottofamiglia ORDER BY sottofamiglia",
      "expected_cypher": "MATCH (f:Famiglia)<-[:INCLUSA_IN]-(sf:Sottofamiglia) WHERE toLower(trim(f.nome)) = 'centrali frigo' RETURN DISTINCT sf.nome AS sottofamiglia ORDER BY sottofamiglia",
      "time_total": 33.543892808957025,
      "time_generation": 22.755844783969223,
      "time_db": 0.011331429006531835,
      "time_synthesis": 1.6694617080502212,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "GENERAL_QUERY",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-29-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il fatturato del primo trimestre 2024?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year = 2024 AND doc.dataEmissione.month >= 1 AND doc.dataEmissione.month <= 3\nRETURN sum(dr.importo) AS fatturatoQ1",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year = 2024 AND doc.dataEmissione.month >= 1 AND doc.dataEmissione.month <= 3 RETURN sum(dr.importo) AS fatturatoTrimestre",
      "time_total": 64.4815193839604,
      "time_generation": 50.56694902700838,
      "time_db": 0.27469543390907347,
      "time_synthesis": 1.8155264230445027,
      "jaccard_index": 1.0,
      "query_similarity": 0.9803921568627451,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-30-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il fatturato tra Gennaio 2024 e Marzo 2024?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nAND doc.dataEmissione >= date('2024-01-01') AND doc.dataEmissione <= date('2024-03-31')\nRETURN sum(dr.importo) AS fatturatoPeriodo",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione >= date('2024-01-01') AND doc.dataEmissione <= date('2024-03-31') RETURN sum(dr.importo) AS fatturatoPeriodo",
      "time_total": 47.722164929960854,
      "time_generation": 33.50492542702705,
      "time_db": 0.07251214503776282,
      "time_synthesis": 2.4383040480315685,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-31-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca i clienti con fatturato superiore a 50000 euro",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) \nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 50000 \nRETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale \nORDER BY fatturatoTotale DESC\nLIMIT 20",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH c, sum(dr.importo) AS fatturatoTotale WHERE fatturatoTotale > 50000 RETURN c.name AS cliente, fatturatoTotale ORDER BY fatturatoTotale DESC",
      "time_total": 57.33249702700414,
      "time_generation": 45.09498672001064,
      "time_db": 0.24311030202079564,
      "time_synthesis": 2.90995779808145,
      "jaccard_index": 0.008695652173913044,
      "query_similarity": 0.7715930902111324,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "cliente": "NEW BO.PAR.SRL",
          "fatturatoTotale": 80000.0
        },
        {
          "cliente": "L'ABBONDANZA SRL",
          "fatturatoTotale": 60800.0
        },
        {
          "cliente": "MAXEDI SRL",
          "fatturatoTotale": 59305.84999999999
        }
      ],
      "mismatch_extra": [
        {
          "cliente": "PAC 2000 A Societ\u00e0 Cooperativa",
          "fatturatoTotale": 591500.0
        },
        {
          "cliente": "IPEM 2011 SRL",
          "fatturatoTotale": 250000.0
        },
        {
          "cliente": "BANCA MONTE DEI PASCHI DI SIENA SPA",
          "fatturatoTotale": 330000.0
        }
      ]
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-32-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali sono i 3 prodotti pi\u00f9 venduti al cliente 'BARONE DI FERRANTE EZIO'?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) \nWHERE toLower(trim(c.name)) = 'barone di ferrante ezio' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 \nRETURN a.descrizione AS prodotto, sum(dr.importo) AS totaleVenduto \nORDER BY totaleVenduto DESC \nLIMIT 3",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(c.name)) = 'barone di ferrante ezio' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN a.descrizione AS prodotto, sum(dr.importo) AS totaleVenduto ORDER BY totaleVenduto DESC LIMIT 3",
      "time_total": 52.062361409072764,
      "time_generation": 38.20689902792219,
      "time_db": 0.4934476859634742,
      "time_synthesis": 2.0643255139002576,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-33-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali sono i 3 prodotti meno venduti al cliente 'BARONE DI FERRANTE EZIO'?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) \nWHERE toLower(trim(c.name)) = 'barone di ferrante ezio' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN a.descrizione AS prodotto, sum(dr.quantita) AS quantitaTotale\nORDER BY quantitaTotale ASC\nLIMIT 3",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(c.name)) = 'barone di ferrante ezio' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN a.descrizione AS prodotto, sum(dr.importo) AS totaleVenduto ORDER BY totaleVenduto ASC LIMIT 3",
      "time_total": 74.58736768097151,
      "time_generation": 61.15965250006411,
      "time_db": 0.6716929649701342,
      "time_synthesis": 2.276017475989647,
      "jaccard_index": 0.0,
      "query_similarity": 0.8949771689497716,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "prodotto": "Articolo placeholder: ID_NON_DISPONIBILE",
          "totaleVenduto": 1557.38
        }
      ],
      "mismatch_extra": [
        {
          "prodotto": "Articolo placeholder: ID_NON_DISPONIBILE",
          "quantitaTotale": 1.0
        }
      ]
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-34-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quanti fornitori appartengono a ciascun gruppo di fornitori?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (f:Fornitore)-[:RAGGRUPPATO_SOTTO]->(gf:GruppoFornitore)\nWITH gf, COUNT(DISTINCT f) AS numSuppliers\nRETURN gf.ragioneSociale AS supplierGroup, numSuppliers AS count\nORDER BY numSuppliers DESC;",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(f:Fornitore) RETURN gf.ragioneSociale AS gruppo, count(f) AS numeroFornitori ORDER BY numeroFornitori DESC",
      "time_total": 49.617580453981645,
      "time_generation": 38.030483931070194,
      "time_db": 0.9360860479064286,
      "time_synthesis": 2.268892860971391,
      "jaccard_index": 0.0,
      "query_similarity": 0.6440677966101694,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-35-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 l'importo minimo registrato in una singola riga di fattura di vendita?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN min(dr.importo) AS importoMinimo",
      "expected_cypher": "MATCH (dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN min(dr.importo) AS importoMinimo",
      "time_total": 48.04630481800996,
      "time_generation": 36.671518546994776,
      "time_db": 0.11379984696395695,
      "time_synthesis": 1.4268668229924515,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-36-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 l'importo massimo registrato in una singola riga di fattura di vendita?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN max(dr.importo) AS importoMassimo",
      "expected_cypher": "MATCH (dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN max(dr.importo) AS importoMassimo",
      "time_total": 38.253110320074484,
      "time_generation": 27.516139529063366,
      "time_db": 0.1107243460137397,
      "time_synthesis": 1.3707005759933963,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-37-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 la quantit\u00e0 media di articoli per riga nei documenti di acquisto?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nRETURN avg(dr.quantita) AS quantitaMediaAcquisto",
      "expected_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) RETURN avg(dr.quantita) AS quantitaMediaAcquisto",
      "time_total": 54.95148780499585,
      "time_generation": 43.57940187002532,
      "time_db": 0.11692969594150782,
      "time_synthesis": 1.850367414066568,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-38-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quanti articoli unici sono presenti nel catalogo?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo) RETURN count(DISTINCT a) AS totaleArticoli",
      "expected_cypher": "MATCH (a:Articolo) RETURN count(DISTINCT a) AS totaleArticoli",
      "time_total": 30.63970620301552,
      "time_generation": 21.329556707991287,
      "time_db": 0.013593971962109208,
      "time_synthesis": 1.5292335459962487,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "GENERAL_QUERY",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-39-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca i clienti dell'azienda '1' situati nella provincia di 'PG'",
      "success": false,
      "error": "Query mancante",
      "generated_cypher": null,
      "expected_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(c:Cliente)-[:HAS_ADDRESS]->(l:Luogo) WHERE toLower(trim(l.provincia)) = 'pg' RETURN c.name AS cliente ORDER BY cliente",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": "ENTITY_RESOLVER",
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-40-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Calcola il fatturato totale per il secondo trimestre del 2024 (aprile, maggio, giugno).",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) \nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 \nAND doc.dataEmissione.year = 2024 \nAND doc.dataEmissione.month IN [4, 5, 6] \nRETURN sum(dr.importo) AS fatturatoTrimestre",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year = 2024 AND doc.dataEmissione.month IN [4, 5, 6] RETURN sum(dr.importo) AS fatturatoTrimestre",
      "time_total": 55.70776272600051,
      "time_generation": 43.71222788793966,
      "time_db": 0.16882057103794068,
      "time_synthesis": 2.4802901479415596,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-41-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Trova tutti gli articoli la cui descrizione inizia con 'TUBO'",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo) WHERE toLower(trim(a.descrizione)) STARTS WITH 'tubo' RETURN a.descrizione AS articolo",
      "expected_cypher": "MATCH (a:Articolo) WHERE toLower(trim(a.descrizione)) STARTS WITH 'tubo' RETURN a.descrizione AS articolo",
      "time_total": 28.06870618206449,
      "time_generation": 16.134771691984497,
      "time_db": 0.11940375692211092,
      "time_synthesis": 2.1764646540395916,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "GENERAL_QUERY",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-42-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami i documenti di tipo 'FNA' ricevuti dal fornitore 'FORNITORE ESEMPIO SPA'",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (f:Fornitore {ragioneSociale: \"SMA SPA\"})-[:HA_EMESSO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType {nome: \"FNA\"})\nRETURN doc.documentoId AS documento, dt.nome AS tipoDocumento\nORDER BY doc.dataEmissione DESC\nLIMIT 10",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType) WHERE toLower(trim(gf.ragioneSociale)) = 'fornitore esempio spa' AND dt.codice = 'FNA' RETURN doc.documentoId AS documento",
      "time_total": 53.95340611494612,
      "time_generation": 38.74536440393422,
      "time_db": 0.1796336619881913,
      "time_synthesis": 1.549802714958787,
      "jaccard_index": 1.0,
      "query_similarity": 0.4148471615720524,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-43-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi sono i 3 clienti con il fatturato pi\u00f9 basso?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale ASC LIMIT 3",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale ASC LIMIT 3",
      "time_total": 71.4393343370175,
      "time_generation": 59.46435138001107,
      "time_db": 0.5480898469686508,
      "time_synthesis": 2.2650746279396117,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-44-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi sono i 3 clienti con il fatturato pi\u00f9 alto?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale\nORDER BY fatturatoTotale DESC\nLIMIT 3",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC LIMIT 3",
      "time_total": 62.877062760991976,
      "time_generation": 52.280712072970346,
      "time_db": 0.42942281998693943,
      "time_synthesis": 2.0181812819791958,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-45-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali sono i 5 articoli con il costo totale di acquisto pi\u00f9 alto?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)\nRETURN a.descrizione AS articolo, sum(dr.importo) AS costoTotale\nORDER BY costoTotale DESC\nLIMIT 5",
      "expected_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) RETURN a.descrizione AS articolo, sum(dr.importo) AS costoTotale ORDER BY costoTotale DESC LIMIT 5",
      "time_total": 50.390204037074,
      "time_generation": 37.31155162793584,
      "time_db": 0.19869990495499223,
      "time_synthesis": 3.8381265779025853,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-46-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali sono i 5 articoli con il costo totale di acquisto pi\u00f9 basso?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) \nRETURN a.descrizione AS articolo, sum(dr.importo) AS costoTotale ORDER BY costoTotale ASC LIMIT 5",
      "expected_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) RETURN a.descrizione AS articolo, sum(dr.importo) AS costoTotale ORDER BY costoTotale ASC LIMIT 5",
      "time_total": 37.621100577991456,
      "time_generation": 25.217557281954214,
      "time_db": 0.2658502939157188,
      "time_synthesis": 2.492129396996461,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-47-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale fornitore ci vende la gamma pi\u00f9 ampia di articoli unici?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nRETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS varietaProdotti\nORDER BY varietaProdotti DESC\nLIMIT 1",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS varietaProdotti ORDER BY varietaProdotti DESC LIMIT 1",
      "time_total": 52.26698547496926,
      "time_generation": 40.56644647999201,
      "time_db": 0.22116248903330415,
      "time_synthesis": 1.6771196520421654,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-48-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale fornitore ci vende la gamma meno ampia di articoli unici?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) \nRETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS varietaProdotti ORDER BY varietaProdotti ASC LIMIT 1",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS varietaProdotti ORDER BY varietaProdotti ASC LIMIT 1",
      "time_total": 50.56863553007133,
      "time_generation": 39.316540113068186,
      "time_db": 0.17502265004441142,
      "time_synthesis": 1.511021585087292,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-49-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Ordina le aziende in base al numero totale di documenti di vendita emessi.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)\nRETURN d.dittaId AS ditta, count(doc) AS numeroDocumenti\nORDER BY numeroDocumenti DESC",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento) RETURN d.dittaId AS ditta, count(doc) AS numeroDocumenti ORDER BY numeroDocumenti DESC",
      "time_total": 47.42676164105069,
      "time_generation": 36.734198610065505,
      "time_db": 0.10399038007017225,
      "time_synthesis": 1.620604355004616,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-50-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il fornitore con il maggior numero di articoli forniti?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) \nRETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS numeroArticoli \nORDER BY numeroArticoli DESC \nLIMIT 1",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS numeroArticoli ORDER BY numeroArticoli DESC LIMIT 1",
      "time_total": 45.99472433200572,
      "time_generation": 34.963628027937375,
      "time_db": 0.1916204079752788,
      "time_synthesis": 3.0212950229179114,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-51-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi sono i principali fornitori degli articoli venduti al nostro miglior cliente?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente {name: 'best_customer'})-[:HA_RICEVUTO]->(d:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH c, sum(dr.importo) AS totaleAcquistato\nMATCH (f:Fornitore)-[:HA_EMESSO]->(d)<-[:CONTIENE_RIGA]-(dr)\nWHERE f.ragioneSociale IN ['supplier1', 'supplier2']\nRETURN f.ragioneSociale AS fornitore, totaleAcquistato AS valoreAcquistato\nORDER BY valoreAcquistato DESC\nLIMIT 5",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH c, sum(dr.importo) AS fatturatoCliente ORDER BY fatturatoCliente DESC LIMIT 1 WITH c AS topCliente MATCH (topCliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WITH topCliente, collect(DISTINCT a) AS articoliDelTopCliente MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE a IN articoliDelTopCliente RETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS numeroArticoliDiversiForniti ORDER BY numeroArticoliDiversiForniti DESC",
      "time_total": 116.79948948393576,
      "time_generation": 74.57552879594732,
      "time_db": 31.962358764954843,
      "time_synthesis": 1.322797219036147,
      "jaccard_index": 0.0,
      "query_similarity": 0.3177570093457944,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "fornitore": "HANGZHOU EZVIZ NETWORK CO., LTD",
          "numeroArticoliDiversiForniti": 1
        },
        {
          "fornitore": "MICROSOFT IRELAND OPERATIONS LTD",
          "numeroArticoliDiversiForniti": 1
        },
        {
          "fornitore": "KAFRAMA TECHNOLOFY SL / CARLOS FERNANDEZ DOMINGUEZ",
          "numeroArticoliDiversiForniti": 1
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-52-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali sono le famiglie di prodotti vendute sia dalla ditta '1' che dalla ditta '2'?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (fam1:Famiglia)<-[:INCLUSA_IN*0..]-(:Sottofamiglia)<-[:APPARTIENE_A]-(:Articolo)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(:Cliente)-[:APPARTIENE_A]->(:Ditta {dittaId: '1'}) \nWITH collect(DISTINCT fam1) AS famiglieDitta1 \n\nMATCH (fam2:Famiglia)<-[:INCLUSA_IN*0..]-(:Sottofamiglia)<-[:APPARTIENE_A]-(:Articolo)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(:Cliente)-[:APPARTIENE_A]->(:Ditta {dittaId: '2'}) \nWHERE fam2 IN famiglieDitta1 \nRETURN DISTINCT fam2.nome AS famigliaComune ORDER BY famigliaComune",
      "expected_cypher": "MATCH (fam1:Famiglia)<-[:INCLUSA_IN*0..]-(:Sottofamiglia)<-[:APPARTIENE_A]-(:Articolo)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(:Cliente)-[:APPARTIENE_A]->(:Ditta {dittaId: '1'}) WITH collect(DISTINCT fam1) AS famiglieDitta1 MATCH (fam2:Famiglia)<-[:INCLUSA_IN*0..]-(:Sottofamiglia)<-[:APPARTIENE_A]-(:Articolo)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(:Cliente)-[:APPARTIENE_A]->(:Ditta {dittaId: '2'}) WHERE fam2 IN famiglieDitta1 RETURN DISTINCT fam2.nome AS famigliaComune ORDER BY famigliaComune",
      "time_total": 86.92711604689248,
      "time_generation": 71.8183278789511,
      "time_db": 2.211808671010658,
      "time_synthesis": 1.7391497460193932,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-53-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami 5 prodotti che abbiamo acquistato ma mai venduto.",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (f:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE NOT (a)-[:APPARTIENE_A]->(:Sottofamiglia)<-[:INCLUSA_IN]-(:Famiglia)-[:HA_RICEVUTO]->(:Documento)\nRETURN a.descrizione AS articolo\nORDER BY a.descrizione\nLIMIT 5",
      "expected_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) WITH DISTINCT a WHERE NOT (a)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento {tipoValore: 'Fatturato'}) RETURN a.descrizione AS prodottoMaiVenduto LIMIT 5",
      "time_total": 54.35818400804419,
      "time_generation": 38.413128077052534,
      "time_db": 0.5336949590127915,
      "time_synthesis": 5.925077243009582,
      "jaccard_index": 0.0,
      "query_similarity": 0.20475319926873858,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "prodottoMaiVenduto": "SERB.ACC A/REFR.LT1000"
        },
        {
          "prodottoMaiVenduto": "COMPR.COPELAND ZF13K4E"
        },
        {
          "prodottoMaiVenduto": "FABBRICATORE TIPO SG230A"
        }
      ],
      "mismatch_extra": [
        {
          "articolo": "ACCESSORIO-P5"
        },
        {
          "articolo": "ACETILENE IN BOMBOLE"
        },
        {
          "articolo": "ACCESSORIO-ZRP-M6"
        }
      ]
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-54-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami il fatturato totale per ogni mese dell'anno corrente della ditta '1'.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE date(doc.dataEmissione).year = date().year AND dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN date(doc.dataEmissione).month AS mese, sum(dr.importo) AS fatturatoMensile\nORDER BY mese ASC",
      "expected_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE date(doc.dataEmissione).year = date().year AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN date(doc.dataEmissione).month AS mese, sum(dr.importo) AS fatturatoMensile ORDER BY mese ASC",
      "time_total": 70.79932065797038,
      "time_generation": 58.98164104903117,
      "time_db": 0.10865698708221316,
      "time_synthesis": 1.735011412994936,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-55-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Confronta il fatturato totale del 2024 con quello del 2023.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) \nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 \nAND doc.dataEmissione.year IN [2023, 2024] \nRETURN doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoTotale \nORDER BY anno",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year IN [2023, 2024] RETURN doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoTotale ORDER BY anno",
      "time_total": 47.01910352194682,
      "time_generation": 34.12325944507029,
      "time_db": 0.43291446194052696,
      "time_synthesis": 1.9520502769155428,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-56-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale fornitore \u00e8 stato il pi\u00f9 attivo (per valore di acquisto) nell'ultimo trimestre?",
      "success": true,
      "error": null,
      "generated_cypher": "WITH date() - duration({months: 3}) AS dataInizioTrimestre\nMATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE doc.dataEmissione >= dataInizioTrimestre\nRETURN gf.ragioneSociale AS fornitore, sum(dr.importo) AS totaleAcquistato\nORDER BY totaleAcquistato DESC\nLIMIT 1",
      "expected_cypher": "WITH date() - duration({months: 3}) AS dataInizioTrimestre MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE doc.dataEmissione >= dataInizioTrimestre RETURN gf.ragioneSociale AS fornitore, sum(dr.importo) AS totaleAcquistato ORDER BY totaleAcquistato DESC LIMIT 1",
      "time_total": 54.33915091189556,
      "time_generation": 43.42279221303761,
      "time_db": 0.016513778013177216,
      "time_synthesis": 1.2828510019462556,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-57-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami i clienti il cui primo documento di vendita \u00e8 stato emesso negli ultimi 6 mesi.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento) \nWITH c, min(doc.dataEmissione) AS primoAcquisto \nWHERE primoAcquisto >= date() - duration({months: 6}) \nRETURN c.name AS clienteRecente, primoAcquisto ORDER BY primoAcquisto DESC",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento) WITH c, min(doc.dataEmissione) AS primoAcquisto WHERE primoAcquisto >= date() - duration({months: 6}) RETURN c.name AS clienteRecente, primoAcquisto ORDER BY primoAcquisto DESC",
      "time_total": 56.45944248500746,
      "time_generation": 41.75866675097495,
      "time_db": 0.15313259500544518,
      "time_synthesis": 3.4406473280396312,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-58-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Ci sono aziende che non hanno registrato alcun fatturato?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)\nWHERE NOT EXISTS { MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento {tipoValore: 'Fatturato'}) }\nRETURN DISTINCT c.name AS cliente ORDER BY cliente LIMIT 10",
      "expected_cypher": "MATCH (d:Ditta) WHERE NOT (d)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento {tipoValore: 'Fatturato'}) RETURN d.dittaId AS dittaSenzaFatturato",
      "time_total": 48.56944423390087,
      "time_generation": 37.41687678697053,
      "time_db": 0.2749882620992139,
      "time_synthesis": 1.9238339100265875,
      "jaccard_index": 0.0,
      "query_similarity": 0.5867346938775511,
      "specialist": "GENERAL_QUERY",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [],
      "mismatch_extra": [
        {
          "cliente": "2PG DISTRIBUZIONE SRL"
        },
        {
          "cliente": "A C S 21 s.r.l."
        },
        {
          "cliente": "2M DI MAMMOLI MATTEO"
        }
      ]
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-59-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Ultimo documento emesso nel 2024",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (f:Fornitore)-[:HA_EMESSO]->(doc:Documento)\nWHERE doc.dataEmissione >= datetime(\"2024-01-01\") AND doc.dataEmissione <= datetime(\"2024-12-31\")\nRETURN doc ORDER BY doc.dataEmissione DESC LIMIT 1;",
      "expected_cypher": "MATCH (doc:Documento) WHERE doc.dataEmissione.year = 2024 WITH doc ORDER BY doc.dataEmissione DESC LIMIT 1 OPTIONAL MATCH (doc)<-[:HA_RICEVUTO]-(c:Cliente) OPTIONAL MATCH (doc)<-[:HA_EMESSO]-(f:Fornitore)-[:RAGGRUPPATO_SOTTO]->(gf:GruppoFornitore) RETURN doc.documentoId AS UltimodocumentoId,  doc.dataEmissione AS DataEmissione, CASE WHEN gf IS NOT NULL THEN gf.ragioneSociale ELSE 'Nostra Azienda (Vendita)' END AS EmessoDa, CASE WHEN c IS NOT NULL THEN c.name ELSE 'Nostra Azienda (Acquisto)' END AS EmessoA",
      "time_total": 56.39574399997946,
      "time_generation": 44.1679706069408,
      "time_db": 0.16112111695110798,
      "time_synthesis": 2.233755102963187,
      "jaccard_index": 0.0,
      "query_similarity": 0.2768361581920904,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "UltimodocumentoId": "2-202400020704",
          "DataEmissione": "2024-12-31",
          "EmessoDa": "Nostra Azienda (Vendita)",
          "EmessoA": "ROMI S.R.L."
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-60-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Trova i fornitori che non ci hanno mai venduto prodotti della famiglia 'CENTRALI FRIGO'",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (f:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)-[:APPARTIENE_A]->(sf:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia)\nWHERE fam.nome = 'CENTRALI FRIGO'\nWITH f\nMATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE NOT (f)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nRETURN f.ragioneSociale AS fornitore\nORDER BY fornitore\nLIMIT 10",
      "expected_cypher": "MATCH (fam:Famiglia) WHERE toLower(trim(fam.nome)) = 'centrali frigo' WITH fam MATCH (gf:GruppoFornitore) WHERE NOT (gf)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(fam) RETURN gf.ragioneSociale AS fornitore",
      "time_total": 73.39091752900276,
      "time_generation": 59.280996621004306,
      "time_db": 1.1512144500156865,
      "time_synthesis": 3.2662480600411072,
      "jaccard_index": 0.0,
      "query_similarity": 0.18937644341801385,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "fornitore": "LIAONINGLONGXINJIASHANGMAOYOUXIANGONGSI"
        },
        {
          "fornitore": "BRUMAX S.R.L."
        },
        {
          "fornitore": "ASDISCOUNT SARL"
        }
      ],
      "mismatch_extra": [
        {
          "fornitore": "ARCI SRL"
        }
      ]
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-61-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali clienti appartengono esclusivamente all'azienda '1' e non ad altre?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (d:Ditta {dittaId: '1'})-[:APPARTIENE_A]->(c:Cliente)\nWHERE NOT exists((c)-[:APPARTIENE_A]->(:Ditta {dittaId: d.dittaId}))\nRETURN c.name AS cliente\nORDER BY cliente\nLIMIT 10",
      "expected_cypher": "MATCH (c:Cliente)-[:APPARTIENE_A]->(d:Ditta) WITH c, collect(d.dittaId) AS ditte WHERE size(ditte) = 1 AND ditte[0] = '1' RETURN c.name AS clienteEsclusivo",
      "time_total": 73.3939586590277,
      "time_generation": 45.49764033302199,
      "time_db": 15.463185464031994,
      "time_synthesis": 2.7527851900085807,
      "jaccard_index": 0.0,
      "query_similarity": 0.47305389221556887,
      "specialist": "DITTE_QUERY",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "clienteEsclusivo": "F.R."
        },
        {
          "clienteEsclusivo": "EREDI MORETTINI GIOVANNI SNC"
        },
        {
          "clienteEsclusivo": "ASSOCIAZIONE CACAO"
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-62-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Per ogni famiglia di prodotto, chi \u00e8 il cliente che ha generato il fatturato maggiore?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (fam:Famiglia)<-[:INCLUSA_IN]-(:Sottofamiglia)<-[:APPARTIENE_A]-(:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(c:Cliente) \nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 \nWITH fam, c, sum(dr.importo) AS fatturato \nORDER BY fam.nome, fatturato DESC \nWITH fam, collect({cliente: c.name, fatturato: fatturato}) AS clientiOrdinati \nRETURN fam.nome AS famiglia, clientiOrdinati[0].cliente AS topCliente, clientiOrdinati[0].fatturato AS fatturatoMassimo",
      "expected_cypher": "MATCH (fam:Famiglia)<-[:INCLUSA_IN]-(:Sottofamiglia)<-[:APPARTIENE_A]-(:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(c:Cliente) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH fam, c, sum(dr.importo) AS fatturato ORDER BY fam.nome, fatturato DESC WITH fam, collect({cliente: c.name, fatturato: fatturato}) AS clientiOrdinati RETURN fam.nome AS famiglia, clientiOrdinati[0].cliente AS topCliente, clientiOrdinati[0].fatturato AS fatturatoMassimo",
      "time_total": 74.96715304697864,
      "time_generation": 59.61832750996109,
      "time_db": 2.071783134015277,
      "time_synthesis": 4.2005014650058,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-63-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Calcola il rapporto tra costo totale e fatturato totale per il prodotto 'GAS FREON SOLSTICE N40 R448A'",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (a:Articolo) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a'\nWITH a\nMATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(rd:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a)\nWHERE rd.tipoValore = 'Fatturato' OR rd.tipoValore = 'Ordinato'\nWITH c, sum(rd.importo) AS totaleCosti, sum(CASE WHEN rd.tipoValore = 'Fatturato' THEN rd.importo ELSE 0 END) AS totaleInvoiced\nRETURN totaleCosti / totaleInvoiced AS ratio ORDER BY ratio LIMIT 10;",
      "expected_cypher": "MATCH (a:Articolo) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' OPTIONAL MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_acq:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) WITH a, sum(dr_acq.importo) AS costoTotale OPTIONAL MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_ven:RigaDocumento {tipoValore: 'Fatturato'})<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(:Cliente) WHERE dr_ven.importo > 0 WITH costoTotale, sum(dr_ven.importo) AS fatturatoTotale RETURN  costoTotale, fatturatoTotale, CASE WHEN costoTotale <> 0 THEN fatturatoTotale / costoTotale ELSE null END AS rapporto",
      "time_total": 77.89634503494017,
      "time_generation": 59.64238763903268,
      "time_db": 0.7858361029066145,
      "time_synthesis": 6.912528789951466,
      "jaccard_index": 0.0,
      "query_similarity": 0.2644320297951583,
      "specialist": "GENERAL_QUERY",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "costoTotale": 578501.2,
          "fatturatoTotale": 2225420.2,
          "rapporto": 3.846872227749917
        }
      ],
      "mismatch_extra": [
        {
          "ratio": 1.0
        }
      ]
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-64-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale provincia ha generato il volume di fatturato pi\u00f9 alto?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (l:Luogo)-[:SI_TROVA_A]->(doc:Documento)\nWHERE doc.tipoValore = 'Fatturato' // filter by \"fatturato\" type\nWITH l, sum(doc.importo) AS totale // aggregate revenue for each province\nORDER BY totale DESC // sort by total revenue in descending order\nRETURN l.provincia AS provincia, totale AS totaleRevenue\nLIMIT 1 // return only the top result",
      "expected_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo) MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN l.provincia AS provincia, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC LIMIT 1",
      "time_total": 55.4237794020446,
      "time_generation": 44.69175863801502,
      "time_db": 0.14720131095964462,
      "time_synthesis": 1.9163379380479455,
      "jaccard_index": 0.0,
      "query_similarity": 0.358974358974359,
      "specialist": "GENERAL_QUERY",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "provincia": "PG",
          "fatturatoTotale": 25544465.930000313
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-65-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale provincia ha generato il volume di fatturato pi\u00f9 basso?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo) \nMATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) \nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 \nRETURN l.provincia AS provincia, sum(dr.importo) AS fatturatoTotale \nORDER BY fatturatoTotale ASC \nLIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo) MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN l.provincia AS provincia, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale ASC LIMIT 1",
      "time_total": 69.61727564095054,
      "time_generation": 57.95453872799408,
      "time_db": 0.5512363819871098,
      "time_synthesis": 1.8408982880646363,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-66-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Lista dei clienti il cui fatturato totale \u00e8 superiore al fatturato medio di tutti i clienti.",
      "success": false,
      "error": "Syntax error: {code: Neo.ClientError.Statement.SyntaxError} {message: Invalid input 'NOT': exp",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWITH c, sum(dr.importo) AS totale\nMATCH (avg_c:Cliente)\nWHERE avg_c <> c AND avg_c NOT IN [c]\nWITH avg_c, avg(totale) AS media\nWHERE totale > media\nRETURN DISTINCT c.name AS cliente ORDER BY cliente LIMIT 10",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH count(DISTINCT c) AS totalCustomers, sum(dr.importo) AS totalRevenue WITH CASE WHEN totalCustomers = 0 THEN null ELSE totalRevenue / totalCustomers END AS avgRevenue WHERE avgRevenue IS NOT NULL MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH c, sum(dr.importo) AS customerRevenue, avgRevenue WHERE customerRevenue > avgRevenue RETURN c.name AS cliente, customerRevenue ORDER BY customerRevenue DESC",
      "time_total": 94.3724552571075,
      "time_generation": 38.58391914109234,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": "GENERAL_QUERY",
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-67-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami il numero di documenti per ciascun tipo (codice).",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType) RETURN dt.codice AS tipoDocumento, count(doc) AS numeroDocumenti ORDER BY numeroDocumenti DESC",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType) RETURN dt.codice AS tipoDocumento, count(doc) AS numeroDocumenti ORDER BY numeroDocumenti DESC",
      "time_total": 38.861472966033034,
      "time_generation": 28.018685698974878,
      "time_db": 0.04754757892806083,
      "time_synthesis": 2.205561273964122,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "GENERAL_QUERY",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-68-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il fatturato totale associato ai documenti di tipo 'FVC'?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'FVC'})\nMATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN sum(dr.importo) AS totaleFatturatoInFVC",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'FVC'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN sum(dr.importo) AS fatturatoFVC",
      "time_total": 56.512374768964946,
      "time_generation": 45.12697272002697,
      "time_db": 0.43748051999136806,
      "time_synthesis": 1.4312543240375817,
      "jaccard_index": 1.0,
      "query_similarity": 0.9371980676328503,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-69-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale cliente ha ricevuto il maggior numero di note di credito (codice 'NCC')?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'NCC'})\nRETURN c.name AS cliente, count(doc) AS numeroNoteCredito\nORDER BY numeroNoteCredito DESC\nLIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'NCC'}) RETURN c.name AS cliente, count(doc) AS numeroNoteCredito ORDER BY numeroNoteCredito DESC LIMIT 1",
      "time_total": 51.925923448987305,
      "time_generation": 38.672210596036166,
      "time_db": 0.01573298906441778,
      "time_synthesis": 1.8438658199738711,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-70-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Calcola il valore medio di un documento per ciascun tipo (considerando solo il fatturato).",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType)\nWHERE doc.tipoValore = 'Fatturato'\nWITH dt, avg(doc.importo) AS mediaImporto\nRETURN dt.nome AS tipoDocumento, mediaImporto AS averageValue\nORDER BY mediaImporto DESC",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH dt, doc, sum(dr.importo) AS valoreDocumento RETURN dt.codice AS tipoDocumento, avg(valoreDocumento) AS valoreMedio ORDER BY valoreMedio DESC",
      "time_total": 54.26735561003443,
      "time_generation": 44.172456555999815,
      "time_db": 0.19324812199920416,
      "time_synthesis": 1.3144291579956189,
      "jaccard_index": 0.0,
      "query_similarity": 0.4426877470355731,
      "specialist": "GENERAL_QUERY",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "tipoDocumento": "FVC",
          "valoreMedio": 2511.5810938663294
        },
        {
          "tipoDocumento": "NDC",
          "valoreMedio": 6835.246666666666
        },
        {
          "tipoDocumento": "NCC",
          "valoreMedio": 2662.121951219513
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-71-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi \u00e8 il cliente con il fatturato pi\u00f9 alto?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale\nORDER BY fatturatoTotale DESC\nLIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC LIMIT 1",
      "time_total": 54.29141375294421,
      "time_generation": 43.995322508970276,
      "time_db": 0.4732056260108948,
      "time_synthesis": 1.5379690419649705,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-72-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca 5 clienti situati a Perugia",
      "success": false,
      "error": "Query mancante",
      "generated_cypher": null,
      "expected_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo) WHERE toLower(trim(l.localita)) = 'perugia' RETURN DISTINCT c.name AS cliente ORDER BY cliente LIMIT 5",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": "ENTITY_RESOLVER",
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-73-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami i 5 prodotti pi\u00f9 popolari in termini di quantit\u00e0 venduta",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nRETURN a.descrizione AS prodotto, sum(dr.quantita) AS quantitaTotale\nORDER BY quantitaTotale DESC\nLIMIT 5",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN a.descrizione AS prodotto, sum(dr.quantita) AS quantitaTotale ORDER BY quantitaTotale DESC LIMIT 5",
      "time_total": 47.549787235911936,
      "time_generation": 35.75320823409129,
      "time_db": 0.6564651420339942,
      "time_synthesis": 2.011272447067313,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-74-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Dimmi il fatturato di ciascuna azienda.",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(rd:RigaDocumento)\nWHERE rd.tipoValore = 'Fatturato'\nWITH c, sum(rd.importo) AS totale\nRETURN c.name AS cliente, totale AS revenue ORDER BY revenue DESC LIMIT 20",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN d.dittaId AS ditta, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC",
      "time_total": 57.4016637080349,
      "time_generation": 46.73677778802812,
      "time_db": 0.5531651000492275,
      "time_synthesis": 2.5674514130223542,
      "jaccard_index": 0.0,
      "query_similarity": 0.5300207039337475,
      "specialist": "GENERAL_QUERY",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "ditta": "4",
          "fatturatoTotale": 1268387.26
        },
        {
          "ditta": "2",
          "fatturatoTotale": 37155291.67000106
        },
        {
          "ditta": "1",
          "fatturatoTotale": 3871373.63
        }
      ],
      "mismatch_extra": [
        {
          "cliente": "SEGIT SRL",
          "revenue": 949486.2000000003
        },
        {
          "cliente": "IPEM 2011 SRL",
          "revenue": 338604.54
        },
        {
          "cliente": "UNICOMM SRL Societ\u00e0 unipersonale",
          "revenue": 977461.0599999999
        }
      ]
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-75-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quanto ho speso per acquistare il prodotto GAS FREON SOLSTICE N40 R448A?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) \nWHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' \nRETURN sum(dr.importo) AS costoTotaleAcquisto",
      "expected_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' RETURN sum(dr.importo) AS costoTotaleAcquisto",
      "time_total": 51.36293068493251,
      "time_generation": 39.56208621209953,
      "time_db": 0.18415557104162872,
      "time_synthesis": 1.4555954430252314,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-76-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quanto ho guadagnato vendendo il prodotto GAS FREON SOLSTICE N40 R448A?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) \nWHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 \nRETURN sum(dr.importo) AS totaleVenduto",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN sum(dr.importo) AS totaleVenduto",
      "time_total": 51.89299288694747,
      "time_generation": 38.52575659297872,
      "time_db": 0.5150786129524931,
      "time_synthesis": 2.580494840978645,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-77-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali aziende vendono prodotti della famiglia 'CENTRALI FRIGO'?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia) WHERE toLower(trim(fam.nome)) = 'centrali frigo' RETURN DISTINCT d.dittaId AS ditta ORDER BY ditta",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia) WHERE toLower(trim(fam.nome)) = 'centrali frigo' RETURN DISTINCT d.dittaId AS ditta ORDER BY ditta",
      "time_total": 46.958106267033145,
      "time_generation": 35.77126110298559,
      "time_db": 0.48435809602960944,
      "time_synthesis": 1.4537276970222592,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "DITTE_QUERY",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-78-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 l'importo medio per riga documento nelle fatture di vendita?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN avg(dr.importo) AS importoMedioRiga",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN avg(dr.importo) AS importoMedioRiga",
      "time_total": 70.61435126292054,
      "time_generation": 54.550484469975345,
      "time_db": 0.2996573999989778,
      "time_synthesis": 6.41663834603969,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-79-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Per ogni azienda, classifica il suo fatturato totale come 'Alto' se supera i 10 milioni, 'Medio' se \u00e8 tra 1 e 10 milioni, e 'Basso' altrimenti.",
      "success": false,
      "error": "Syntax error: {code: Neo.ClientError.Statement.SyntaxError} {message: Variable `riga` not defi",
      "generated_cypher": "MATCH (c:Ditta)\nWITH c, sum(riga.importo) AS totaleRevenue\nRETURN \n    CASE \n        WHEN totaleRevenue > 10000000 THEN 'High'\n        WHEN totaleRevenue >= 1000000 AND totaleRevenue <= 10000000 THEN 'Medium'\n        ELSE 'Low' \n    END AS revenueClassification\nORDER BY revenueClassification;",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH d, sum(dr.importo) AS fatturatoTotale RETURN d.dittaId AS ditta, fatturatoTotale, CASE WHEN fatturatoTotale > 10000000 THEN 'Alto' WHEN fatturatoTotale > 1000000 THEN 'Medio' ELSE 'Basso' END AS categoriaFatturato",
      "time_total": 87.63120717997663,
      "time_generation": 42.38404765992891,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": "GENERAL_QUERY",
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-80-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il primo e l'ultimo documento di vendita mai registrato per il cliente 'ACME SRL'?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente {name: 'GRAZIA SRSL'})-[:HA_RICEVUTO]->(doc:Documento)\nRETURN min(doc.dataEmissione) AS primoDocumento, max(doc.dataEmissione) AS ultimoDocumento",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento) WHERE toLower(trim(c.name)) = 'acme srl' RETURN min(doc.dataEmissione) AS primoDocumento, max(doc.dataEmissione) AS ultimoDocumento",
      "time_total": 50.787044335040264,
      "time_generation": 35.049508239957504,
      "time_db": 0.13068172906059772,
      "time_synthesis": 1.9543028000043705,
      "jaccard_index": 0.0,
      "query_similarity": 0.8163265306122449,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "primoDocumento": null,
          "ultimoDocumento": null
        }
      ],
      "mismatch_extra": [
        {
          "primoDocumento": "2024-12-12",
          "ultimoDocumento": "2024-12-12"
        }
      ]
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-81-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 la media del fatturato mensile per il cliente 'ACME SRL' nel 2024?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente {name: 'GRAZIA SRSL'})-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year = 2024\nWITH date(doc.dataEmissione).month AS mese, sum(dr.importo) AS fatturatoMensile\nRETURN avg(fatturatoMensile) AS mediaFatturatoMensile",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE toLower(trim(c.name)) = 'l\\'abbondanza srl' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year = 2024 WITH date(doc.dataEmissione).month AS mese, sum(dr.importo) AS fatturatoMensile RETURN avg(fatturatoMensile) AS mediaFatturatoMensile",
      "time_total": 63.28374516509939,
      "time_generation": 46.68468544795178,
      "time_db": 0.19499359105248004,
      "time_synthesis": 2.7387783880112693,
      "jaccard_index": 0.0,
      "query_similarity": 0.8976608187134503,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "mediaFatturatoMensile": 170779.8825
        }
      ],
      "mismatch_extra": [
        {
          "mediaFatturatoMensile": 2125.9
        }
      ]
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-82-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Per i primi 3 clienti per fatturato, mostra il loro prodotto pi\u00f9 acquistato per valore.",
      "success": false,
      "error": "Syntax error: {code: Neo.ClientError.Statement.SyntaxError} {message: Invalid input 's': expec",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH c, sum(dr.importo) AS totaleRevenue\nORDER BY totaleRevenue DESC\nLIMIT 3\nMATCH (c)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE a.descrizione IN (\n    SELECT s.descrizione\n    FROM (MATCH (s:Sottofamiglia)<-[:INCLUSA_IN]-(:Famiglia) RETURN s.nome AS famiglia, s.codice AS codiceFamiglia) AS subfamily\n    WHERE c.name = 'client_name' // replace with actual client name\n)\nRETURN a.descrizione AS bestSellingProduct, totaleRevenue AS revenue\nORDER BY revenue DESC",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH c, sum(dr.importo) AS fatturatoCliente ORDER BY fatturatoCliente DESC LIMIT 3 MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr2:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE dr2.tipoValore = 'Fatturato' AND dr2.importo > 0 WITH c, a, sum(dr2.importo) AS valoreProdotto ORDER BY c.name, valoreProdotto DESC WITH c, head(collect({prodotto: a.descrizione, valore: valoreProdotto})) AS topProdotto RETURN c.name AS cliente, topProdotto.prodotto AS prodottoTop, topProdotto.valore AS valoreTop ORDER BY c.name",
      "time_total": 143.268077515997,
      "time_generation": 67.86961267795414,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": "SALES_CYCLE",
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-83-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali clienti hanno effettuato ordini ma non hanno ancora ricevuto una fattura?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento {tipoOriginale: 'Fattura'})\nWHERE NOT (c)-[:HA_RICEVUTO]->(:Documento)\nRETURN c.name AS cliente\nORDER BY cliente\nLIMIT 10",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento {tipoValore: 'Ordinato'}) WITH DISTINCT c MATCH (c) WHERE NOT (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento {tipoValore: 'Fatturato'}) RETURN c.name AS clienteSenzaFattura",
      "time_total": 46.735984252998605,
      "time_generation": 33.727031860966235,
      "time_db": 0.19952905096579343,
      "time_synthesis": 2.9914092789404094,
      "jaccard_index": 0.0,
      "query_similarity": 0.6094808126410836,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "clienteSenzaFattura": "HONG KONG UGREEN LIMITED"
        },
        {
          "clienteSenzaFattura": "MACELLERIA SAN SECONDO"
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-84-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi \u00e8 il fornitore principale per ogni famiglia di prodotto, in base al valore acquistato?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (fam:Famiglia)<-[:INCLUSA_IN]-(:Sottofamiglia)<-[:APPARTIENE_A]-(:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)-[:RAGGRUPPATO_SOTTO]->(gf:GruppoFornitore) \nWITH fam, gf, sum(dr.importo) AS valoreAcquistato \nORDER BY fam.nome, valoreAcquistato DESC \nWITH fam, collect({fornitore: gf.ragioneSociale, valore: valoreAcquistato})[0] AS fornitoreTop \nRETURN fam.nome AS famiglia, fornitoreTop.fornitore AS fornitorePrincipale",
      "expected_cypher": "MATCH (fam:Famiglia)<-[:INCLUSA_IN]-(:Sottofamiglia)<-[:APPARTIENE_A]-(:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)-[:RAGGRUPPATO_SOTTO]->(gf:GruppoFornitore) WITH fam, gf, sum(dr.importo) AS valoreAcquistato ORDER BY fam.nome, valoreAcquistato DESC WITH fam, collect({fornitore: gf.ragioneSociale, valore: valoreAcquistato})[0] AS fornitoreTop RETURN fam.nome AS famiglia, fornitoreTop.fornitore AS fornitorePrincipale",
      "time_total": 69.62867941695731,
      "time_generation": 57.51476188201923,
      "time_db": 0.7638029759982601,
      "time_synthesis": 2.279366083093919,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-85-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il valore totale degli ordini in sospeso (ordinati ma non fatturati)?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) \nWHERE dr.tipoValore = 'Ordinato' AND NOT (doc)<-[:CONTIENE_RIGA]-(:RigaDocumento {tipoValore:'Fatturato'}) \nRETURN sum(dr.importo) AS totaleOrdiniSospesi",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Ordinato' WITH c, doc, sum(dr.importo) AS valoreOrdinato WHERE NOT (doc)<-[:CONTIENE_RIGA]-(:RigaDocumento {tipoValore:'Fatturato'}) RETURN sum(valoreOrdinato) AS totaleOrdiniSospesi",
      "time_total": 52.67456419800874,
      "time_generation": 42.19674225198105,
      "time_db": 0.38411015807650983,
      "time_synthesis": 1.3742861689534038,
      "jaccard_index": 1.0,
      "query_similarity": 0.5348399246704332,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-86-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami i clienti che acquistano pi\u00f9 di 10 articoli unici diversi.",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(d:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWITH c, collect(distinct a) AS articoliUnici\nWHERE size(articoliUnici) > 10\nRETURN c.name AS cliente, size(articoliUnici) AS numeroArticoliUnici\nORDER BY numeroArticoliUnici DESC\nLIMIT 10",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WITH c, count(DISTINCT a) AS numeroArticoliUnici WHERE numeroArticoliUnici > 10 RETURN c.name AS cliente, numeroArticoliUnici ORDER BY numeroArticoliUnici DESC",
      "time_total": 64.25509006204084,
      "time_generation": 52.58149012597278,
      "time_db": 0.5485095910262316,
      "time_synthesis": 2.668523699976504,
      "jaccard_index": 0.031446540880503145,
      "query_similarity": 0.7958833619210978,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "cliente": "F.G. DISCOUNT SRL",
          "numeroArticoliUnici": 13
        },
        {
          "cliente": "DIESSE STORE srl",
          "numeroArticoliUnici": 23
        },
        {
          "cliente": "SUPERSTORE SAN SISTO SRL",
          "numeroArticoliUnici": 52
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-87-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Per il prodotto pi\u00f9 venduto per quantit\u00e0, qual \u00e8 il suo costo medio di acquisto?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (f:Fornitore)-[:HA_EMESSO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Ordinato' // or 'Fatturato', depending on the type of document you're interested in\nWITH f, sum(dr.quantita) AS totaleQuantita, sum(dr.importo) AS totaleCosto\nMATCH (a:Articolo)-[:RIGUARDA_ARTICOLO]->(dr)\nWHERE a.descrizione = 'best-selling product' // replace with the actual name of the best-selling product\nWITH f, totaleQuantita, totaleCosto, avg(totaleCosto / totaleQuantita) AS mediaCostoAcquisto\nRETURN f.ragioneSociale AS fornitore, mediaCostoAcquisto AS costoAcquistoMedio\nORDER BY mediaCostoAcquisto DESC\nLIMIT 1;",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WITH a, sum(dr.quantita) AS quantitaTotale ORDER BY quantitaTotale DESC LIMIT 1 MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_acq:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) RETURN a.descrizione AS prodotto, avg(CASE WHEN dr_acq.quantita = 0 OR dr_acq.quantita IS NULL THEN null ELSE dr_acq.importo / dr_acq.quantita END) AS costoMedioUnitario",
      "time_total": 72.44325799692888,
      "time_generation": 61.31928831897676,
      "time_db": 0.44484027300495654,
      "time_synthesis": 1.516060221940279,
      "jaccard_index": 0.0,
      "query_similarity": 0.23180592991913745,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "prodotto": "Articolo placeholder: ID_NON_DISPONIBILE",
          "costoMedioUnitario": 272.7513515257551
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-88-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca i fornitori che trattano solo prodotti di una singola famiglia.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (f:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)-[:APPARTIENE_A]->(sf:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia)\nWITH f, collect({family: fam.nome}) AS families\nWHERE size(families) = 1\nRETURN distinct f.ragioneSociale AS supplier\nORDER BY supplier\nLIMIT 10",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia) WITH gf, count(DISTINCT fam) AS numeroFamiglie WHERE numeroFamiglie = 1 RETURN gf.ragioneSociale AS fornitoreMonoFamiglia",
      "time_total": 69.05795800697524,
      "time_generation": 57.162009506020695,
      "time_db": 0.8275905379559845,
      "time_synthesis": 2.638625498046167,
      "jaccard_index": 1.0,
      "query_similarity": 0.044642857142857144,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-89-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 la percentuale di fatturato generata dai clienti nella regione 'Umbria' sul totale?",
      "success": false,
      "error": "Syntax error: {code: Neo.ClientError.Statement.SyntaxError} {message: Variable `r` not defined",
      "generated_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo {regione: 'UMBRIA'})\nWHERE l.localita IS NOT NULL\nWITH c, sum(r.importo) AS revenue_umbria\nMATCH (c)-[:HA_RICEVUTO]->(d:Documento)-[:CONTIENE_RIGA]->(r:RigaDocumento)\nRETURN sum(revenue_umbria) / sum(r.importo) * 100 AS percentage_revenue_umbria",
      "expected_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo),(c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH sum(dr.importo) AS totaleFatturato,  sum(CASE WHEN toLower(trim(l.regione)) = 'umbria' THEN dr.importo ELSE 0 END) AS fatturatoUmbria RETURN CASE WHEN totaleFatturato = 0 THEN 0.0 ELSE (fatturatoUmbria * 100.0 / totaleFatturato) END AS percentualeUmbria",
      "time_total": 79.01369232602883,
      "time_generation": 45.699138605967164,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": "GENERAL_QUERY",
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-90-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Trova il cliente con il valore medio degli ordini pi\u00f9 alto.",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH c, sum(dr.importo) AS valoreOrdine\nRETURN c.name AS cliente, avg(valoreOrdine) AS valoreMedioOrdine\nORDER BY valoreMedioOrdine DESC\nLIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH c, doc, sum(dr.importo) AS valoreOrdine RETURN c.name AS cliente, avg(valoreOrdine) AS valoreMedioOrdine ORDER BY valoreMedioOrdine DESC LIMIT 1",
      "time_total": 64.75044014491141,
      "time_generation": 54.20465950202197,
      "time_db": 0.5303371789632365,
      "time_synthesis": 1.4886326499981806,
      "jaccard_index": 0.0,
      "query_similarity": 0.9912739965095986,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "cliente": "CREDEMLEASING SPA",
          "valoreMedioOrdine": 201600.0
        }
      ],
      "mismatch_extra": [
        {
          "cliente": "I.G.E.S. S.R.L.",
          "valoreMedioOrdine": 4753375.079999999
        }
      ]
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-91-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami i 3 mesi con il maggior numero di documenti di acquisto registrati.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(doc:Documento) \nRETURN doc.dataEmissione.year AS anno, doc.dataEmissione.month AS mese, count(doc) AS numeroDocumenti \nORDER BY numeroDocumenti DESC \nLIMIT 3",
      "expected_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(doc:Documento) RETURN doc.dataEmissione.year AS anno, doc.dataEmissione.month AS mese, count(doc) AS numeroDocumenti ORDER BY numeroDocumenti DESC LIMIT 3",
      "time_total": 47.474636473925784,
      "time_generation": 35.8251667090226,
      "time_db": 0.08540905301924795,
      "time_synthesis": 2.2421935399761423,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-92-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Ci sono prodotti venduti a un prezzo inferiore al loro costo medio di acquisto?",
      "success": false,
      "error": "Syntax error: {code: Neo.ClientError.Statement.SyntaxError} {message: Variable `dr` not define",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH a, avg(dr.importo) AS mediaVendita\nMATCH (a)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia)\nWHERE toLower(trim(fam.nome)) = 'your_product_family' // replace with the actual product family name\nWITH a, fam, mediaVendita\nWHERE dr.importo < mediaVendita\nRETURN a.descrizione AS prodotto, dr.importo AS prezzoVenduto, mediaVendita AS mediaPrezzo\nORDER BY prezzoVenduto ASC\nLIMIT 10 // adjust the limit as needed",
      "expected_cypher": "MATCH (a:Articolo) OPTIONAL MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_acq:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) WITH a, avg(CASE WHEN dr_acq.quantita = 0 OR dr_acq.quantita IS NULL THEN null ELSE dr_acq.importo / dr_acq.quantita END) AS costoMedio OPTIONAL MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_ven:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(:Cliente) WHERE dr_ven.tipoValore = 'Fatturato' AND dr_ven.importo > 0 WITH a, costoMedio, avg(CASE WHEN dr_ven.quantita = 0 OR dr_ven.quantita IS NULL THEN null ELSE dr_ven.importo / dr_ven.quantita END) AS prezzoMedioVendita WHERE prezzoMedioVendita < costoMedio RETURN a.descrizione AS prodottoInPerdita",
      "time_total": 146.27135139796883,
      "time_generation": 74.24653081898578,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": "SALES_CYCLE",
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-93-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale tipo di documento (codice) \u00e8 pi\u00f9 frequentemente associato al ciclo di acquisto?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType)\nRETURN dt.codice AS tipoDocumento, count(doc) AS frequenza\nORDER BY frequenza DESC\nLIMIT 1",
      "expected_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType) RETURN dt.codice AS tipoDocumento, count(doc) AS frequenza ORDER BY frequenza DESC LIMIT 1",
      "time_total": 58.93950967292767,
      "time_generation": 45.69357630901504,
      "time_db": 0.06987640599254519,
      "time_synthesis": 3.862526220967993,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-94-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca i fornitori situati in un luogo dove non abbiamo clienti.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(f:Fornitore)-[:SI_TROVA_A]->(lf:Luogo) \nWHERE NOT EXISTS { MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo {localita: lf.localita}) } \nRETURN DISTINCT f.ragioneSociale AS fornitore ORDER BY fornitore",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(f:Fornitore)-[:SI_TROVA_A]->(lf:Luogo) WHERE NOT EXISTS { MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo {localita: lf.localita}) } RETURN DISTINCT gf.ragioneSociale AS fornitore ORDER BY fornitore",
      "time_total": 37.9988347600447,
      "time_generation": 26.075324638048187,
      "time_db": 0.5779904120136052,
      "time_synthesis": 2.0675998659571633,
      "jaccard_index": 1.0,
      "query_similarity": 0.9979381443298969,
      "specialist": "GENERAL_QUERY",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-95-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quante note di credito clienti (NCC) abbiamo emesso in totale?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento {tipoOriginale: 'Nota di credito'})\nRETURN COUNT(DISTINCT doc) AS totaleCreditNotes",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'NCC'}) RETURN count(doc) AS numeroNoteCredito",
      "time_total": 36.57263663504273,
      "time_generation": 26.156713698990643,
      "time_db": 0.10355545405764133,
      "time_synthesis": 1.9810064861085266,
      "jaccard_index": 0.0,
      "query_similarity": 0.5064377682403434,
      "specialist": "GENERAL_QUERY",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "numeroNoteCredito": 639
        }
      ],
      "mismatch_extra": [
        {
          "totaleCreditNotes": 0
        }
      ]
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-96-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami tutti gli ordini fornitori (OF) per maggio 2024.",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (f:Fornitore)-[:HA_EMESSO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE doc.dataEmissione >= datetime(\"2024-05-01\") AND doc.dataEmissione <= datetime(\"2024-05-31\")\nRETURN f.ragioneSociale AS fornitore, count(DISTINCT dr) AS numeroOrdini\nORDER BY numeroOrdini DESC\nLIMIT 10",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'OF'}) WHERE doc.dataEmissione.year = 2024 AND doc.dataEmissione.month = 5 RETURN doc.documentoId AS ordine",
      "time_total": 50.67206864210311,
      "time_generation": 38.436151650967076,
      "time_db": 0.22127703402657062,
      "time_synthesis": 2.213377421023324,
      "jaccard_index": 0.0,
      "query_similarity": 0.21978021978021978,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "ordine": "2-202400007971"
        },
        {
          "ordine": "2-202400008117"
        },
        {
          "ordine": "2-202400006888"
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-97-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il valore totale delle fatture fornitori (FFA) ricevute?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (f:Fornitore)-[:HA_EMESSO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE doc.tipoOriginale = 'FFA'\nRETURN sum(dr.importo) AS totaleFattureFornitore",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'FFA'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) RETURN sum(dr.importo) AS totaleFattureFornitore",
      "time_total": 57.51066436804831,
      "time_generation": 46.86805448902305,
      "time_db": 0.1643001219490543,
      "time_synthesis": 1.4901991699589416,
      "jaccard_index": 1.0,
      "query_similarity": 0.654434250764526,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-98-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca i clienti a cui abbiamo inviato una nota di consegna clienti (DDTV) a Roma.",
      "success": false,
      "error": "Query mancante",
      "generated_cypher": null,
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'DDTV'}) WHERE toLower(trim(doc.tipoOriginale)) CONTAINS 'roma' RETURN DISTINCT c.name AS cliente",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": "ENTITY_RESOLVER",
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-99-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il valore fatturato presente solo nelle fatture clienti (FVC)?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'FVC'})\nMATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN sum(dr.importo) AS totaleFatturatoInFVC",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'FVC'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' RETURN sum(dr.importo) AS totaleFatturatoInFVC",
      "time_total": 59.26492164796218,
      "time_generation": 48.05854109302163,
      "time_db": 0.34226383292116225,
      "time_synthesis": 1.5646679140627384,
      "jaccard_index": 1.0,
      "query_similarity": 0.9528535980148883,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-100-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami il totale ordinato attraverso gli ordini clienti (OC) per la ditta '1'.",
      "success": false,
      "error": "Syntax error: {code: Neo.ClientError.Statement.SyntaxError} {message: Can't use aggregate func",
      "generated_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Ordinato'\nWITH d, collect({customer: c.name, total: sum(dr.importo)}) AS customerTotals\nRETURN distinct customerTotals.customer AS cliente, SUM(customerTotals.total) AS totaleOrdini\nORDER BY totaleOrdini DESC",
      "expected_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'OC'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Ordinato' RETURN sum(dr.importo) AS totaleOrdinatoDitta1",
      "time_total": 109.25065317598637,
      "time_generation": 56.118766251951456,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": "SALES_CYCLE",
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-101-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il valore medio delle righe fatturate nelle note di consegna clienti (DDTV)?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento {tipoOriginale: 'DDTV'})-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH c, sum(dr.importo) AS totaleFatturato\nRETURN avg(totaleFatturato) AS valoreMedioFatturato",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'DDTV'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Bollato' RETURN avg(dr.importo) AS valoreMedioBollato",
      "time_total": 77.28292865795083,
      "time_generation": 61.782649858971126,
      "time_db": 0.23159775196108967,
      "time_synthesis": 3.6679386829491705,
      "jaccard_index": 0.0,
      "query_similarity": 0.1891891891891892,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "valoreMedioBollato": 287.930263878516
        }
      ],
      "mismatch_extra": [
        {
          "valoreMedioFatturato": null
        }
      ]
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-102-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi \u00e8 il cliente con il valore fatturato pi\u00f9 alto considerando solo le fatture immediate (FVC)?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento {tipoOriginale: 'FVC'})-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN c.name AS cliente, sum(dr.importo) AS totale\nORDER BY totale DESC\nLIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'FVC'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS totale ORDER BY totale DESC LIMIT 1",
      "time_total": 57.72558923601173,
      "time_generation": 45.20996013400145,
      "time_db": 0.23718163999728858,
      "time_synthesis": 2.058575539966114,
      "jaccard_index": 0.0,
      "query_similarity": 0.8953488372093024,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "cliente": "L'ABBONDANZA SRL",
          "totale": 6071834.069999974
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-103-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Per il cliente 'ACME SRL', confronta il totale ordinato e il totale fatturato.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente) WHERE toLower(trim(c.name)) = 'condensatore 2mf mrl prl' \nOPTIONAL MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr_ord:RigaDocumento {tipoValore: 'Ordinato'}) \nWITH c, sum(dr_ord.importo) AS totaleOrdinato \nOPTIONAL MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr_fat:RigaDocumento {tipoValore: 'Fatturato'}) \nWHERE dr_fat.importo > 0 \nRETURN totaleOrdinato, sum(dr_fat.importo) AS totaleFatturato",
      "expected_cypher": "MATCH (c:Cliente) WHERE toLower(trim(c.name)) = 'acme srl' OPTIONAL MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr_ord:RigaDocumento {tipoValore: 'Ordinato'}) WITH c, sum(dr_ord.importo) AS totaleOrdinato OPTIONAL MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr_fat:RigaDocumento {tipoValore: 'Fatturato'}) WHERE dr_fat.importo > 0 RETURN totaleOrdinato, sum(dr_fat.importo) AS totaleFatturato",
      "time_total": 81.1645225220127,
      "time_generation": 65.49348678300157,
      "time_db": 0.3527341439621523,
      "time_synthesis": 1.6347155820112675,
      "jaccard_index": 1.0,
      "query_similarity": 0.969626168224299,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-104-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca i documenti d'ordine clienti (OC) che non sono ancora stati completamente fatturati.",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)\nWHERE NOT doc.tipoOriginale = 'Fattura'\nRETURN c.name AS cliente, doc.documentoId AS documentoId\nORDER BY c.name\nLIMIT 10",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'OC'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento {tipoValore: 'Ordinato'}) WITH doc, sum(dr.importo) AS valoreOrdinato MATCH (doc)-[:CONTIENE_RIGA]->(dr_fat:RigaDocumento {tipoValore: 'Fatturato'}) WITH doc, valoreOrdinato, sum(dr_fat.importo) AS valoreFatturato WHERE valoreOrdinato > valoreFatturato RETURN doc.documentoId AS ordineNonSaldato",
      "time_total": 45.272953731007874,
      "time_generation": 33.27341586200055,
      "time_db": 0.14545221696607769,
      "time_synthesis": 2.4940531230531633,
      "jaccard_index": 0.0,
      "query_similarity": 0.2673611111111111,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [],
      "mismatch_extra": [
        {
          "cliente": "100 ROMA MARKET SRL",
          "documentoId": "2-202300004994"
        },
        {
          "cliente": "100 ROMA MARKET SRL",
          "documentoId": "2-202300009922"
        },
        {
          "cliente": "100 ROMA MARKET SRL",
          "documentoId": "2-202300004434"
        }
      ]
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-105-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale tipo di documento (nome) ha il valore medio pi\u00f9 alto per riga (considerando solo i valori fatturati)?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType)\nMATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN dt.nome AS nomeTipoDocumento, avg(dr.importo) AS valoreMedioRiga\nORDER BY valoreMedioRiga DESC\nLIMIT 1",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN dt.nome AS nomeTipoDocumento, avg(dr.importo) AS valoreMedioRiga ORDER BY valoreMedioRiga DESC LIMIT 1",
      "time_total": 65.24697225599084,
      "time_generation": 52.049480515066534,
      "time_db": 0.48067197599448264,
      "time_synthesis": 2.3917638030834496,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3",
      "test_id": "TEST-106-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami il totale fatturato e il totale ordinato per ciascuna ditta.",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH d, sum(dr.importo) AS fatturatoTotale, sum(CASE WHEN dr.tipoValore = 'Ordinato' THEN dr.importo ELSE 0 END) AS ordinatoTotale\nRETURN d.dittaId AS ditta, fatturatoTotale AS fatturato, ordinatoTotale AS ordinato\nORDER BY fatturato DESC, ordinato DESC",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) RETURN d.dittaId AS ditta, sum(CASE dr.tipoValore WHEN 'Fatturato' THEN dr.importo ELSE 0 END) AS totaleFatturato, sum(CASE dr.tipoValore WHEN 'Ordinato' THEN dr.importo ELSE 0 END) AS totaleOrdinato ORDER BY ditta ASC",
      "time_total": 107.53247451095376,
      "time_generation": 67.67616699193604,
      "time_db": 28.771565128001384,
      "time_synthesis": 2.250609833979979,
      "jaccard_index": 0.6,
      "query_similarity": 0.606951871657754,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "ditta": "1",
          "totaleFatturato": 3871373.629999999,
          "totaleOrdinato": 0
        },
        {
          "ditta": "2",
          "totaleFatturato": 37155291.6700004,
          "totaleOrdinato": 2376823.7100000014
        },
        {
          "ditta": "3",
          "totaleFatturato": 2235052.660000002,
          "totaleOrdinato": 0
        }
      ],
      "mismatch_extra": [
        {
          "ditta": "1",
          "fatturato": 3871373.63,
          "ordinato": 0
        },
        {
          "ditta": "2",
          "fatturato": 37155291.67000106,
          "ordinato": 0
        },
        {
          "ditta": "3",
          "fatturato": 2235052.6599999964,
          "ordinato": 0
        }
      ]
    }
  ]
}