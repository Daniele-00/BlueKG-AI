{
  "config": "specialist-llama3-coder",
  "approach": "specialist",
  "config_name": "llama3-coder",
  "timestamp": "20251020_230905",
  "summary": {
    "total": 29,
    "success_attendibile": 25,
    "success_strict": 25,
    "failures": 4,
    "accuracy": 86.20689655172413,
    "accuracy_strict": 86.20689655172413,
    "min_query_similarity": 0.8,
    "avg_time": 25.134246125592497,
    "avg_jaccard": 0.8571428571428571,
    "avg_query_similarity": 0.8728679329035981
  },
  "results": [
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST-31-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca i clienti con fatturato superiore a 50000 euro",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) \nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 \nWITH c, sum(dr.importo) AS fatturatoTotale \nWHERE fatturatoTotale > 50000 \nRETURN c.name AS cliente, fatturatoTotale \nORDER BY fatturatoTotale DESC",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH c, sum(dr.importo) AS fatturatoTotale WHERE fatturatoTotale > 50000 RETURN c.name AS cliente, fatturatoTotale ORDER BY fatturatoTotale DESC",
      "time_total": 26.549998756032437,
      "time_generation": 19.122381519991904,
      "time_db": 0.37709526997059584,
      "time_synthesis": 5.078305759932846,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "strict_success": true,
      "attendibile": true,
      "success_reason": "strict"
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST-32-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali sono i 3 prodotti pi\u00f9 venduti al cliente 'BARONE DI FERRANTE EZIO'?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente {name: 'BARONE DI FERRANTE EZIO'})-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN a.descrizione AS prodotto, sum(dr.importo) AS totaleVenduto\nORDER BY totaleVenduto DESC\nLIMIT 3",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(c.name)) = 'barone di ferrante ezio' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN a.descrizione AS prodotto, sum(dr.importo) AS totaleVenduto ORDER BY totaleVenduto DESC LIMIT 3",
      "time_total": 23.38597234664485,
      "time_generation": 18.822081387974322,
      "time_db": 0.2414759467355907,
      "time_synthesis": 1.9147460218518972,
      "jaccard_index": 1.0,
      "query_similarity": 0.8616352201257862,
      "strict_success": true,
      "attendibile": true,
      "success_reason": "strict"
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST-33-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali sono i 3 prodotti meno venduti al cliente 'BARONE DI FERRANTE EZIO'?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) \nWHERE toLower(trim(c.name)) = 'barone di ferrante ezio' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 \nRETURN a.descrizione AS prodotto, sum(dr.importo) AS totaleVenduto \nORDER BY totaleVenduto ASC LIMIT 3",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(c.name)) = 'barone di ferrante ezio' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN a.descrizione AS prodotto, sum(dr.importo) AS totaleVenduto ORDER BY totaleVenduto ASC LIMIT 3",
      "time_total": 22.709383627865463,
      "time_generation": 19.258292022626847,
      "time_db": 0.05555376596748829,
      "time_synthesis": 1.833307239226997,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "strict_success": true,
      "attendibile": true,
      "success_reason": "strict"
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST-34-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quanti fornitori appartengono a ciascun gruppo di fornitori?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(f:Fornitore) \nRETURN gf.ragioneSociale AS gruppo, count(f) AS numeroFornitori \nORDER BY numeroFornitori DESC",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(f:Fornitore) RETURN gf.ragioneSociale AS gruppo, count(f) AS numeroFornitori ORDER BY numeroFornitori DESC",
      "time_total": 25.04816055810079,
      "time_generation": 19.244261604268104,
      "time_db": 0.6100640427321196,
      "time_synthesis": 3.377384823281318,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "strict_success": true,
      "attendibile": true,
      "success_reason": "strict"
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST-35-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 l'importo minimo registrato in una singola riga di fattura di vendita?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN min(dr.importo) AS importoMinimo",
      "expected_cypher": "MATCH (dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN min(dr.importo) AS importoMinimo",
      "time_total": 32.78475782368332,
      "time_generation": 27.195277372840792,
      "time_db": 0.5233938270248473,
      "time_synthesis": 3.565988357178867,
      "jaccard_index": 1.0,
      "query_similarity": 0.7986348122866894,
      "strict_success": true,
      "attendibile": false,
      "success_reason": "strict"
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST-36-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 l'importo massimo registrato in una singola riga di fattura di vendita?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN max(dr.importo) AS importoMassimo",
      "expected_cypher": "MATCH (dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN max(dr.importo) AS importoMassimo",
      "time_total": 25.129736269824207,
      "time_generation": 21.964378824923187,
      "time_db": 0.4614360029809177,
      "time_synthesis": 1.1834084382280707,
      "jaccard_index": 1.0,
      "query_similarity": 0.8,
      "strict_success": true,
      "attendibile": true,
      "success_reason": "strict"
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST-37-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 la quantit\u00e0 media di articoli per riga nei documenti di acquisto?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nRETURN avg(dr.quantita) AS quantitaMediaAcquisto",
      "expected_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) RETURN avg(dr.quantita) AS quantitaMediaAcquisto",
      "time_total": 13.19725020462647,
      "time_generation": 10.227096512913704,
      "time_db": 0.1005362318828702,
      "time_synthesis": 1.544481426011771,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "strict_success": true,
      "attendibile": true,
      "success_reason": "strict"
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST-38-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quanti articoli unici sono presenti nel catalogo?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo) \nRETURN count(DISTINCT a) AS totaleArticoli",
      "expected_cypher": "MATCH (a:Articolo) RETURN count(DISTINCT a) AS totaleArticoli",
      "time_total": 12.15054659312591,
      "time_generation": 9.71839809929952,
      "time_db": 0.02554280497133732,
      "time_synthesis": 1.1924015930853784,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "strict_success": true,
      "attendibile": true,
      "success_reason": "strict"
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST-39-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca i clienti dell'azienda '1' situati nella provincia di 'PG'",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(c:Cliente)-[:HAS_ADDRESS]->(l:Luogo) WHERE toLower(trim(l.provincia)) = 'pg' RETURN c.name AS cliente ORDER BY cliente",
      "expected_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(c:Cliente)-[:HAS_ADDRESS]->(l:Luogo) WHERE toLower(trim(l.provincia)) = 'pg' RETURN c.name AS cliente ORDER BY cliente",
      "time_total": 16.30201930133626,
      "time_generation": 11.295711734332144,
      "time_db": 0.23537086509168148,
      "time_synthesis": 3.1438540029339492,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "strict_success": true,
      "attendibile": true,
      "success_reason": "strict"
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST-40-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Calcola il fatturato totale per il secondo trimestre del 2024 (aprile, maggio, giugno).",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) \nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 \nAND doc.dataEmissione.year = 2024 \nAND doc.dataEmissione.month IN [4, 5, 6] \nRETURN sum(dr.importo) AS fatturatoTrimestre",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year = 2024 AND doc.dataEmissione.month IN [4, 5, 6] RETURN sum(dr.importo) AS fatturatoTrimestre",
      "time_total": 35.86847222223878,
      "time_generation": 32.35761929769069,
      "time_db": 0.1366648431867361,
      "time_synthesis": 1.939678521361202,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "strict_success": true,
      "attendibile": true,
      "success_reason": "strict"
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST-41-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Trova tutti gli articoli la cui descrizione inizia con 'TUBO'",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo) WHERE toLower(trim(a.descrizione)) STARTS WITH 'tubo' RETURN a.descrizione AS articolo",
      "expected_cypher": "MATCH (a:Articolo) WHERE toLower(trim(a.descrizione)) STARTS WITH 'tubo' RETURN a.descrizione AS articolo",
      "time_total": 13.103719092905521,
      "time_generation": 8.711234283167869,
      "time_db": 0.12966737197712064,
      "time_synthesis": 2.9637373029254377,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "strict_success": true,
      "attendibile": true,
      "success_reason": "strict"
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST-42-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami i documenti di tipo 'FNA' ricevuti dal fornitore 'FORNITORE ESEMPIO SPA'",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore {ragioneSociale: 'FORNITORE ESEMPIO SPA'})-[:HA_EMESSO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType) WHERE dt.codice = 'FNA' RETURN doc.documentoid AS documento",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType) WHERE toLower(trim(gf.ragioneSociale)) = 'fornitore esempio spa' AND dt.codice = 'FNA' RETURN doc.documentoId AS documento",
      "time_total": 17.792149322107434,
      "time_generation": 14.234566647093743,
      "time_db": 0.15639469493180513,
      "time_synthesis": 1.6563238939270377,
      "jaccard_index": 1.0,
      "query_similarity": 0.5470459518599562,
      "strict_success": true,
      "attendibile": false,
      "success_reason": "strict"
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST-43-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi sono i 3 clienti con il fatturato pi\u00f9 basso?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) \nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 \nRETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale \nORDER BY fatturatoTotale ASC \nLIMIT 3",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale ASC LIMIT 3",
      "time_total": 30.459905427880585,
      "time_generation": 24.895186410751194,
      "time_db": 0.42705031810328364,
      "time_synthesis": 2.055392351001501,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "strict_success": true,
      "attendibile": true,
      "success_reason": "strict"
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST-44-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi sono i 3 clienti con il fatturato pi\u00f9 alto?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) \nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 \nRETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale \nORDER BY fatturatoTotale DESC \nLIMIT 3",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC LIMIT 3",
      "time_total": 29.52029362693429,
      "time_generation": 25.785142202861607,
      "time_db": 0.3632493820041418,
      "time_synthesis": 1.5292185680009425,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "strict_success": true,
      "attendibile": true,
      "success_reason": "strict"
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST-45-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali sono i 5 articoli con il costo totale di acquisto pi\u00f9 alto?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)\nRETURN a.descrizione AS articolo, sum(dr.importo) AS costoTotale\nORDER BY costoTotale DESC\nLIMIT 5",
      "expected_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) RETURN a.descrizione AS articolo, sum(dr.importo) AS costoTotale ORDER BY costoTotale DESC LIMIT 5",
      "time_total": 27.174152075778693,
      "time_generation": 22.51784532982856,
      "time_db": 0.22035551303997636,
      "time_synthesis": 2.985436480026692,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "strict_success": true,
      "attendibile": true,
      "success_reason": "strict"
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST-46-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali sono i 5 articoli con il costo totale di acquisto pi\u00f9 basso?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)\nRETURN a.descrizione AS articolo, sum(dr.importo) AS costoTotale\nORDER BY costoTotale ASC\nLIMIT 5",
      "expected_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) RETURN a.descrizione AS articolo, sum(dr.importo) AS costoTotale ORDER BY costoTotale ASC LIMIT 5",
      "time_total": 27.939363439101726,
      "time_generation": 23.832066950853914,
      "time_db": 0.21027741488069296,
      "time_synthesis": 2.2656467691995203,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "strict_success": true,
      "attendibile": true,
      "success_reason": "strict"
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST-47-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale fornitore ci vende la gamma pi\u00f9 ampia di articoli unici?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (f:Fornitore)-[:HA_EMESSO]->(doc:Documento)-[:CONTIENE_RIGA]->(r:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWITH f, count(DISTINCT a) AS totaleArticoli\nORDER BY totaleArticoli DESC\nRETURN f.ragioneSociale AS supplier, totaleArticoli AS numProducts\nLIMIT 1",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS varietaProdotti ORDER BY varietaProdotti DESC LIMIT 1",
      "time_total": 36.40326019702479,
      "time_generation": 32.953050057869405,
      "time_db": 0.26924960128962994,
      "time_synthesis": 1.7419542111456394,
      "jaccard_index": 0.0,
      "query_similarity": 0.06666666666666667,
      "strict_success": true,
      "attendibile": false,
      "success_reason": "strict"
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST-48-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale fornitore ci vende la gamma meno ampia di articoli unici?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (f:Fornitore)-[:HA_EMESSO]->(doc:Documento)-[:CONTIENE_RIGA]->(rd:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWITH f, count(DISTINCT a) AS num_articoli\nORDER BY num_articoli ASC\nLIMIT 1\nRETURN f.ragioneSociale AS supplier",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS varietaProdotti ORDER BY varietaProdotti ASC LIMIT 1",
      "time_total": 31.87315424392,
      "time_generation": 28.869474419392645,
      "time_db": 0.24760495498776436,
      "time_synthesis": 1.2935379310511053,
      "jaccard_index": 0.0,
      "query_similarity": 0.047619047619047616,
      "strict_success": false,
      "attendibile": false,
      "mismatch_missing": [
        {
          "fornitore": "10GTEK TRANSCEIVERS CO.LIMITED",
          "varietaProdotti": 1
        }
      ],
      "mismatch_extra": [
        {
          "supplier": "AMAZON EU S.A.R.L. 3 SUCURSAL EN ESPANA"
        }
      ]
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST-49-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Ordina le aziende in base al numero totale di documenti di vendita emessi.",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (f:Fornitore)-[:HA_EMESSO]->(doc:Documento)\nWITH f, count(doc) AS numeroDocumenti\nORDER BY numeroDocumenti DESC\nRETURN DISTINCT f.ragioneSociale AS fornitore, numeroDocumenti AS totaleDocumenti\nLIMIT 10",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento) RETURN d.dittaId AS ditta, count(doc) AS numeroDocumenti ORDER BY numeroDocumenti DESC",
      "time_total": 23.432492529973388,
      "time_generation": 18.132189837750047,
      "time_db": 0.14009282318875194,
      "time_synthesis": 3.3065639878623188,
      "jaccard_index": 0.0,
      "query_similarity": 0.5243243243243243,
      "strict_success": false,
      "attendibile": false,
      "mismatch_missing": [
        {
          "ditta": "3",
          "numeroDocumenti": 232
        },
        {
          "ditta": "4",
          "numeroDocumenti": 206
        },
        {
          "ditta": "2",
          "numeroDocumenti": 23914
        }
      ],
      "mismatch_extra": [
        {
          "fornitore": "ARCI SRL",
          "totaleDocumenti": 295
        },
        {
          "fornitore": "BEIJER REF ITALY SRL",
          "totaleDocumenti": 568
        },
        {
          "fornitore": "RIMEP SPA",
          "totaleDocumenti": 300
        }
      ]
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST-62-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Per ogni famiglia di prodotto, chi \u00e8 il cliente che ha generato il fatturato maggiore?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (fam:Famiglia)<-[:INCLUSA_IN]-(:Sottofamiglia)<-[:APPARTIENE_A]-(:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(c:Cliente)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH fam, c, sum(dr.importo) AS fatturato\nORDER BY fam.nome, fatturato DESC\nWITH fam, collect({cliente: c.name, fatturato: fatturato}) AS clientiOrdinati\nRETURN fam.nome AS famiglia, clientiOrdinati[0].cliente AS topCliente, clientiOrdinati[0].fatturato AS fatturatoMassimo",
      "expected_cypher": "MATCH (fam:Famiglia)<-[:INCLUSA_IN]-(:Sottofamiglia)<-[:APPARTIENE_A]-(:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(c:Cliente) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH fam, c, sum(dr.importo) AS fatturato ORDER BY fam.nome, fatturato DESC WITH fam, collect({cliente: c.name, fatturato: fatturato}) AS clientiOrdinati RETURN fam.nome AS famiglia, clientiOrdinati[0].cliente AS topCliente, clientiOrdinati[0].fatturato AS fatturatoMassimo",
      "time_total": 49.29085176484659,
      "time_generation": 38.630151556804776,
      "time_db": 2.5831038979813457,
      "time_synthesis": 6.727001563180238,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "strict_success": true,
      "attendibile": true,
      "success_reason": "strict"
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST-63-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Calcola il rapporto tra costo totale e fatturato totale per il prodotto 'GAS FREON SOLSTICE N40 R448A'",
      "success": false,
      "error": "API error 500: {'detail': \"Errore durante l'elaborazione: {code: Neo.ClientError.Statement.ArithmeticError} {message: / by zero}\"}",
      "generated_cypher": null,
      "expected_cypher": "MATCH (a:Articolo) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' OPTIONAL MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_acq:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) WITH a, sum(dr_acq.importo) AS costoTotale OPTIONAL MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_ven:RigaDocumento {tipoValore: 'Fatturato'})<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(:Cliente) WHERE dr_ven.importo > 0 WITH costoTotale, sum(dr_ven.importo) AS fatturatoTotale RETURN costoTotale, fatturatoTotale, (fatturatoTotale / costoTotale) AS rapporto",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST-64-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale provincia ha generato il volume di fatturato pi\u00f9 alto?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo)\nMATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN l.provincia AS provincia, sum(dr.importo) AS fatturatoTotale\nORDER BY fatturatoTotale DESC\nLIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo) MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN l.provincia AS provincia, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC LIMIT 1",
      "time_total": 24.201900196261704,
      "time_generation": 20.97993530612439,
      "time_db": 0.5007124678231776,
      "time_synthesis": 1.4075454738922417,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "strict_success": true,
      "attendibile": true,
      "success_reason": "strict"
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST-65-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale provincia ha generato il volume di fatturato pi\u00f9 basso?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo)\nMATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN l.provincia AS provincia, sum(dr.importo) AS fatturatoTotale\nORDER BY fatturatoTotale ASC\nLIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo) MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN l.provincia AS provincia, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale ASC LIMIT 1",
      "time_total": 24.3675254159607,
      "time_generation": 20.915552393067628,
      "time_db": 0.5172404609620571,
      "time_synthesis": 1.4965846170671284,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "strict_success": true,
      "attendibile": true,
      "success_reason": "strict"
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST-66-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Lista dei clienti il cui fatturato totale \u00e8 superiore al fatturato medio di tutti i clienti.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH count(DISTINCT c) AS totalCustomers, sum(dr.importo) AS totalRevenue WITH totalRevenue / totalCustomers AS avgRevenue MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH c, sum(dr.importo) AS customerRevenue, avgRevenue WHERE customerRevenue > avgRevenue RETURN c.name AS cliente, customerRevenue ORDER BY customerRevenue DESC",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH count(DISTINCT c) AS totalCustomers, sum(dr.importo) AS totalRevenue WITH totalRevenue / totalCustomers AS avgRevenue MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH c, sum(dr.importo) AS customerRevenue, avgRevenue WHERE customerRevenue > avgRevenue RETURN c.name AS cliente, customerRevenue ORDER BY customerRevenue DESC",
      "time_total": 29.528809554409236,
      "time_generation": 24.854499846696854,
      "time_db": 1.0045679090544581,
      "time_synthesis": 2.282152391038835,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "strict_success": true,
      "attendibile": true,
      "success_reason": "strict"
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST-67-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami il numero di documenti per ciascun tipo (codice).",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType) \nRETURN dt.codice AS tipoDocumento, count(doc) AS numeroDocumenti \nORDER BY numeroDocumenti DESC",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType) RETURN dt.codice AS tipoDocumento, count(doc) AS numeroDocumenti ORDER BY numeroDocumenti DESC",
      "time_total": 20.78698131116107,
      "time_generation": 15.895915617700666,
      "time_db": 0.11536182509735227,
      "time_synthesis": 3.3198689511045814,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "strict_success": true,
      "attendibile": true,
      "success_reason": "strict"
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST-68-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il fatturato totale associato ai documenti di tipo 'FVC'?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'FVC'})\nMATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN sum(dr.importo) AS fatturatoFVC",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'FVC'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN sum(dr.importo) AS fatturatoFVC",
      "time_total": 26.10206644795835,
      "time_generation": 22.698832443915308,
      "time_db": 0.39765369333326817,
      "time_synthesis": 1.4147584158927202,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "strict_success": true,
      "attendibile": true,
      "success_reason": "strict"
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST-69-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale cliente ha ricevuto il maggior numero di note di credito (codice 'NCC')?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'NCC'})\nRETURN c.name AS cliente, count(doc) AS numeroNoteCredito\nORDER BY numeroNoteCredito DESC\nLIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'NCC'}) RETURN c.name AS cliente, count(doc) AS numeroNoteCredito ORDER BY numeroNoteCredito DESC LIMIT 1",
      "time_total": 26.426783362869173,
      "time_generation": 23.29131347266957,
      "time_db": 0.08845653710886836,
      "time_synthesis": 1.5886107827536762,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "strict_success": true,
      "attendibile": true,
      "success_reason": "strict"
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST-70-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Calcola il valore medio di un documento per ciascun tipo (considerando solo il fatturato).",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH c, doc, sum(dr.importo) AS valoreDocumento\nRETURN c.name AS cliente, avg(valoreDocumento) AS valoreMedio\nORDER BY valoreMedio DESC",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH dt, doc, sum(dr.importo) AS valoreDocumento RETURN dt.codice AS tipoDocumento, avg(valoreDocumento) AS valoreMedio ORDER BY valoreMedio DESC",
      "time_total": 27.908449474722147,
      "time_generation": 21.49289870588109,
      "time_db": 0.6507316422648728,
      "time_synthesis": 3.955724922940135,
      "jaccard_index": 0.0,
      "query_similarity": 0.7943760984182777,
      "strict_success": false,
      "attendibile": false,
      "mismatch_missing": [
        {
          "tipoDocumento": "NCC",
          "valoreMedio": 2662.121951219513
        },
        {
          "tipoDocumento": "FVC",
          "valoreMedio": 2511.581093866322
        },
        {
          "tipoDocumento": "NDC",
          "valoreMedio": 6835.246666666666
        }
      ],
      "mismatch_extra": [
        {
          "cliente": "URBANI SRL",
          "valoreMedio": 1350.5
        },
        {
          "cliente": "COMMERCIALE SAN VALENTINO SAS DI GATTINI RENZO & C.",
          "valoreMedio": 706.484
        },
        {
          "cliente": "GBJ SRL",
          "valoreMedio": 2156.36
        }
      ]
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST-71-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi \u00e8 il cliente con il fatturato pi\u00f9 alto?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) \nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 \nRETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale \nORDER BY fatturatoTotale DESC \nLIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC LIMIT 1",
      "time_total": 29.454982454888523,
      "time_generation": 25.922150667291135,
      "time_db": 0.41674852278083563,
      "time_synthesis": 1.5047768987715244,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "strict_success": true,
      "attendibile": true,
      "success_reason": "strict"
    }
  ]
}