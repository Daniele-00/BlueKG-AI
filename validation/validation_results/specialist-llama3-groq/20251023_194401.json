{
  "config": "specialist-llama3-groq",
  "approach": "specialist",
  "config_name": "llama3-groq",
  "timestamp": "20251023_194401",
  "examples_top_k": 2,
  "summary": {
    "total": 106,
    "success_strict": 78,
    "success_similarity": 84,
    "success_jaccard": 77,
    "failures": 28,
    "accuracy": 73.58490566037736,
    "accuracy_strict": 73.58490566037736,
    "accuracy_similarity": 79.24528301886792,
    "accuracy_jaccard": 72.64150943396226,
    "min_query_similarity": 0.8,
    "min_jaccard": 0.8,
    "avg_time": 3.0989807840955073,
    "avg_jaccard": 0.747683181056768,
    "avg_query_similarity": 0.8802593594530409
  },
  "results": [
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-01-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il fatturato totale del cliente BARONE DI FERRANTE EZIO?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE toLower(trim(c.name)) = 'barone di ferrante ezio' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN sum(dr.importo) AS totale",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE toLower(trim(c.name)) = 'barone di ferrante ezio' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN sum(dr.importo) AS fatturatoTotale",
      "time_total": 3.66386245097965,
      "time_generation": 1.3082045083865523,
      "time_db": 0.6422252380289137,
      "time_synthesis": 0.8690980169922113,
      "jaccard_index": 1.0,
      "query_similarity": 0.9758241758241758,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-02-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi \u00e8 il cliente con il maggior fatturato?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN c.name AS cliente, sum(dr.importo) AS fatturato\nORDER BY fatturato DESC\nLIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC LIMIT 1",
      "time_total": 3.0255249170586467,
      "time_generation": 1.123638420831412,
      "time_db": 0.527307593729347,
      "time_synthesis": 0.7984083062037826,
      "jaccard_index": 1.0,
      "query_similarity": 0.9737991266375546,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-03-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca i 5 clienti che hanno fatturato di pi\u00f9 che si trovano a Perugia",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo)\nWHERE toLower(trim(l.localita)) = 'perugia'\nMATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale\nORDER BY fatturatoTotale DESC\nLIMIT 5",
      "expected_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo) WHERE toLower(trim(l.localita)) = 'perugia' MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC LIMIT 5",
      "time_total": 3.0429543713107705,
      "time_generation": 1.5445311786606908,
      "time_db": 0.2922414098866284,
      "time_synthesis": 0.7802686700597405,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-04-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami i 5 prodotti pi\u00f9 popolari in termini di quantit\u00e0 venduta",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nRETURN a.descrizione AS prodotto, sum(dr.quantita) AS quantitaTotale\nORDER BY quantitaTotale DESC\nLIMIT 5",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN a.descrizione AS prodotto, sum(dr.quantita) AS quantitaTotale ORDER BY quantitaTotale DESC LIMIT 5",
      "time_total": 2.7797587267123163,
      "time_generation": 1.1655607451684773,
      "time_db": 0.46193686593323946,
      "time_synthesis": 0.7148669539019465,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-05-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami i 5 prodotti meno popolari in termini di quantit\u00e0 venduta",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nRETURN a.descrizione AS prodotto, sum(dr.quantita) AS quantitaTotale\nORDER BY quantitaTotale ASC\nLIMIT 5",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN a.descrizione AS prodotto, sum(dr.quantita) AS quantitaTotale ORDER BY quantitaTotale ASC LIMIT 5",
      "time_total": 3.094012166839093,
      "time_generation": 1.1444119783118367,
      "time_db": 0.6357704573310912,
      "time_synthesis": 0.887869615573436,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-06-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Dimmi il fatturato di ogni ditta.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN d.dittaId AS ditta, sum(dr.importo) AS fatturato\nORDER BY fatturato DESC",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN d.dittaId AS ditta, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC",
      "time_total": 3.1319269658997655,
      "time_generation": 1.3283763700164855,
      "time_db": 0.629870664793998,
      "time_synthesis": 0.6664198241196573,
      "jaccard_index": 1.0,
      "query_similarity": 0.9738430583501007,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-07-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Il fatturato di ogni ditta, nel loro anno migliore",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH d, doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoAnnuale\nORDER BY d.dittaId, fatturatoAnnuale DESC\nWITH d, collect({anno: anno, fatturato: fatturatoAnnuale}) AS fatturatiOrdinati\nRETURN d.dittaId AS ditta, fatturatiOrdinati[0].anno AS annoMigliore, fatturatiOrdinati[0].fatturato AS fatturatoMassimo",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH d, doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoAnnuale ORDER BY d.dittaId, fatturatoAnnuale DESC WITH d, collect({anno: anno, fatturato: fatturatoAnnuale}) AS fatturatiOrdinati RETURN d.dittaId AS ditta, fatturatiOrdinati[0].anno AS annoTop, fatturatiOrdinati[0].fatturato AS fatturatoMassimo",
      "time_total": 3.444679214153439,
      "time_generation": 1.419396058190614,
      "time_db": 0.5844552940689027,
      "time_synthesis": 0.9100128738209605,
      "jaccard_index": 1.0,
      "query_similarity": 0.9885773624091381,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-08-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Il fatturato di ogni ditta, nel loro anno peggiore",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH d, doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoAnnuale\nORDER BY d.dittaId, fatturatoAnnuale ASC\nWITH d, collect({anno: anno, fatturato: fatturatoAnnuale}) AS fatturatiOrdinati\nRETURN d.dittaId AS ditta, fatturatiOrdinati[0].anno AS annoPeggiore, fatturatiOrdinati[0].fatturato AS fatturatoMinimo",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH d, doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoAnnuale ORDER BY d.dittaId, fatturatoAnnuale ASC WITH d, collect({anno: anno, fatturato: fatturatoAnnuale}) AS fatturatiOrdinati RETURN d.dittaId AS ditta, fatturatiOrdinati[0].anno AS annoTop, fatturatiOrdinati[0].fatturato AS fatturatoMassimo",
      "time_total": 3.877179190982133,
      "time_generation": 1.6328753237612545,
      "time_db": 0.7064333339221776,
      "time_synthesis": 0.8736572880297899,
      "jaccard_index": 1.0,
      "query_similarity": 0.9770833333333333,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-09-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 la famiglia di prodotti pi\u00f9 acquistata?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(f:Famiglia)\nRETURN f.nome AS famiglia, sum(dr.quantita) AS quantitaTotale\nORDER BY quantitaTotale DESC\nLIMIT 1",
      "expected_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)-[:APPARTIENE_A]->(sf:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia) RETURN fam.nome AS famiglia, sum(dr.quantita) AS quantitaTotale ORDER BY quantitaTotale DESC LIMIT 1",
      "time_total": 2.679878498893231,
      "time_generation": 1.0083842622116208,
      "time_db": 0.3687447286210954,
      "time_synthesis": 0.8509515020996332,
      "jaccard_index": 1.0,
      "query_similarity": 0.9893238434163701,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-10-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 la famiglia di prodotti meno acquistata?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(f:Famiglia)\nRETURN f.nome AS famiglia, sum(dr.quantita) AS quantitaTotale\nORDER BY quantitaTotale ASC\nLIMIT 1",
      "expected_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)-[:APPARTIENE_A]->(sf:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia) RETURN fam.nome AS famiglia, sum(dr.quantita) AS quantitaTotale ORDER BY quantitaTotale ASC LIMIT 1",
      "time_total": 2.9162958483211696,
      "time_generation": 1.130777606740594,
      "time_db": 0.43990735802799463,
      "time_synthesis": 0.8845747886225581,
      "jaccard_index": 1.0,
      "query_similarity": 0.9892857142857143,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-11-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il prodotto pi\u00f9 venduto in generale (per valore)?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN a.descrizione AS prodotto, sum(dr.importo) AS valoreVenduto\nORDER BY valoreVenduto DESC\nLIMIT 1",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN a.descrizione AS prodotto, sum(dr.importo) AS valoreVenduto ORDER BY valoreVenduto DESC LIMIT 1",
      "time_total": 3.569630142301321,
      "time_generation": 1.7153786891140044,
      "time_db": 0.4442277420312166,
      "time_synthesis": 0.8314468092285097,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-12-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il prodotto meno venduto in generale (per valore)?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN a.descrizione AS prodotto, sum(dr.importo) AS valoreVenduto\nORDER BY valoreVenduto ASC\nLIMIT 1",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN a.descrizione AS prodotto, sum(dr.importo) AS valoreVenduto ORDER BY valoreVenduto ASC LIMIT 1",
      "time_total": 2.9183584791608155,
      "time_generation": 1.0954621168784797,
      "time_db": 0.4862951310351491,
      "time_synthesis": 0.8317567254416645,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-13-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "A quanto ho acquistato il prodotto GAS FREON SOLSTICE N40 R448A?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(doc:Documento)<-[:HA_EMESSO]-(:Fornitore)\nWHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a'\nRETURN doc.dataEmissione AS dataAcquisto",
      "expected_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' RETURN sum(dr.importo) AS costoTotaleAcquisto",
      "time_total": 3.0648273271508515,
      "time_generation": 1.2782206106930971,
      "time_db": 0.3991594733670354,
      "time_synthesis": 0.8244079309515655,
      "jaccard_index": 0.0,
      "query_similarity": 0.8956521739130435,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "costoTotaleAcquisto": 578501.2
        }
      ],
      "mismatch_extra": [
        {
          "dataAcquisto": "2022-09-12"
        },
        {
          "dataAcquisto": "2022-01-26"
        },
        {
          "dataAcquisto": "2022-05-25"
        }
      ]
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-14-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "A quanto l'ho venduto il prodotto GAS FREON SOLSTICE N40 R448A?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN sum(dr.importo) AS totaleVenduto",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN sum(dr.importo) AS totaleVenduto",
      "time_total": 2.755399347282946,
      "time_generation": 1.044771445915103,
      "time_db": 0.41026910580694675,
      "time_synthesis": 0.7955463170073926,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-15-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Situazione attuale della ditta '2'",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta {dittaId: '2'})<-[:APPARTIENE_A]-(c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year IN [date().year, date().year - 1]\nRETURN doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoAnnuale\nORDER BY anno DESC",
      "expected_cypher": "MATCH (d:Ditta {dittaId: '2'})<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year IN [date().year, date().year - 1] RETURN doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoAnnuale ORDER BY anno DESC",
      "time_total": 4.4071519817225635,
      "time_generation": 1.76553645869717,
      "time_db": 0.4656436941586435,
      "time_synthesis": 1.6195879359729588,
      "jaccard_index": 1.0,
      "query_similarity": 0.9985096870342772,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-16-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali ditte vendono prodotti della famiglia 'CENTRALI FRIGO'?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (f:Famiglia)<-[:INCLUSA_IN]-(:Sottofamiglia)<-[:APPARTIENE_A]-(a:Articolo)\nWHERE toLower(trim(f.nome)) = 'centrali frigo'\nWITH a\nMATCH (a)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia)\nWITH a, fam\nMATCH (d:Documento)-[:CONTIENE_RIGA]->(rd:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a)\nWITH d, a, fam\nMATCH (d)<-[:HA_EMESSO]-(forn:Fornitore)\nWITH forn, a, fam\nMATCH (forn)-[:APPARTIENE_A]->(ditta:Ditta)\nRETURN DISTINCT ditta.dittaId AS ditta\nORDER BY ditta\nLIMIT 20",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia) WHERE toLower(trim(fam.nome)) = 'centrali frigo' RETURN DISTINCT d.dittaId AS ditta ORDER BY ditta",
      "time_total": 4.860783896874636,
      "time_generation": 1.7294677733443677,
      "time_db": 1.9096336555667222,
      "time_synthesis": 0.792024755384773,
      "jaccard_index": 0.6666666666666666,
      "query_similarity": 0.35994930291508237,
      "specialist": "GENERAL_QUERY",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": 2,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "ditta": "4"
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-17-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quanti clienti unici ha la ditta '1'?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(c:Cliente)\nRETURN count(DISTINCT c) AS numeroClientiUnici",
      "expected_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(c:Cliente) RETURN count(DISTINCT c) AS numeroClientiUnici",
      "time_total": 2.4274240350350738,
      "time_generation": 0.8278732327744365,
      "time_db": 0.012252745218575,
      "time_synthesis": 0.9807975352741778,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "DITTE_QUERY",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-18-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale fornitore ci ha inviato pi\u00f9 documenti?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(f:Fornitore)-[:HA_EMESSO]->(doc:Documento)\nRETURN gf.ragioneSociale AS fornitore, count(DISTINCT doc) AS numeroDocumenti\nORDER BY numeroDocumenti DESC\nLIMIT 1",
      "expected_cypher": "MATCH (f:Fornitore)-[:HA_EMESSO]->(doc:Documento) RETURN f.ragioneSociale AS fornitore, count(doc) AS numeroDocumenti ORDER BY numeroDocumenti DESC LIMIT 1",
      "time_total": 3.011047233827412,
      "time_generation": 1.6275009182281792,
      "time_db": 0.044763946905732155,
      "time_synthesis": 0.734950038138777,
      "jaccard_index": 1.0,
      "query_similarity": 0.8429752066115702,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-19-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca 5 clienti che non hanno mai acquistato il prodotto 'GAS FREON SOLSTICE N40 R448A'",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo) \nWHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a'\nWITH a\nMATCH (c:Cliente)\nWHERE NOT (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a)\nRETURN c.name AS cliente\nORDER BY cliente\nLIMIT 5",
      "expected_cypher": "MATCH (a:Articolo) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' WITH a MATCH (c:Cliente) WHERE NOT (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a) RETURN c.name AS cliente ORDER BY cliente LIMIT 5",
      "time_total": 2.9003152837976813,
      "time_generation": 1.3078612717799842,
      "time_db": 0.33855886198580265,
      "time_synthesis": 0.7150768931023777,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-20-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 la localit\u00e0 con il maggior numero di fornitori?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (f:Fornitore)-[:SI_TROVA_A]->(l:Luogo)\nWHERE l.localita IS NOT NULL\nRETURN l.localita AS localita, count(DISTINCT f) AS numeroFornitori\nORDER BY numeroFornitori DESC\nLIMIT 1",
      "expected_cypher": "MATCH (f:Fornitore)-[:SI_TROVA_A]->(l:Luogo) WHERE l.localita IS NOT NULL RETURN l.localita AS localita, count(DISTINCT f) AS numeroFornitori ORDER BY numeroFornitori DESC LIMIT 1",
      "time_total": 2.6086755553260446,
      "time_generation": 1.3142407410778105,
      "time_db": 0.018314420711249113,
      "time_synthesis": 0.8043045299127698,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "GENERAL_QUERY",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-21-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 l'importo medio per riga documento nelle fatture di vendita?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN avg(dr.importo) AS media",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN avg(dr.importo) AS importoMedioRiga",
      "time_total": 3.5803411309607327,
      "time_generation": 1.7970515387132764,
      "time_db": 0.35050791688263416,
      "time_synthesis": 0.8837059680372477,
      "jaccard_index": 1.0,
      "query_similarity": 0.9681159420289855,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-22-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami 10 documenti di tipo 'FVC' emessi a Gennaio 2025 al cliente 'L'ABBONDANZA SRL'",
      "success": false,
      "error": "API error 500: {'detail': 'Errore durante l\\'elaborazione: {code: Neo.ClientError.Statement.SyntaxError} {message: Expression in WITH must be aliased (use AS) (line 3, column 39 (offset: 252))\\n\"WITH ",
      "generated_cypher": null,
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType) WHERE toLower(trim(c.name)) = 'l\\'abbondanza srl' AND dt.codice = 'FVC' AND doc.dataEmissione.year = 2025 AND doc.dataEmissione.month = 1 RETURN doc.documentoId AS documento LIMIT 10",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": null,
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": 2,
      "success_reason": null
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-23-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il margine di profitto del prodotto 'GAS FREON SOLSTICE N40 R448A'?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr1:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' AND dr1.tipoValore = 'Fatturato' AND dr1.importo > 0\nWITH a, sum(dr1.importo) AS fatturato\nMATCH (f:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr2:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a)\nWITH a, fatturato, sum(dr2.importo) AS costo\nRETURN a.descrizione AS prodotto, fatturato, costo, (fatturato - costo) AS margine, ((fatturato - costo) / fatturato) * 100 AS marginePercentuale",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr1:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' AND dr1.tipoValore = 'Fatturato' AND dr1.importo > 0 WITH a, sum(dr1.importo) AS fatturato MATCH (f:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr2:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a) WITH a, fatturato, sum(dr2.importo) AS costo RETURN a.descrizione AS prodotto, fatturato, costo, (fatturato - costo) AS margine",
      "time_total": 3.580132514704019,
      "time_generation": 1.4297097530215979,
      "time_db": 0.830913595855236,
      "time_synthesis": 0.8626255872659385,
      "jaccard_index": 0.0,
      "query_similarity": 0.9425706472196901,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-24-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali fornitori ci forniscono prodotti venduti al cliente 'BARONE DI FERRANTE EZIO'?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE toLower(trim(c.name)) = 'barone di ferrante ezio'\nWITH collect(DISTINCT a) AS articoliVenduti\nMATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a)\nWHERE a IN articoliVenduti\nRETURN DISTINCT gf.ragioneSociale AS fornitore\nORDER BY fornitore",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(c.name)) = 'barone di ferrante ezio' WITH collect(DISTINCT a) AS articoliVenduti MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a) WHERE a IN articoliVenduti RETURN DISTINCT gf.ragioneSociale AS fornitore ORDER BY fornitore",
      "time_total": 2.874998759943992,
      "time_generation": 1.4695962420664728,
      "time_db": 0.2714829142205417,
      "time_synthesis": 0.6298601157031953,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-25-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca 5 prodotti che abbiamo venduto ma mai acquistato",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE NOT EXISTS {\n  MATCH (a)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)\n}\nRETURN DISTINCT a.descrizione AS prodotto\nORDER BY prodotto\nLIMIT 5",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE NOT EXISTS { MATCH (a)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) } RETURN DISTINCT a.descrizione AS prodotto ORDER BY prodotto LIMIT 5",
      "time_total": 2.81471402477473,
      "time_generation": 1.1782563929446042,
      "time_db": 0.31655639922246337,
      "time_synthesis": 0.7478877268731594,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-26-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca 5 prodotti che abbiamo acquistato ma mai venduto",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)\nWHERE NOT (a)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento {tipoValore: 'Fatturato'})\nRETURN DISTINCT a.descrizione AS prodottoMaiVenduto\nORDER BY prodottoMaiVenduto\nLIMIT 5",
      "expected_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)\nWHERE NOT (a)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento {tipoValore: 'Fatturato'})\nRETURN DISTINCT a.descrizione AS prodottoMaiVenduto\nORDER BY prodottoMaiVenduto\nLIMIT 5",
      "time_total": 2.576003503985703,
      "time_generation": 1.0272666467353702,
      "time_db": 0.22738498309627175,
      "time_synthesis": 0.7911514369770885,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-27-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il fatturato della sottofamiglia 'COMPRESSORI SEMIERMETICI'?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(:Articolo)-[:APPARTIENE_A]->(sf:Sottofamiglia)\nWHERE toLower(trim(sf.nome)) = 'compressori semiermetici' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN sum(dr.importo) AS totale",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(:Articolo)-[:APPARTIENE_A]->(sf:Sottofamiglia) WHERE toLower(trim(sf.nome)) = 'compressori semiermetici' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN sum(dr.importo) AS fatturatoSottofamiglia",
      "time_total": 3.3177531477995217,
      "time_generation": 1.1451424262486398,
      "time_db": 0.8399005439132452,
      "time_synthesis": 0.741488064173609,
      "jaccard_index": 1.0,
      "query_similarity": 0.9537953795379538,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-28-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca le sottofamiglie della famiglia 'CENTRALI FRIGO'",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (f:Famiglia)<-[:INCLUSA_IN]-(sf:Sottofamiglia) \nWHERE toLower(trim(f.nome)) = 'centrali frigo' \nRETURN DISTINCT sf.nome AS sottofamiglia \nORDER BY sottofamiglia",
      "expected_cypher": "MATCH (f:Famiglia)<-[:INCLUSA_IN]-(sf:Sottofamiglia) WHERE toLower(trim(f.nome)) = 'centrali frigo' RETURN DISTINCT sf.nome AS sottofamiglia ORDER BY sottofamiglia",
      "time_total": 1.8908083830028772,
      "time_generation": 0.6614297130145133,
      "time_db": 0.008782740216702223,
      "time_synthesis": 0.7113134600222111,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "GENERAL_QUERY",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-29-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il fatturato del primo trimestre 2024?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 \nAND doc.dataEmissione.year = 2024 \nAND doc.dataEmissione.month >= 1 AND doc.dataEmissione.month <= 3\nRETURN sum(dr.importo) AS totale",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year = 2024 AND doc.dataEmissione.month >= 1 AND doc.dataEmissione.month <= 3 RETURN sum(dr.importo) AS fatturatoTrimestre",
      "time_total": 2.7509103901684284,
      "time_generation": 1.248855225276202,
      "time_db": 0.26805145805701613,
      "time_synthesis": 0.8112520216964185,
      "jaccard_index": 1.0,
      "query_similarity": 0.9568345323741008,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-30-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il fatturato tra Gennaio 2024 e Marzo 2024?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 \nAND doc.dataEmissione >= date('2024-01-01') AND doc.dataEmissione <= date('2024-03-31')\nRETURN sum(dr.importo) AS totale",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione >= date('2024-01-01') AND doc.dataEmissione <= date('2024-03-31') RETURN sum(dr.importo) AS fatturatoPeriodo",
      "time_total": 2.618418265134096,
      "time_generation": 1.105270927771926,
      "time_db": 0.20173420663923025,
      "time_synthesis": 0.7285323250107467,
      "jaccard_index": 1.0,
      "query_similarity": 0.9584905660377359,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-31-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca i clienti con fatturato superiore a 50000 euro",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH c, sum(dr.importo) AS fatturatoTotale\nWHERE fatturatoTotale > 50000\nRETURN c.name AS cliente, fatturatoTotale\nORDER BY fatturatoTotale DESC",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH c, sum(dr.importo) AS fatturatoTotale WHERE fatturatoTotale > 50000 RETURN c.name AS cliente, fatturatoTotale ORDER BY fatturatoTotale DESC",
      "time_total": 3.256405308842659,
      "time_generation": 1.4257023138925433,
      "time_db": 0.40800765017047524,
      "time_synthesis": 0.9147821166552603,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-32-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali sono i 3 prodotti pi\u00f9 venduti al cliente 'BARONE DI FERRANTE EZIO'?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE toLower(trim(c.name)) = 'barone di ferrante ezio' \nRETURN a.descrizione AS prodotto, sum(dr.quantita) AS quantitaVenduta\nORDER BY quantitaVenduta DESC\nLIMIT 3",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(c.name)) = 'barone di ferrante ezio' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN a.descrizione AS prodotto, sum(dr.importo) AS totaleVenduto ORDER BY totaleVenduto DESC LIMIT 3",
      "time_total": 2.865522215142846,
      "time_generation": 1.2927603889256716,
      "time_db": 0.045049908105283976,
      "time_synthesis": 1.0074087493121624,
      "jaccard_index": 0.0,
      "query_similarity": 0.6819672131147541,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": 2,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "prodotto": "Articolo placeholder: ID_NON_DISPONIBILE",
          "totaleVenduto": 1557.38
        }
      ],
      "mismatch_extra": [
        {
          "prodotto": "Articolo placeholder: ID_NON_DISPONIBILE",
          "quantitaVenduta": 1.0
        }
      ]
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-33-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali sono i 3 prodotti meno venduti al cliente 'BARONE DI FERRANTE EZIO'?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE toLower(trim(c.name)) = 'barone di ferrante ezio'\nRETURN a.descrizione AS prodotto, sum(dr.quantita) AS quantitaVenduta\nORDER BY quantitaVenduta ASC\nLIMIT 3",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(c.name)) = 'barone di ferrante ezio' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN a.descrizione AS prodotto, sum(dr.importo) AS totaleVenduto ORDER BY totaleVenduto ASC LIMIT 3",
      "time_total": 2.870020921807736,
      "time_generation": 1.487604798283428,
      "time_db": 0.015749095007777214,
      "time_synthesis": 0.9074150240048766,
      "jaccard_index": 0.0,
      "query_similarity": 0.680921052631579,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": 2,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "prodotto": "Articolo placeholder: ID_NON_DISPONIBILE",
          "totaleVenduto": 1557.38
        }
      ],
      "mismatch_extra": [
        {
          "prodotto": "Articolo placeholder: ID_NON_DISPONIBILE",
          "quantitaVenduta": 1.0
        }
      ]
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-34-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quanti fornitori appartengono a ciascun gruppo di fornitori?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(f:Fornitore)\nRETURN gf.ragioneSociale AS gruppo, count(DISTINCT f) AS numeroFornitori\nORDER BY numeroFornitori DESC",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(f:Fornitore) RETURN gf.ragioneSociale AS gruppo, count(f) AS numeroFornitori ORDER BY numeroFornitori DESC",
      "time_total": 3.725267756264657,
      "time_generation": 1.3519179043360054,
      "time_db": 0.7926872889511287,
      "time_synthesis": 0.9684633300639689,
      "jaccard_index": 1.0,
      "query_similarity": 0.9719626168224299,
      "specialist": "DITTE_QUERY",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-35-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 l'importo minimo registrato in una singola riga di fattura di vendita?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN min(dr.importo) AS importoMinimo",
      "expected_cypher": "MATCH (dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN min(dr.importo) AS importoMinimo",
      "time_total": 2.72454433189705,
      "time_generation": 1.0043056132271886,
      "time_db": 0.3248509559780359,
      "time_synthesis": 0.7540644193068147,
      "jaccard_index": 1.0,
      "query_similarity": 0.8013698630136986,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-36-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 l'importo massimo registrato in una singola riga di fattura di vendita?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (dr:RigaDocumento) \nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 \nRETURN max(dr.importo) AS importoMassimo",
      "expected_cypher": "MATCH (dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN max(dr.importo) AS importoMassimo",
      "time_total": 2.364389270078391,
      "time_generation": 0.8998900228179991,
      "time_db": 0.11347434157505631,
      "time_synthesis": 0.9191743582487106,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-37-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 la quantit\u00e0 media di articoli per riga nei documenti di acquisto?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nRETURN avg(dr.quantita) AS media",
      "expected_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) RETURN avg(dr.quantita) AS quantitaMediaAcquisto",
      "time_total": 2.4391917707398534,
      "time_generation": 0.850570309907198,
      "time_db": 0.11923887999728322,
      "time_synthesis": 0.9610400940291584,
      "jaccard_index": 1.0,
      "query_similarity": 0.926829268292683,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-38-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quanti articoli unici sono presenti nel catalogo?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo) \nRETURN count(DISTINCT a.productId) AS totaleArticoli",
      "expected_cypher": "MATCH (a:Articolo) RETURN count(DISTINCT a) AS totaleArticoli",
      "time_total": 2.5002578319981694,
      "time_generation": 1.365306509193033,
      "time_db": 0.08222143584862351,
      "time_synthesis": 0.6314766742289066,
      "jaccard_index": 1.0,
      "query_similarity": 0.9242424242424242,
      "specialist": "GENERAL_QUERY",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-39-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca i clienti dell'azienda '1' situati nella provincia di 'PG'",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(c:Cliente)-[:HAS_ADDRESS]->(l:Luogo) \nWHERE toLower(trim(l.provincia)) = 'pg' \nRETURN DISTINCT c.name AS cliente \nORDER BY cliente",
      "expected_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(c:Cliente)-[:HAS_ADDRESS]->(l:Luogo) WHERE toLower(trim(l.provincia)) = 'pg' RETURN c.name AS cliente ORDER BY cliente",
      "time_total": 2.8482158011756837,
      "time_generation": 1.0310993581078947,
      "time_db": 0.2601481401361525,
      "time_synthesis": 0.9657115861773491,
      "jaccard_index": 1.0,
      "query_similarity": 0.9737609329446064,
      "specialist": "GENERAL_QUERY",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [],
      "mismatch_extra": []
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-40-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Calcola il fatturato totale per il secondo trimestre del 2024 (aprile, maggio, giugno).",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 \nAND doc.dataEmissione.year = 2024 \nAND doc.dataEmissione.month IN [4, 5, 6]\nRETURN sum(dr.importo) AS totale",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year = 2024 AND doc.dataEmissione.month IN [4, 5, 6] RETURN sum(dr.importo) AS fatturatoTrimestre",
      "time_total": 2.8593073822557926,
      "time_generation": 1.0989376497454941,
      "time_db": 0.2550185788422823,
      "time_synthesis": 0.9217868098057806,
      "jaccard_index": 1.0,
      "query_similarity": 0.9523809523809523,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-41-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Trova tutti gli articoli la cui descrizione inizia con 'TUBO'",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (a:Articolo) \nWHERE toLower(trim(a.descrizione)) STARTS WITH 'tubo' \nRETURN DISTINCT a.descrizione AS articolo \nORDER BY articolo \nLIMIT 20",
      "expected_cypher": "MATCH (a:Articolo) WHERE toLower(trim(a.descrizione)) STARTS WITH 'tubo' RETURN a.descrizione AS articolo",
      "time_total": 2.204832120332867,
      "time_generation": 0.8333557629957795,
      "time_db": 0.08524186676368117,
      "time_synthesis": 0.8627254697494209,
      "jaccard_index": 0.0711743772241993,
      "query_similarity": 0.8536585365853658,
      "specialist": "GENERAL_QUERY",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "articolo": "TUBO RAME CAPIL.D.1,08-2,3"
        },
        {
          "articolo": "TUBO RAME RIC.D.25-28"
        },
        {
          "articolo": "TUBO SCARICO COND.PVC-10X SI1820/05"
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-42-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami i documenti di tipo 'FNA' ricevuti dal fornitore 'FORNITORE ESEMPIO SPA'",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (f:Fornitore)-[:HA_EMESSO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType)\nWHERE toLower(trim(f.ragioneSociale)) = 'fornitore esempio spa' AND dt.nome = 'FNA'\nRETURN DISTINCT doc.documentoId AS documento\nORDER BY documento\nLIMIT 10",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType) WHERE toLower(trim(gf.ragioneSociale)) = 'fornitore esempio spa' AND dt.codice = 'FNA' RETURN doc.documentoId AS documento",
      "time_total": 3.430325055960566,
      "time_generation": 2.1686428589746356,
      "time_db": 0.008004113100469112,
      "time_synthesis": 0.7437511538155377,
      "jaccard_index": 1.0,
      "query_similarity": 0.7829787234042553,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": false,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-43-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi sono i 3 clienti con il fatturato pi\u00f9 basso?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale\nORDER BY fatturatoTotale ASC\nLIMIT 3",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale ASC LIMIT 3",
      "time_total": 4.200192315969616,
      "time_generation": 2.4657595939934254,
      "time_db": 0.4082116368226707,
      "time_synthesis": 0.7070376239717007,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-44-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi sono i 3 clienti con il fatturato pi\u00f9 alto?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale\nORDER BY fatturatoTotale DESC\nLIMIT 3",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC LIMIT 3",
      "time_total": 2.8208752628415823,
      "time_generation": 1.1355369598604739,
      "time_db": 0.47977423993870616,
      "time_synthesis": 0.6333734416402876,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-45-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali sono i 5 articoli con il costo totale di acquisto pi\u00f9 alto?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)\nRETURN a.descrizione AS articolo, sum(dr.importo) AS costoTotale\nORDER BY costoTotale DESC\nLIMIT 5",
      "expected_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) RETURN a.descrizione AS articolo, sum(dr.importo) AS costoTotale ORDER BY costoTotale DESC LIMIT 5",
      "time_total": 2.973940869793296,
      "time_generation": 1.2853508908301592,
      "time_db": 0.24997443798929453,
      "time_synthesis": 0.9385227160528302,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-46-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali sono i 5 articoli con il costo totale di acquisto pi\u00f9 basso?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)\nRETURN a.descrizione AS articolo, sum(dr.importo) AS costoTotale\nORDER BY costoTotale ASC\nLIMIT 5",
      "expected_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) RETURN a.descrizione AS articolo, sum(dr.importo) AS costoTotale ORDER BY costoTotale ASC LIMIT 5",
      "time_total": 2.8399737989529967,
      "time_generation": 1.267229335848242,
      "time_db": 0.22051011817529798,
      "time_synthesis": 0.9270011712796986,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-47-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale fornitore ci vende la gamma pi\u00f9 ampia di articoli unici?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(f:Fornitore)-[:HA_EMESSO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nRETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS varietaProdotti\nORDER BY varietaProdotti DESC\nLIMIT 1",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS varietaProdotti ORDER BY varietaProdotti DESC LIMIT 1",
      "time_total": 3.0771035538055003,
      "time_generation": 1.6356821707449853,
      "time_db": 0.2773053520359099,
      "time_synthesis": 0.6388684851117432,
      "jaccard_index": 1.0,
      "query_similarity": 0.9890909090909091,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-48-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale fornitore ci vende la gamma meno ampia di articoli unici?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nRETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS varietaProdotti\nORDER BY varietaProdotti ASC\nLIMIT 1",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS varietaProdotti ORDER BY varietaProdotti ASC LIMIT 1",
      "time_total": 2.967505211941898,
      "time_generation": 1.3762069982476532,
      "time_db": 0.14516372792422771,
      "time_synthesis": 0.8475996353663504,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-49-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Ordina le aziende in base al numero totale di documenti di vendita emessi.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)\nRETURN d.dittaId AS ditta, count(doc) AS numeroDocumenti\nORDER BY numeroDocumenti DESC",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento) RETURN d.dittaId AS ditta, count(doc) AS numeroDocumenti ORDER BY numeroDocumenti DESC",
      "time_total": 2.9889398962259293,
      "time_generation": 1.6204000157304108,
      "time_db": 0.05236506275832653,
      "time_synthesis": 0.8029938098043203,
      "jaccard_index": 1.0,
      "query_similarity": 0.9969230769230769,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-50-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il fornitore con il maggior numero di articoli forniti?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nRETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS numeroArticoli\nORDER BY numeroArticoli DESC\nLIMIT 1",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS numeroArticoli ORDER BY numeroArticoli DESC LIMIT 1",
      "time_total": 2.5951694301329553,
      "time_generation": 1.2115126787684858,
      "time_db": 0.16065080324187875,
      "time_synthesis": 0.6390959490090609,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-51-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi sono i principali fornitori degli articoli venduti al nostro miglior cliente?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) \nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 \nWITH c, sum(dr.importo) AS fatturatoCliente \nORDER BY fatturatoCliente DESC \nLIMIT 1 \nWITH c AS topCliente \nMATCH (topCliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) \nWITH topCliente, collect(DISTINCT a) AS articoliDelTopCliente \nMATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) \nWHERE a IN articoliDelTopCliente \nRETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS numeroArticoliDiversiForniti \nORDER BY numeroArticoliDiversiForniti DESC",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH c, sum(dr.importo) AS fatturatoCliente ORDER BY fatturatoCliente DESC LIMIT 1 WITH c AS topCliente MATCH (topCliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WITH topCliente, collect(DISTINCT a) AS articoliDelTopCliente MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE a IN articoliDelTopCliente RETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS numeroArticoliDiversiForniti ORDER BY numeroArticoliDiversiForniti DESC",
      "time_total": 3.415159975644201,
      "time_generation": 1.5400298689492047,
      "time_db": 0.5983266849070787,
      "time_synthesis": 0.7573830937035382,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-52-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali sono le famiglie di prodotti vendute sia dalla ditta '1' che dalla ditta '2'?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (d1:Ditta {dittaId: '1'})-[:APPARTIENE_A*]->(:Fornitore)-[:HA_EMISSO]->(doc1:Documento)-[:CONTIENE_RIGA]->(rd1:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a1:Articolo)-[:APPARTIENE_A]->(sf1:Sottofamiglia)-[:INCLUSA_IN]->(f1:Famiglia),\n      (d2:Ditta {dittaId: '2'})-[:APPARTIENE_A*]->(:Fornitore)-[:HA_EMISSO]->(doc2:Documento)-[:CONTIENE_RIGA]->(rd2:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a2:Articolo)-[:APPARTIENE_A]->(sf2:Sottofamiglia)-[:INCLUSA_IN]->(f2:Famiglia)\nWHERE f1 = f2\nRETURN DISTINCT f1.nome AS famiglia\nORDER BY famiglia\nLIMIT 20",
      "expected_cypher": "MATCH (fam1:Famiglia)<-[:INCLUSA_IN*0..]-(:Sottofamiglia)<-[:APPARTIENE_A]-(:Articolo)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(:Cliente)-[:APPARTIENE_A]->(:Ditta {dittaId: '1'}) WITH collect(DISTINCT fam1) AS famiglieDitta1 MATCH (fam2:Famiglia)<-[:INCLUSA_IN*0..]-(:Sottofamiglia)<-[:APPARTIENE_A]-(:Articolo)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(:Cliente)-[:APPARTIENE_A]->(:Ditta {dittaId: '2'}) WHERE fam2 IN famiglieDitta1 RETURN DISTINCT fam2.nome AS famigliaComune ORDER BY famigliaComune",
      "time_total": 7.194663700181991,
      "time_generation": 1.4887284808792174,
      "time_db": 4.40143720433116,
      "time_synthesis": 0.7749420972540975,
      "jaccard_index": 0.0,
      "query_similarity": 0.21220159151193635,
      "specialist": "GENERAL_QUERY",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": 2,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "famigliaComune": "TERMOMETRI"
        },
        {
          "famigliaComune": "CELLE FRIGO"
        },
        {
          "famigliaComune": "TASTIERA"
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-53-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami 5 prodotti che abbiamo acquistato ma mai venduto.",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)\nWHERE NOT (a)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento {tipoValore: 'Fatturato'})\nRETURN DISTINCT a.descrizione AS prodottoMaiVenduto\nORDER BY prodottoMaiVenduto\nLIMIT 5",
      "expected_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) WITH DISTINCT a WHERE NOT (a)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento {tipoValore: 'Fatturato'}) RETURN a.descrizione AS prodottoMaiVenduto LIMIT 5",
      "time_total": 3.290549377910793,
      "time_generation": 1.4323553158901632,
      "time_db": 0.22377629484981298,
      "time_synthesis": 0.9896698272787035,
      "jaccard_index": 0.0,
      "query_similarity": 0.9023941068139963,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "prodottoMaiVenduto": "COMPR.COPELAND ZF13K4E"
        },
        {
          "prodottoMaiVenduto": "FABBRICATORE TIPO SG230A"
        },
        {
          "prodottoMaiVenduto": "COMPR.ERM.SCROLL ZB38KCE"
        }
      ],
      "mismatch_extra": [
        {
          "prodottoMaiVenduto": "ACETILENE IN BOMBOLE"
        },
        {
          "prodottoMaiVenduto": "AEROEVAPORATORE HDI 406 E 3"
        },
        {
          "prodottoMaiVenduto": "ACCESSORIO-ZRP-M6"
        }
      ]
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-54-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami il fatturato totale per ogni mese dell'anno corrente della ditta '1'.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE date(doc.dataEmissione).year = date().year AND dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN date(doc.dataEmissione).month AS mese, sum(dr.importo) AS fatturatoMensile\nORDER BY mese ASC",
      "expected_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE date(doc.dataEmissione).year = date().year AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN date(doc.dataEmissione).month AS mese, sum(dr.importo) AS fatturatoMensile ORDER BY mese ASC",
      "time_total": 3.289476328995079,
      "time_generation": 1.4950512610375881,
      "time_db": 0.30749516608193517,
      "time_synthesis": 0.969488010276109,
      "jaccard_index": 1.0,
      "query_similarity": 0.9984732824427481,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-55-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Confronta il fatturato totale del 2024 con quello del 2023.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year IN [2023, 2024]\nRETURN doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoTotale\nORDER BY anno",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year IN [2023, 2024] RETURN doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoTotale ORDER BY anno",
      "time_total": 2.7839629440568388,
      "time_generation": 0.9705697037279606,
      "time_db": 0.32956640841439366,
      "time_synthesis": 1.0303704915568233,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-56-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale fornitore \u00e8 stato il pi\u00f9 attivo (per valore di acquisto) nell'ultimo trimestre?",
      "success": true,
      "error": null,
      "generated_cypher": "WITH date() - duration({months: 3}) AS dataInizioTrimestre\nMATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE doc.dataEmissione >= dataInizioTrimestre\nRETURN gf.ragioneSociale AS fornitore, sum(dr.importo) AS totaleAcquistato\nORDER BY totaleAcquistato DESC\nLIMIT 1",
      "expected_cypher": "WITH date() - duration({months: 3}) AS dataInizioTrimestre MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE doc.dataEmissione >= dataInizioTrimestre RETURN gf.ragioneSociale AS fornitore, sum(dr.importo) AS totaleAcquistato ORDER BY totaleAcquistato DESC LIMIT 1",
      "time_total": 2.884722535032779,
      "time_generation": 1.6163076553493738,
      "time_db": 0.0089272097684443,
      "time_synthesis": 0.8318467391654849,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-57-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami i clienti il cui primo documento di vendita \u00e8 stato emesso negli ultimi 6 mesi.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)\nWITH c, min(doc.dataEmissione) AS primoAcquisto\nWHERE primoAcquisto >= date() - duration({months: 6})\nRETURN c.name AS clienteRecente, primoAcquisto\nORDER BY primoAcquisto DESC",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento) WITH c, min(doc.dataEmissione) AS primoAcquisto WHERE primoAcquisto >= date() - duration({months: 6}) RETURN c.name AS clienteRecente, primoAcquisto ORDER BY primoAcquisto DESC",
      "time_total": 2.375613489188254,
      "time_generation": 1.2297868500463665,
      "time_db": 0.07822550507262349,
      "time_synthesis": 0.6183282886631787,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-58-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Ci sono aziende che non hanno registrato alcun fatturato?",
      "success": false,
      "error": "API error 500: {'detail': 'Errore durante l\\'elaborazione: {code: Neo.ClientError.Statement.SyntaxError} {message: Invalid input \\'correct\\': expected \\'::\\', \\'NFC\\', \\'NFD\\', \\'NFKC\\', \\'NFKD\\', \\'N",
      "generated_cypher": null,
      "expected_cypher": "MATCH (d:Ditta) WHERE NOT (d)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento {tipoValore: 'Fatturato'}) RETURN d.dittaId AS dittaSenzaFatturato",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": null,
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": 2,
      "success_reason": null
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-59-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Ultimo documento emesso nel 2024",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (doc:Documento) \nWHERE doc.dataEmissione.year = 2024 \nWITH doc \nORDER BY doc.dataEmissione DESC \nLIMIT 1 \nOPTIONAL MATCH (doc)<-[:HA_RICEVUTO]-(c:Cliente) \nOPTIONAL MATCH (doc)<-[:HA_EMESSO]-(f:Fornitore)-[:RAGGRUPPATO_SOTTO]->(gf:GruppoFornitore) \nRETURN doc.documentoId AS UltimodocumentoId,  \n       doc.dataEmissione AS DataEmissione, \n       CASE WHEN gf IS NOT NULL THEN gf.ragioneSociale ELSE 'Nostra Azienda (Vendita)' END AS EmessoDa, \n       CASE WHEN c IS NOT NULL THEN c.name ELSE 'Nostra Azienda (Acquisto)' END AS EmessoA",
      "expected_cypher": "MATCH (doc:Documento) WHERE doc.dataEmissione.year = 2024 WITH doc ORDER BY doc.dataEmissione DESC LIMIT 1 OPTIONAL MATCH (doc)<-[:HA_RICEVUTO]-(c:Cliente) OPTIONAL MATCH (doc)<-[:HA_EMESSO]-(f:Fornitore)-[:RAGGRUPPATO_SOTTO]->(gf:GruppoFornitore) RETURN doc.documentoId AS UltimodocumentoId,  doc.dataEmissione AS DataEmissione, CASE WHEN gf IS NOT NULL THEN gf.ragioneSociale ELSE 'Nostra Azienda (Vendita)' END AS EmessoDa, CASE WHEN c IS NOT NULL THEN c.name ELSE 'Nostra Azienda (Acquisto)' END AS EmessoA",
      "time_total": 2.5743062091059983,
      "time_generation": 1.1617711749859154,
      "time_db": 0.10146428178995848,
      "time_synthesis": 0.8893511169590056,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "GENERAL_QUERY",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-60-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Trova i fornitori che non ci hanno mai venduto prodotti della famiglia 'CENTRALI FRIGO'",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (f:Famiglia) \nWHERE toLower(trim(f.nome)) = 'centrali frigo'\nWITH f\nMATCH (f)-[:INCLUSA_IN]->(sf:Sottofamiglia)-[:APPARTIENE_A]->(a:Articolo)\nWITH collect(DISTINCT a) AS articoliCentrFrigo\nMATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(aVenduto)\nWHERE NOT aVenduto IN articoliCentrFrigo\nRETURN DISTINCT gf.ragioneSociale AS fornitore\nORDER BY fornitore\nLIMIT 10",
      "expected_cypher": "MATCH (fam:Famiglia) WHERE toLower(trim(fam.nome)) = 'centrali frigo' WITH fam MATCH (gf:GruppoFornitore) WHERE NOT (gf)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(fam) RETURN gf.ragioneSociale AS fornitore",
      "time_total": 3.9482381278648973,
      "time_generation": 1.575202850624919,
      "time_db": 0.3031083336099982,
      "time_synthesis": 1.5263457000255585,
      "jaccard_index": 0.002631578947368421,
      "query_similarity": 0.5456790123456791,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": 2,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "fornitore": "HANGZHOUTANGLIANMAOYIYOUXIANGONGSI"
        },
        {
          "fornitore": "DELLA GALLERIA"
        },
        {
          "fornitore": "INNOVAZIONE SRL"
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-61-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali clienti appartengono esclusivamente all'azienda '1' e non ad altre?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)\nWHERE (c)-[:APPARTIENE_A]->(:Ditta {dittaId: '1'})\nWITH c\nWHERE NOT (c)-[:APPARTIENE_A]->(:Ditta {dittaId: {id: ['2', '3']}})\nRETURN DISTINCT c.name AS cliente\nORDER BY cliente\nLIMIT 20",
      "expected_cypher": "MATCH (c:Cliente)-[:APPARTIENE_A]->(d:Ditta) WITH c, collect(d.dittaId) AS ditte WHERE size(ditte) = 1 AND ditte[0] = '1' RETURN c.name AS clienteEsclusivo",
      "time_total": 4.510543643962592,
      "time_generation": 2.4962947140447795,
      "time_db": 0.4375096997246146,
      "time_synthesis": 1.1194281070493162,
      "jaccard_index": 0.010610079575596816,
      "query_similarity": 0.2737430167597765,
      "specialist": "DITTE_QUERY",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": 2,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "clienteEsclusivo": "BLASI ELIO"
        },
        {
          "clienteEsclusivo": "SUPERMERCATO 84 di Pieri F.&C. SNC"
        },
        {
          "clienteEsclusivo": "SHENZHEN JINKEHUI DIANZISHANGQU YOUXIANGONGSI"
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-62-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Per ogni famiglia di prodotto, chi \u00e8 il cliente che ha generato il fatturato maggiore?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (fam:Famiglia)<-[:INCLUSA_IN]-(:Sottofamiglia)<-[:APPARTIENE_A]-(:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(c:Cliente)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH fam, c, sum(dr.importo) AS fatturato\nORDER BY fam.nome, fatturato DESC\nWITH fam, collect({cliente: c.name, fatturato: fatturato}) AS clientiOrdinati\nRETURN fam.nome AS famiglia, clientiOrdinati[0].cliente AS topCliente, clientiOrdinati[0].fatturato AS fatturatoMassimo",
      "expected_cypher": "MATCH (fam:Famiglia)<-[:INCLUSA_IN]-(:Sottofamiglia)<-[:APPARTIENE_A]-(:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(c:Cliente) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH fam, c, sum(dr.importo) AS fatturato ORDER BY fam.nome, fatturato DESC WITH fam, collect({cliente: c.name, fatturato: fatturato}) AS clientiOrdinati RETURN fam.nome AS famiglia, clientiOrdinati[0].cliente AS topCliente, clientiOrdinati[0].fatturato AS fatturatoMassimo",
      "time_total": 5.111981659196317,
      "time_generation": 1.5154834492132068,
      "time_db": 2.123534067068249,
      "time_synthesis": 1.0511366832070053,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-63-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Calcola il rapporto tra costo totale e fatturato totale per il prodotto 'GAS FREON SOLSTICE N40 R448A'",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo) \nWHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a'\nOPTIONAL MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_acq:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)\nWITH a, sum(dr_acq.importo) AS costoTotale\nOPTIONAL MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_ven:RigaDocumento {tipoValore: 'Fatturato'})<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(:Cliente)\nWHERE dr_ven.importo > 0\nWITH costoTotale, sum(dr_ven.importo) AS fatturatoTotale\nRETURN \n    costoTotale, \n    fatturatoTotale, \n    CASE \n        WHEN costoTotale <> 0 THEN fatturatoTotale / costoTotale \n        ELSE null \n    END AS rapporto",
      "expected_cypher": "MATCH (a:Articolo) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' OPTIONAL MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_acq:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) WITH a, sum(dr_acq.importo) AS costoTotale OPTIONAL MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_ven:RigaDocumento {tipoValore: 'Fatturato'})<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(:Cliente) WHERE dr_ven.importo > 0 WITH costoTotale, sum(dr_ven.importo) AS fatturatoTotale RETURN  costoTotale, fatturatoTotale, CASE WHEN costoTotale <> 0 THEN fatturatoTotale / costoTotale ELSE null END AS rapporto",
      "time_total": 3.664606662001461,
      "time_generation": 2.0774060958065093,
      "time_db": 0.2382932510226965,
      "time_synthesis": 0.8505138158798218,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-64-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale provincia ha generato il volume di fatturato pi\u00f9 alto?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo)\nMATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN l.provincia AS provincia, sum(dr.importo) AS fatturatoTotale\nORDER BY fatturatoTotale DESC\nLIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo) MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN l.provincia AS provincia, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC LIMIT 1",
      "time_total": 2.9830425418913364,
      "time_generation": 1.267176149878651,
      "time_db": 0.46430984884500504,
      "time_synthesis": 0.7462287219241261,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-65-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale provincia ha generato il volume di fatturato pi\u00f9 basso?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo)\nMATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN l.provincia AS provincia, sum(dr.importo) AS fatturatoTotale\nORDER BY fatturatoTotale ASC\nLIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo) MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN l.provincia AS provincia, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale ASC LIMIT 1",
      "time_total": 3.239880237262696,
      "time_generation": 1.4418626008555293,
      "time_db": 0.579584714025259,
      "time_synthesis": 0.8038541581481695,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-66-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Lista dei clienti il cui fatturato totale \u00e8 superiore al fatturato medio di tutti i clienti.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH count(DISTINCT c) AS totalCustomers, sum(dr.importo) AS totalRevenue\nWITH CASE WHEN totalCustomers = 0 THEN null ELSE totalRevenue / totalCustomers END AS avgRevenue\nWHERE avgRevenue IS NOT NULL\nMATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH c, sum(dr.importo) AS customerRevenue, avgRevenue\nWHERE customerRevenue > avgRevenue\nRETURN c.name AS cliente, customerRevenue\nORDER BY customerRevenue DESC",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH count(DISTINCT c) AS totalCustomers, sum(dr.importo) AS totalRevenue WITH CASE WHEN totalCustomers = 0 THEN null ELSE totalRevenue / totalCustomers END AS avgRevenue WHERE avgRevenue IS NOT NULL MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH c, sum(dr.importo) AS customerRevenue, avgRevenue WHERE customerRevenue > avgRevenue RETURN c.name AS cliente, customerRevenue ORDER BY customerRevenue DESC",
      "time_total": 3.6983011960983276,
      "time_generation": 1.596886944025755,
      "time_db": 0.5720454999245703,
      "time_synthesis": 1.0844059768132865,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-67-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami il numero di documenti per ciascun tipo (codice).",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType)\nRETURN dt.codice AS tipoDocumento, count(doc) AS numeroDocumenti\nORDER BY numeroDocumenti DESC",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType) RETURN dt.codice AS tipoDocumento, count(doc) AS numeroDocumenti ORDER BY numeroDocumenti DESC",
      "time_total": 2.211727910209447,
      "time_generation": 0.7669722479768097,
      "time_db": 0.05671946378424764,
      "time_synthesis": 0.8168029128573835,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "GENERAL_QUERY",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-68-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il fatturato totale associato ai documenti di tipo 'FVC'?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {nome: 'FVC'})\nMATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN sum(dr.importo) AS totale",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'FVC'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN sum(dr.importo) AS fatturatoFVC",
      "time_total": 2.6383901396766305,
      "time_generation": 1.2113971039652824,
      "time_db": 0.13232755893841386,
      "time_synthesis": 0.8055200320668519,
      "jaccard_index": 0.0,
      "query_similarity": 0.949748743718593,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "fatturatoFVC": 43854717.48000132
        }
      ],
      "mismatch_extra": [
        {
          "totale": 0
        }
      ]
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-69-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale cliente ha ricevuto il maggior numero di note di credito (codice 'NCC')?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'NCC'})\nRETURN c.name AS cliente, count(doc) AS numeroNoteCredito\nORDER BY numeroNoteCredito DESC\nLIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'NCC'}) RETURN c.name AS cliente, count(doc) AS numeroNoteCredito ORDER BY numeroNoteCredito DESC LIMIT 1",
      "time_total": 2.8582787616178393,
      "time_generation": 1.5606933990493417,
      "time_db": 0.011550171300768852,
      "time_synthesis": 0.7975905300118029,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-70-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Calcola il valore medio di un documento per ciascun tipo (considerando solo il fatturato).",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType)\nMATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH dt, sum(dr.importo) AS valoreDocumento\nRETURN dt.nome AS tipoDocumento, avg(valoreDocumento) AS valoreMedio\nORDER BY valoreMedio DESC",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH dt, doc, sum(dr.importo) AS valoreDocumento RETURN dt.codice AS tipoDocumento, avg(valoreDocumento) AS valoreMedio ORDER BY valoreMedio DESC",
      "time_total": 3.0663121109828353,
      "time_generation": 1.4353744518011808,
      "time_db": 0.4596324022859335,
      "time_synthesis": 0.6934352261014283,
      "jaccard_index": 0.0,
      "query_similarity": 0.9776247848537005,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "tipoDocumento": "FVC",
          "valoreMedio": 2511.581093866322
        },
        {
          "tipoDocumento": "NCC",
          "valoreMedio": 2662.121951219513
        },
        {
          "tipoDocumento": "NDC",
          "valoreMedio": 6835.246666666666
        }
      ],
      "mismatch_extra": [
        {
          "tipoDocumento": "Fattura Cliente",
          "valoreMedio": 43854717.480002135
        },
        {
          "tipoDocumento": "Nota Credito Cliente",
          "valoreMedio": 654882.0000000002
        },
        {
          "tipoDocumento": "Nota Debito Cliente",
          "valoreMedio": 20505.74
        }
      ]
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-71-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi \u00e8 il cliente con il fatturato pi\u00f9 alto?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale\nORDER BY fatturatoTotale DESC\nLIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC LIMIT 1",
      "time_total": 2.6860246500000358,
      "time_generation": 1.0480713490396738,
      "time_db": 0.40200148010626435,
      "time_synthesis": 0.7487574187107384,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-72-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca 5 clienti situati a Perugia",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo) \nWHERE toLower(trim(l.localita)) = 'perugia' \nRETURN DISTINCT c.name AS cliente \nORDER BY cliente \nLIMIT 5",
      "expected_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo) WHERE toLower(trim(l.localita)) = 'perugia' RETURN DISTINCT c.name AS cliente ORDER BY cliente LIMIT 5",
      "time_total": 1.897785165347159,
      "time_generation": 0.7219917918555439,
      "time_db": 0.021205531898885965,
      "time_synthesis": 0.6641546990722418,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "GENERAL_QUERY",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-73-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami i 5 prodotti pi\u00f9 popolari in termini di quantit\u00e0 venduta",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nRETURN a.descrizione AS prodotto, sum(dr.quantita) AS quantitaTotale\nORDER BY quantitaTotale DESC\nLIMIT 5",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN a.descrizione AS prodotto, sum(dr.quantita) AS quantitaTotale ORDER BY quantitaTotale DESC LIMIT 5",
      "time_total": 2.7797587267123163,
      "time_generation": 1.1655607451684773,
      "time_db": 0.46193686593323946,
      "time_synthesis": 0.7148669539019465,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-74-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Dimmi il fatturato di ciascuna azienda.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN d.dittaId AS ditta, sum(dr.importo) AS fatturato\nORDER BY fatturato DESC",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN d.dittaId AS ditta, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC",
      "time_total": 3.0958430506289005,
      "time_generation": 1.1797406738623977,
      "time_db": 0.5028814100660384,
      "time_synthesis": 0.8690516818314791,
      "jaccard_index": 1.0,
      "query_similarity": 0.9738430583501007,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-75-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quanto ho speso per acquistare il prodotto GAS FREON SOLSTICE N40 R448A?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)\nWHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a'\nRETURN sum(dr.importo) AS totaleSpeso",
      "expected_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' RETURN sum(dr.importo) AS costoTotaleAcquisto",
      "time_total": 2.7957450072281063,
      "time_generation": 1.114946875255555,
      "time_db": 0.27658759569749236,
      "time_synthesis": 0.8381789471022785,
      "jaccard_index": 1.0,
      "query_similarity": 0.9559471365638766,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-76-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quanto ho guadagnato vendendo il prodotto GAS FREON SOLSTICE N40 R448A?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN sum(dr.importo) AS totaleVenduto",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN sum(dr.importo) AS totaleVenduto",
      "time_total": 3.3313446510583162,
      "time_generation": 1.1951990430243313,
      "time_db": 0.5110838832333684,
      "time_synthesis": 1.0190016059204936,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-77-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali aziende vendono prodotti della famiglia 'CENTRALI FRIGO'?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (f:Famiglia)<-[:INCLUSA_IN]-(:Sottofamiglia)<-[:APPARTIENE_A]-(a:Articolo)\nWHERE toLower(trim(f.nome)) = 'centrali frigo'\nWITH a\nMATCH (a)-[:RIGUARDA_ARTICOLO]->(:RigaDocumento)-[:CONTIENE_RIGA]->(doc:Documento)-[:HA_EMISSO]->(fo:Fornitore)-[:APPARTIENE_A]->(d:Ditta)\nRETURN DISTINCT d.dittaId AS ditta\nORDER BY ditta\nLIMIT 20",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia) WHERE toLower(trim(fam.nome)) = 'centrali frigo' RETURN DISTINCT d.dittaId AS ditta ORDER BY ditta",
      "time_total": 5.280639547854662,
      "time_generation": 1.5986833716742694,
      "time_db": 0.2577949361875653,
      "time_synthesis": 2.8291051243431866,
      "jaccard_index": 0.0,
      "query_similarity": 0.3956043956043956,
      "specialist": "GENERAL_QUERY",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": 2,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "ditta": "4"
        },
        {
          "ditta": "2"
        },
        {
          "ditta": "1"
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-78-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 l'importo medio per riga documento nelle fatture di vendita?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN avg(dr.importo) AS media",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN avg(dr.importo) AS importoMedioRiga",
      "time_total": 3.428113378584385,
      "time_generation": 1.3488553590141237,
      "time_db": 0.29436976602301,
      "time_synthesis": 0.8287020269781351,
      "jaccard_index": 1.0,
      "query_similarity": 0.9681159420289855,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-79-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Per ogni azienda, classifica il suo fatturato totale come 'Alto' se supera i 10 milioni, 'Medio' se \u00e8 tra 1 e 10 milioni, e 'Basso' altrimenti.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH d, sum(dr.importo) AS fatturatoTotale\nRETURN \n    d.dittaId AS ditta, \n    fatturatoTotale, \n    CASE \n        WHEN fatturatoTotale > 10000000 THEN 'Alto'\n        WHEN fatturatoTotale > 1000000 THEN 'Medio'\n        ELSE 'Basso'\n    END AS categoriaFatturato\nORDER BY fatturatoTotale DESC",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH d, sum(dr.importo) AS fatturatoTotale RETURN d.dittaId AS ditta, fatturatoTotale, CASE WHEN fatturatoTotale > 10000000 THEN 'Alto' WHEN fatturatoTotale > 1000000 THEN 'Medio' ELSE 'Basso' END AS categoriaFatturato",
      "time_total": 3.8864491670392454,
      "time_generation": 1.5922426651231945,
      "time_db": 0.7164290552027524,
      "time_synthesis": 0.9609356098808348,
      "jaccard_index": 1.0,
      "query_similarity": 0.9609079445145019,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-80-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il primo e l'ultimo documento di vendita mai registrato per il cliente 'ACME SRL'?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)\nWHERE toLower(trim(c.name)) = 'acme srl'\nRETURN min(doc.dataEmissione) AS primoDocumento, max(doc.dataEmissione) AS ultimoDocumento",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento) WHERE toLower(trim(c.name)) = 'acme srl' RETURN min(doc.dataEmissione) AS primoDocumento, max(doc.dataEmissione) AS ultimoDocumento",
      "time_total": 2.868795597925782,
      "time_generation": 1.6764203673228621,
      "time_db": 0.015839128755033016,
      "time_synthesis": 0.7587122558616102,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-81-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 la media del fatturato mensile per il cliente 'ACME SRL' nel 2024?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE toLower(trim(c.name)) = 'acme srl' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year = 2024\nWITH date(doc.dataEmissione).month AS mese, sum(dr.importo) AS fatturatoMensile\nRETURN avg(fatturatoMensile) AS mediaFatturatoMensile",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE toLower(trim(c.name)) = 'l\\'abbondanza srl' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year = 2024 WITH date(doc.dataEmissione).month AS mese, sum(dr.importo) AS fatturatoMensile RETURN avg(fatturatoMensile) AS mediaFatturatoMensile",
      "time_total": 2.9212451889179647,
      "time_generation": 1.430518222041428,
      "time_db": 0.05024541728198528,
      "time_synthesis": 0.9087900510057807,
      "jaccard_index": 0.0,
      "query_similarity": 0.9757489300998573,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "mediaFatturatoMensile": 170779.88249999998
        }
      ],
      "mismatch_extra": [
        {
          "mediaFatturatoMensile": null
        }
      ]
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-82-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Per i primi 3 clienti per fatturato, mostra il loro prodotto pi\u00f9 acquistato per valore.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) \nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 \nWITH c, sum(dr.importo) AS fatturatoCliente \nORDER BY fatturatoCliente DESC \nLIMIT 3 \nMATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr2:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) \nWHERE dr2.tipoValore = 'Fatturato' AND dr2.importo > 0 \nWITH c, a, sum(dr2.importo) AS valoreProdotto \nORDER BY c.name, valoreProdotto DESC \nWITH c, head(collect({prodotto: a.descrizione, valore: valoreProdotto})) AS topProdotto \nRETURN c.name AS cliente, topProdotto.prodotto AS prodottoTop, topProdotto.valore AS valoreTop \nORDER BY c.name",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH c, sum(dr.importo) AS fatturatoCliente ORDER BY fatturatoCliente DESC LIMIT 3 MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr2:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE dr2.tipoValore = 'Fatturato' AND dr2.importo > 0 WITH c, a, sum(dr2.importo) AS valoreProdotto ORDER BY c.name, valoreProdotto DESC WITH c, head(collect({prodotto: a.descrizione, valore: valoreProdotto})) AS topProdotto RETURN c.name AS cliente, topProdotto.prodotto AS prodottoTop, topProdotto.valore AS valoreTop ORDER BY c.name",
      "time_total": 3.0327723282389343,
      "time_generation": 1.0131414867937565,
      "time_db": 0.4608705169521272,
      "time_synthesis": 1.016974553000182,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-83-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali clienti hanno effettuato ordini ma non hanno ancora ricevuto una fattura?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Ordinato'\nWITH c, doc, dr\nWHERE NOT (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento {tipoValore:'Fatturato'})\nRETURN DISTINCT c.name AS cliente\nORDER BY cliente\nLIMIT 10",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento {tipoValore: 'Ordinato'}) WITH DISTINCT c MATCH (c) WHERE NOT (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento {tipoValore: 'Fatturato'}) RETURN c.name AS clienteSenzaFattura",
      "time_total": 2.959386899136007,
      "time_generation": 1.4981454159133136,
      "time_db": 0.2600357308983803,
      "time_synthesis": 0.6345372861251235,
      "jaccard_index": 1.0,
      "query_similarity": 0.3922942206654991,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": false,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-84-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi \u00e8 il fornitore principale per ogni famiglia di prodotto, in base al valore acquistato?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (fam:Famiglia)<-[:INCLUSA_IN]-(:Sottofamiglia)<-[:APPARTIENE_A]-(:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMISSO]-(:Fornitore)-[:RAGGRUPPATO_SOTTO]->(gf:GruppoFornitore)\nWITH fam, gf, sum(dr.importo) AS valoreAcquistato\nORDER BY fam.nome, valoreAcquistato DESC\nWITH fam, collect({fornitore: gf.ragioneSociale, valore: valoreAcquistato})[0] AS fornitoreTop\nRETURN fam.nome AS famiglia, fornitoreTop.fornitore AS fornitorePrincipale",
      "expected_cypher": "MATCH (fam:Famiglia)<-[:INCLUSA_IN]-(:Sottofamiglia)<-[:APPARTIENE_A]-(:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)-[:RAGGRUPPATO_SOTTO]->(gf:GruppoFornitore) WITH fam, gf, sum(dr.importo) AS valoreAcquistato ORDER BY fam.nome, valoreAcquistato DESC WITH fam, collect({fornitore: gf.ragioneSociale, valore: valoreAcquistato})[0] AS fornitoreTop RETURN fam.nome AS famiglia, fornitoreTop.fornitore AS fornitorePrincipale",
      "time_total": 2.8030201070941985,
      "time_generation": 1.477482727728784,
      "time_db": 0.27361007081344724,
      "time_synthesis": 0.6368558388203382,
      "jaccard_index": 0.0,
      "query_similarity": 0.9979338842975206,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "famiglia": "MONITORE",
          "fornitorePrincipale": "SALDOGAS SRL"
        },
        {
          "famiglia": "RAME",
          "fornitorePrincipale": "SALDOGAS SRL"
        },
        {
          "famiglia": "VALVOLE",
          "fornitorePrincipale": "SALDOGAS SRL"
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-85-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il valore totale degli ordini in sospeso (ordinati ma non fatturati)?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (f:Fornitore)-[:HA_EMESSO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Ordinato'\nOPTIONAL MATCH (doc)-[:IS_TYPE]->(dt:DocType {nome: 'Fattura'})\nWHERE dt IS NULL\nWITH sum(dr.importo) AS totaleOrdinato\nRETURN totaleOrdinato AS valoreTotaleOrdiniPendenti",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Ordinato' WITH c, doc, sum(dr.importo) AS valoreOrdinato WHERE NOT (doc)<-[:CONTIENE_RIGA]-(:RigaDocumento {tipoValore:'Fatturato'}) RETURN sum(valoreOrdinato) AS totaleOrdiniSospesi",
      "time_total": 4.579189653042704,
      "time_generation": 2.6696483567357063,
      "time_db": 0.4718408742919564,
      "time_synthesis": 0.8871893649920821,
      "jaccard_index": 0.0,
      "query_similarity": 0.1097770154373928,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": 2,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "totaleOrdiniSospesi": 2376823.7100000004
        }
      ],
      "mismatch_extra": [
        {
          "valoreTotaleOrdiniPendenti": 7149766.220000067
        }
      ]
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-86-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami i clienti che acquistano pi\u00f9 di 10 articoli unici diversi.",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWITH c, collect(DISTINCT a.descrizione) AS articoliUnici\nWHERE size(articoliUnici) > 10\nRETURN c.name AS cliente\nORDER BY c.name\nLIMIT 10",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WITH c, count(DISTINCT a) AS numeroArticoliUnici WHERE numeroArticoliUnici > 10 RETURN c.name AS cliente, numeroArticoliUnici ORDER BY numeroArticoliUnici DESC",
      "time_total": 3.1470501609146595,
      "time_generation": 1.4919401579536498,
      "time_db": 0.6408108919858932,
      "time_synthesis": 0.5436635697260499,
      "jaccard_index": 0.0,
      "query_similarity": 0.7660377358490567,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": 2,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "cliente": "SUPER MASSIANO SRL",
          "numeroArticoliUnici": 38
        },
        {
          "cliente": "A C S 21 s.r.l.",
          "numeroArticoliUnici": 17
        },
        {
          "cliente": "G.R. di Miseria Giancarlo & C.snc",
          "numeroArticoliUnici": 20
        }
      ],
      "mismatch_extra": [
        {
          "cliente": "ADETA s.r.l."
        },
        {
          "cliente": "A C S 21 s.r.l."
        },
        {
          "cliente": "2M DI MAMMOLI MATTEO"
        }
      ]
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-87-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Per il prodotto pi\u00f9 venduto per quantit\u00e0, qual \u00e8 il suo costo medio di acquisto?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) \nWITH a, sum(dr.quantita) AS quantitaTotale \nORDER BY quantitaTotale DESC \nLIMIT 1 \nMATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_acq:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) \nRETURN a.descrizione AS prodotto, avg(CASE WHEN dr_acq.quantita = 0 OR dr_acq.quantita IS NULL THEN null ELSE dr_acq.importo / dr_acq.quantita END) AS costoMedioUnitario",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WITH a, sum(dr.quantita) AS quantitaTotale ORDER BY quantitaTotale DESC LIMIT 1 MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_acq:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) RETURN a.descrizione AS prodotto, avg(CASE WHEN dr_acq.quantita = 0 OR dr_acq.quantita IS NULL THEN null ELSE dr_acq.importo / dr_acq.quantita END) AS costoMedioUnitario",
      "time_total": 2.878912947140634,
      "time_generation": 1.1422367310151458,
      "time_db": 0.6116657149977982,
      "time_synthesis": 0.6246005878783762,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-88-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca i fornitori che trattano solo prodotti di una singola famiglia.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (f:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia)\nWITH f.fornitoreId AS fornitoreId, collect(DISTINCT fam.nome) AS famiglie\nWHERE size(famiglie) = 1\nRETURN fornitoreId, famiglie[0] AS famiglia\nORDER BY fornitoreId\nLIMIT 10",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia) WITH gf, count(DISTINCT fam) AS numeroFamiglie WHERE numeroFamiglie = 1 RETURN gf.ragioneSociale AS fornitoreMonoFamiglia",
      "time_total": 3.404363957233727,
      "time_generation": 1.8245736421085894,
      "time_db": 0.46564259426668286,
      "time_synthesis": 0.5726591786369681,
      "jaccard_index": 1.0,
      "query_similarity": 0.30945558739255014,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": false,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-89-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 la percentuale di fatturato generata dai clienti nella regione 'Umbria' sul totale?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo),(c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) \nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 \nWITH sum(dr.importo) AS totaleFatturato,  sum(CASE WHEN toLower(trim(l.regione)) = 'umbria' THEN dr.importo ELSE 0 END) AS fatturatoUmbria \nRETURN CASE WHEN totaleFatturato = 0 THEN 0.0 ELSE (fatturatoUmbria * 100.0 / totaleFatturato) END AS percentualeUmbria",
      "expected_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo),(c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH sum(dr.importo) AS totaleFatturato,  sum(CASE WHEN toLower(trim(l.regione)) = 'umbria' THEN dr.importo ELSE 0 END) AS fatturatoUmbria RETURN CASE WHEN totaleFatturato = 0 THEN 0.0 ELSE (fatturatoUmbria * 100.0 / totaleFatturato) END AS percentualeUmbria",
      "time_total": 3.5603340552188456,
      "time_generation": 1.4880251651629806,
      "time_db": 0.7272010431624949,
      "time_synthesis": 0.8218017071485519,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-90-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Trova il cliente con il valore medio degli ordini pi\u00f9 alto.",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Ordinato'\nWITH c, sum(dr.importo) AS totaleOrdine, count(doc) AS numOrdini\nWHERE numOrdini > 0\nWITH c, totaleOrdine / numOrdini AS mediaOrdine\nRETURN c.name AS cliente, mediaOrdine AS valoreMedioOrdine\nORDER BY valoreMedioOrdine DESC\nLIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH c, doc, sum(dr.importo) AS valoreOrdine RETURN c.name AS cliente, avg(valoreOrdine) AS valoreMedioOrdine ORDER BY valoreMedioOrdine DESC LIMIT 1",
      "time_total": 2.940274005290121,
      "time_generation": 1.4056329792365432,
      "time_db": 0.33456891821697354,
      "time_synthesis": 0.7839049557223916,
      "jaccard_index": 0.0,
      "query_similarity": 0.5625,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": 2,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "cliente": "CREDEMLEASING SPA",
          "valoreMedioOrdine": 201600.0
        }
      ],
      "mismatch_extra": [
        {
          "cliente": "ARCA SNC",
          "valoreMedioOrdine": 105000.0
        }
      ]
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-91-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami i 3 mesi con il maggior numero di documenti di acquisto registrati.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(doc:Documento)\nRETURN doc.dataEmissione.year AS anno, doc.dataEmissione.month AS mese, count(DISTINCT doc) AS numeroDocumenti\nORDER BY numeroDocumenti DESC\nLIMIT 3",
      "expected_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(doc:Documento) RETURN doc.dataEmissione.year AS anno, doc.dataEmissione.month AS mese, count(doc) AS numeroDocumenti ORDER BY numeroDocumenti DESC LIMIT 3",
      "time_total": 2.709303437266499,
      "time_generation": 1.3674095501191914,
      "time_db": 0.12444074312224984,
      "time_synthesis": 0.5864179427735507,
      "jaccard_index": 1.0,
      "query_similarity": 0.9766233766233766,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-92-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Ci sono prodotti venduti a un prezzo inferiore al loro costo medio di acquisto?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo)-[:APPARTIENE_A]->(sf:Sottofamiglia)-[:INCLUSA_IN]->(f:Famiglia)\nWHERE f.nome IN ['CENTRALI FRIGO', 'IMPIANTI DI CLIMATIZZAZIONE']\nOPTIONAL MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_acq:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)\nWITH a, avg(CASE WHEN dr_acq.quantita = 0 OR dr_acq.quantita IS NULL THEN null ELSE dr_acq.importo / dr_acq.quantita END) AS costoMedio\nOPTIONAL MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_ven:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(:Cliente)\nWHERE dr_ven.tipoValore = 'Fatturato' AND dr_ven.importo > 0\nWITH a, costoMedio, avg(CASE WHEN dr_ven.quantita = 0 OR dr_ven.quantita IS NULL THEN null ELSE dr_ven.importo / dr_ven.quantita END) AS prezzoMedioVendita\nWHERE prezzoMedioVendita < costoMedio\nRETURN a.descrizione AS prodottoInPerdita, prezzoMedioVendita, costoMedio\nORDER BY prezzoMedioVendita - costoMedio ASC\nLIMIT 10",
      "expected_cypher": "MATCH (a:Articolo) OPTIONAL MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_acq:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) WITH a, avg(CASE WHEN dr_acq.quantita = 0 OR dr_acq.quantita IS NULL THEN null ELSE dr_acq.importo / dr_acq.quantita END) AS costoMedio OPTIONAL MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_ven:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(:Cliente) WHERE dr_ven.tipoValore = 'Fatturato' AND dr_ven.importo > 0 WITH a, costoMedio, avg(CASE WHEN dr_ven.quantita = 0 OR dr_ven.quantita IS NULL THEN null ELSE dr_ven.importo / dr_ven.quantita END) AS prezzoMedioVendita WHERE prezzoMedioVendita < costoMedio RETURN a.descrizione AS prodottoInPerdita",
      "time_total": 4.972294943872839,
      "time_generation": 2.295034873764962,
      "time_db": 1.1338063469156623,
      "time_synthesis": 0.99221410183236,
      "jaccard_index": 0.0,
      "query_similarity": 0.8655043586550436,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-93-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale tipo di documento (codice) \u00e8 pi\u00f9 frequentemente associato al ciclo di acquisto?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (:Fornitore)-[:HA_EMISSO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType)\nRETURN dt.codice AS tipoDocumento, count(doc) AS frequenza\nORDER BY frequenza DESC\nLIMIT 1",
      "expected_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType) RETURN dt.codice AS tipoDocumento, count(doc) AS frequenza ORDER BY frequenza DESC LIMIT 1",
      "time_total": 3.068288639187813,
      "time_generation": 1.576181654818356,
      "time_db": 0.09138129837810993,
      "time_synthesis": 0.7347171972505748,
      "jaccard_index": 0.0,
      "query_similarity": 0.9939024390243902,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "tipoDocumento": "OF",
          "frequenza": 6571
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-94-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca i fornitori situati in un luogo dove non abbiamo clienti.",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (l:Luogo)<-[:HAS_ADDRESS]-(c:Cliente)\nWITH collect(DISTINCT l) AS luoghiConClienti\nMATCH (l2:Luogo)<-[:SI_TROVA_A]-(f:Fornitore)\nWHERE NOT l2 IN luoghiConClienti\nRETURN DISTINCT f.ragioneSociale AS fornitore\nORDER BY fornitore\nLIMIT 10",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(f:Fornitore)-[:SI_TROVA_A]->(lf:Luogo) WHERE NOT EXISTS { MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo {localita: lf.localita}) } RETURN DISTINCT gf.ragioneSociale AS fornitore ORDER BY fornitore",
      "time_total": 2.9087489540688694,
      "time_generation": 1.5407834290526807,
      "time_db": 0.12262516003102064,
      "time_synthesis": 0.8090321430936456,
      "jaccard_index": 0.00796812749003984,
      "query_similarity": 0.4462809917355372,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": 2,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "fornitore": "G.t.f. Srl"
        },
        {
          "fornitore": "DIS.M.E.P. SRL"
        },
        {
          "fornitore": "SALUMIFICIO IL FIORE SNC"
        }
      ],
      "mismatch_extra": [
        {
          "fornitore": "A.S.D CASTIGLIONE DEL LAGO"
        },
        {
          "fornitore": "10GTEK TRANSCEIVERS CO.LIMITED"
        }
      ]
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-95-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quante note di credito clienti (NCC) abbiamo emesso in totale?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType)\nWHERE toLower(trim(dt.nome)) = 'nota di credito' // Adjust this filter based on the actual name or code for credit notes\nRETURN count(doc) AS totaleNCC",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'NCC'}) RETURN count(doc) AS numeroNoteCredito",
      "time_total": 3.3436961411498487,
      "time_generation": 1.9919192199595273,
      "time_db": 0.09865461988374591,
      "time_synthesis": 0.7757693212479353,
      "jaccard_index": 0.0,
      "query_similarity": 0.2996941896024465,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": 2,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "numeroNoteCredito": 639
        }
      ],
      "mismatch_extra": [
        {
          "totaleNCC": 0
        }
      ]
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-96-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami tutti gli ordini fornitori (OF) per maggio 2024.",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (f:Fornitore)-[:HA_EMESSO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE doc.dataEmissione >= '2024-05-01' AND doc.dataEmissione < '2024-06-01'\nRETURN DISTINCT doc.documentoId AS ordineFornitore\nORDER BY ordineFornitore\nLIMIT 10",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'OF'}) WHERE doc.dataEmissione.year = 2024 AND doc.dataEmissione.month = 5 RETURN doc.documentoId AS ordine",
      "time_total": 3.377053719945252,
      "time_generation": 2.2160097849555314,
      "time_db": 0.1332765920087695,
      "time_synthesis": 0.6127461986616254,
      "jaccard_index": 0.0,
      "query_similarity": 0.36097560975609755,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": 2,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "ordine": "2-202400007829"
        },
        {
          "ordine": "2-202400007957"
        },
        {
          "ordine": "2-202400007943"
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-97-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il valore totale delle fatture fornitori (FFA) ricevute?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'FFA'})\nMATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nRETURN sum(dr.importo) AS totaleFattureFornitore",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'FFA'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) RETURN sum(dr.importo) AS totaleFattureFornitore",
      "time_total": 2.2476156847551465,
      "time_generation": 1.0689135338179767,
      "time_db": 0.021618332248181105,
      "time_synthesis": 0.722018598113209,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "PURCHASE_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-98-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca i clienti a cui abbiamo inviato una nota di consegna clienti (DDTV) a Roma.",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType {nome: 'DDTV'})\nWHERE toLower(trim(doc.tipoOriginale)) CONTAINS 'roma'\nRETURN DISTINCT c.name AS cliente\nORDER BY cliente\nLIMIT 20",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'DDTV'}) WHERE toLower(trim(doc.tipoOriginale)) CONTAINS 'roma' RETURN DISTINCT c.name AS cliente",
      "time_total": 2.67740656202659,
      "time_generation": 1.3090675198473036,
      "time_db": 0.1326865958981216,
      "time_synthesis": 0.6987884100526571,
      "jaccard_index": 0.0,
      "query_similarity": 0.9114583333333334,
      "specialist": "GENERAL_QUERY",
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "cliente": "VELLETRI 17 SRL"
        },
        {
          "cliente": "MAREDO S.R.L."
        },
        {
          "cliente": "DISCOUNT DUE SRL"
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-99-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il valore fatturato presente solo nelle fatture clienti (FVC)?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN sum(dr.importo) AS totaleFatturato",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'FVC'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' RETURN sum(dr.importo) AS totaleFatturatoInFVC",
      "time_total": 3.418307350948453,
      "time_generation": 1.9643887961283326,
      "time_db": 0.3759130253456533,
      "time_synthesis": 0.6424741419032216,
      "jaccard_index": 0.0,
      "query_similarity": 0.7184986595174263,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": 2,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "totaleFatturatoInFVC": 43854717.48000132
        }
      ],
      "mismatch_extra": [
        {
          "totaleFatturato": 44530105.22000218
        }
      ]
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-100-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami il totale ordinato attraverso gli ordini clienti (OC) per la ditta '1'.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'OC'})\nMATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Ordinato'\nRETURN sum(dr.importo) AS totaleOrdinato",
      "expected_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'OC'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Ordinato' RETURN sum(dr.importo) AS totaleOrdinatoDitta1",
      "time_total": 2.8219864959828556,
      "time_generation": 1.609080369118601,
      "time_db": 0.04907495202496648,
      "time_synthesis": 0.7316437708213925,
      "jaccard_index": 1.0,
      "query_similarity": 0.98828125,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-101-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il valore medio delle righe fatturate nelle note di consegna clienti (DDTV)?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE doc.tipoOriginale = 'DDTV' AND dr.tipoValore = 'Fatturato'\nRETURN avg(dr.importo) AS mediaValoreFatturato",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'DDTV'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Bollato' RETURN avg(dr.importo) AS valoreMedioBollato",
      "time_total": 2.8569522867910564,
      "time_generation": 1.5432063871994615,
      "time_db": 0.11763487802818418,
      "time_synthesis": 0.7399022812023759,
      "jaccard_index": 0.0,
      "query_similarity": 0.6253229974160207,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": 2,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "valoreMedioBollato": 287.9302638785166
        }
      ],
      "mismatch_extra": [
        {
          "mediaValoreFatturato": null
        }
      ]
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-102-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi \u00e8 il cliente con il valore fatturato pi\u00f9 alto considerando solo le fatture immediate (FVC)?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'FVC'})\nMATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN c.name AS cliente, sum(dr.importo) AS totale\nORDER BY totale DESC\nLIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'FVC'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS totale ORDER BY totale DESC LIMIT 1",
      "time_total": 3.1430168598890305,
      "time_generation": 1.4710798799060285,
      "time_db": 0.3228185661137104,
      "time_synthesis": 0.8466565669514239,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-103-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Per il cliente 'ACME SRL', confronta il totale ordinato e il totale fatturato.",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE toLower(trim(c.name)) = 'acme srl'\nWITH \n  sum(CASE WHEN dr.tipoValore = 'Ordinato' THEN dr.importo ELSE 0 END) AS totaleOrdinato,\n  sum(CASE WHEN dr.tipoValore = 'Fatturato' THEN dr.importo ELSE 0 END) AS totaleFatturato\nRETURN totaleOrdinato, totaleFatturato",
      "expected_cypher": "MATCH (c:Cliente) WHERE toLower(trim(c.name)) = 'acme srl' OPTIONAL MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr_ord:RigaDocumento {tipoValore: 'Ordinato'}) WITH c, sum(dr_ord.importo) AS totaleOrdinato OPTIONAL MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr_fat:RigaDocumento {tipoValore: 'Fatturato'}) WHERE dr_fat.importo > 0 RETURN totaleOrdinato, sum(dr_fat.importo) AS totaleFatturato",
      "time_total": 2.677887375932187,
      "time_generation": 1.4087083889171481,
      "time_db": 0.1525422390550375,
      "time_synthesis": 0.6665173978544772,
      "jaccard_index": 0.0,
      "query_similarity": 0.2786458333333333,
      "specialist": "SALES_CYCLE",
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": 2,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [],
      "mismatch_extra": [
        {
          "totaleOrdinato": 0,
          "totaleFatturato": 0
        }
      ]
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-104-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca i documenti d'ordine clienti (OC) che non sono ancora stati completamente fatturati.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType {nome: 'Ordine Cliente'})\nMATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Ordinato'\nWITH doc, sum(dr.quantita) AS totaleOrdinato\n\nMATCH (doc)-[:CONTIENE_RIGA]->(df:RigaDocumento)\nWHERE df.tipoValore = 'Fatturato'\nWITH doc, totaleOrdinato, sum(df.quantita) AS totaleFatturato\n\nWHERE totaleOrdinato > totaleFatturato\nRETURN doc.documentoId AS documento, totaleOrdinato, totaleFatturato\nORDER BY documento\nLIMIT 10",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'OC'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento {tipoValore: 'Ordinato'}) WITH doc, sum(dr.importo) AS valoreOrdinato MATCH (doc)-[:CONTIENE_RIGA]->(dr_fat:RigaDocumento {tipoValore: 'Fatturato'}) WITH doc, valoreOrdinato, sum(dr_fat.importo) AS valoreFatturato WHERE valoreOrdinato > valoreFatturato RETURN doc.documentoId AS ordineNonSaldato",
      "time_total": 2.962670251727104,
      "time_generation": 1.4394659693352878,
      "time_db": 0.3074807161465287,
      "time_synthesis": 0.7878384818322957,
      "jaccard_index": 1.0,
      "query_similarity": 0.5745614035087719,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": false,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-105-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale tipo di documento (nome) ha il valore medio pi\u00f9 alto per riga (considerando solo i valori fatturati)?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType)\nMATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN dt.nome AS nomeTipoDocumento, avg(dr.importo) AS valoreMedioRiga\nORDER BY valoreMedioRiga DESC\nLIMIT 1",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN dt.nome AS nomeTipoDocumento, avg(dr.importo) AS valoreMedioRiga ORDER BY valoreMedioRiga DESC LIMIT 1",
      "time_total": 3.3025431111454964,
      "time_generation": 1.4984863973222673,
      "time_db": 0.3835479458793998,
      "time_synthesis": 0.8359567089937627,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": "SALES_CYCLE",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "specialist-llama3-groq",
      "test_id": "TEST-106-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami il totale fatturato e il totale ordinato per ciascuna ditta.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nRETURN \n    d.dittaId AS ditta, \n    sum(CASE dr.tipoValore WHEN 'Fatturato' THEN dr.importo ELSE 0 END) AS totaleFatturato, \n    sum(CASE dr.tipoValore WHEN 'Ordinato' THEN dr.importo ELSE 0 END) AS totaleOrdinato\nORDER BY ditta ASC",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) RETURN d.dittaId AS ditta, sum(CASE dr.tipoValore WHEN 'Fatturato' THEN dr.importo ELSE 0 END) AS totaleFatturato, sum(CASE dr.tipoValore WHEN 'Ordinato' THEN dr.importo ELSE 0 END) AS totaleOrdinato ORDER BY ditta ASC",
      "time_total": 3.2516396436840296,
      "time_generation": 1.4962864401750267,
      "time_db": 0.48428226821124554,
      "time_synthesis": 0.8240895490162075,
      "jaccard_index": 1.0,
      "query_similarity": 0.9984779299847792,
      "specialist": "CROSS_DOMAIN",
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": 2,
      "success_reason": "strict",
      "strict_success": true
    }
  ]
}