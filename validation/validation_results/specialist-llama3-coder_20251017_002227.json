{
  "config": "specialist-llama3-coder",
  "approach": "specialist",
  "config_name": "llama3-coder",
  "timestamp": "20251017_002227",
  "summary": {
    "total": 18,
    "success": 8,
    "failures": 10,
    "accuracy": 44.44444444444444,
    "avg_time": 27.543963207009558
  },
  "results": [
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST_00_FATTURATO_CLIENTE_SPECIFICO",
      "question": "Qual \u00e8 il fatturato totale del cliente BARONE DI FERRANTE EZIO?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente {name: \"BARONE DI FERRANTE EZERNE\"})-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN sum(dr.importo) AS fatturatoTotale",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE toLower(trim(c.name)) = 'barone di ferrante ezio' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN sum(dr.importo) AS fatturatoTotale",
      "time_total": 31.9613678897731,
      "time_generation": 23.50653665093705,
      "time_db": 0.1432130760513246,
      "time_synthesis": 6.771318034734577
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST_01_CLIENTE_TOP_FATTURATO",
      "question": "Chi \u00e8 il cliente con il maggior fatturato?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale\nORDER BY fatturatoTotale DESC\nLIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC LIMIT 1",
      "time_total": 34.125390442088246,
      "time_generation": 18.981891945004463,
      "time_db": 0.37173770321533084,
      "time_synthesis": 13.561123731080443
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST_02_LISTA_CLIENTI_PER_REGIONE",
      "question": "Elenca 5 clienti che si trovano a Perugia",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo)\nWHERE toLower(trim(l.localita)) = 'perugia'\nRETURN DISTINCT c.name AS cliente\nORDER BY cliente\nLIMIT 5",
      "expected_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo) WHERE toLower(trim(l.localita)) = 'perugia' RETURN DISTINCT c.name AS cliente ORDER BY cliente LIMIT 5",
      "time_total": 24.1134124211967,
      "time_generation": 13.683259790297598,
      "time_db": 0.021193603053689003,
      "time_synthesis": 7.957926380913705
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST_03_ANALISI_COMPLESSA_TOP_N",
      "question": "Mostrami i 5 prodotti pi\u00f9 popolari in termini di quantit\u00e0 venduta",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (a:Articolo)-[:RIGUARDA_ARTICOLO]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN a.descrizione AS prodotto, sum(dr.quantita) AS quantitaTotale\nORDER BY quantitaTotale DESC\nLIMIT 5",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN a.descrizione AS prodotto, sum(dr.quantita) AS quantitaTotale ORDER BY quantitaTotale DESC LIMIT 5",
      "time_total": 28.69602042483166,
      "time_generation": 18.94381812401116,
      "time_db": 0.12750676134601235,
      "time_synthesis": 8.054669691249728
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST_04_FATTURATO_PER_DITTA",
      "question": "Dimmi il fatturato di ogni ditta.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN d.dittaId AS ditta, sum(dr.importo) AS fatturatoTotale\nORDER BY fatturatoTotale DESC",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN d.dittaId AS ditta, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC",
      "time_total": 34.483215080108494,
      "time_generation": 23.041519459336996,
      "time_db": 0.5519015020690858,
      "time_synthesis": 9.051601995714009
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST_05_ANNO_TOP_FATTURATO",
      "question": "Il fatturato di ogni ditta, nel loro anno migliore",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH d, doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoAnnuale\nORDER BY d.dittaId, fatturatoAnnuale DESC\nWITH d, collect({anno: anno, fatturato: fatturatoAnnuale}) AS fatturatiOrdinati\nRETURN d.dittaId AS ditta, fatturatiOrdinati[0].anno AS annoTop, fatturatiOrdinati[0].fatturato AS fatturatoMassimo",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH d, doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoAnnuale ORDER BY d.dittaId, fatturatoAnnuale DESC WITH d, collect({anno: anno, fatturato: fatturatoAnnuale}) AS fatturatiOrdinati RETURN d.dittaId AS ditta, fatturatiOrdinati[0].anno AS annoTop, fatturatiOrdinati[0].fatturato AS fatturatoMassimo",
      "time_total": 44.33712627226487,
      "time_generation": 25.377965311985463,
      "time_db": 0.6064476910978556,
      "time_synthesis": 16.87737668538466
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST_06_FAMIGLIA_PIU_ACQUISTATA",
      "question": "Qual \u00e8 la famiglia di prodotti pi\u00f9 acquistata?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(f:Famiglia)\nRETURN f.nome AS famiglia, sum(dr.quantita) AS quantitaTotale\nORDER BY quantitaTotale DESC\nLIMIT 1",
      "expected_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)-[:APPARTIENE_A]->(sf:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia) RETURN fam.nome AS famiglia, sum(dr.quantita) AS quantitaTotale ORDER BY quantitaTotale DESC LIMIT 1",
      "time_total": 30.97084027575329,
      "time_generation": 19.403986249119043,
      "time_db": 0.4006551429629326,
      "time_synthesis": 9.764286224730313
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST_07_PRODOTTO_PIU_VENDUTO",
      "question": "Qual \u00e8 il prodotto pi\u00f9 venduto in generale (per valore)?",
      "success": false,
      "error": "API error 500",
      "generated_cypher": null,
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN a.descrizione AS prodotto, sum(dr.importo) AS valoreVenduto ORDER BY valoreVenduto DESC LIMIT 1",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST_08_COSTO_ACQUISTO_PRODOTTO",
      "question": "A quanto ho acquistato il prodotto GAS FREON SOLSTICE N40 R448A?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)\nWHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a'\nRETURN sum(dr.importo) AS costoAcquisto",
      "expected_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' RETURN sum(dr.importo) AS costoTotaleAcquisto",
      "time_total": 25.654527354985476,
      "time_generation": 15.539951214101166,
      "time_db": 0.1732690269127488,
      "time_synthesis": 8.124118694104254
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST_09_PREZZO_VENDITA_PRODOTTO",
      "question": "A quanto l'ho venduto il prodotto GAS FREON SOLSTICE N40 R448A?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (a:Articolo {descrizione: 'GAS FREON SOLSTICE N40 R448A'})\nRETURN a.descrizione AS prodotto, a.placeholder AS prezzo",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN sum(dr.importo) AS totaleVenduto",
      "time_total": 20.587503098417073,
      "time_generation": 12.28435784066096,
      "time_db": 0.10082424012944102,
      "time_synthesis": 6.4055917309597135
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST_10_TREND_DITTA",
      "question": "Attualmente la ditta 2 \u00e8 in perdita o in crescita?",
      "success": false,
      "error": "API error 500",
      "generated_cypher": null,
      "expected_cypher": "MATCH (d:Ditta {dittaId: '2'})<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year IN [date().year, date().year - 1] RETURN doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoAnnuale ORDER BY anno DESC",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST_11_DITTA_PER_FAMIGLIA",
      "question": "Quali ditte vendono prodotti della famiglia 'CENTRALI FRIGO'?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (sf:Sottofamiglia {nome: 'CENTRALI FRIGO'})<-[:INCLUSA_IN]-(f:Famiglia)<-[:RAGGRUPPATO_SOTTO]-(gf:GruppoFornitore)-[:APPARTIENE_A]->(fornitore:Fornitore)\nRETURN DISTINCT fornitore.ragioneSociale AS company\nORDER BY company\nLIMIT 20",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia) WHERE toLower(trim(fam.nome)) = 'centrali frigo' RETURN DISTINCT d.dittaId AS ditta ORDER BY ditta",
      "time_total": 36.83622059924528,
      "time_generation": 26.323527362197638,
      "time_db": 0.007255186792463064,
      "time_synthesis": 8.198354206047952
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST_12_CONTEGGIO_CLIENTI_UNICI",
      "question": "Quanti clienti unici ha la ditta '1'?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(c:Cliente)\nRETURN DISTINCT c.name AS cliente\nORDER BY cliente\nLIMIT 10",
      "expected_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(c:Cliente) RETURN count(DISTINCT c) AS numeroClientiUnici",
      "time_total": 28.846493309363723,
      "time_generation": 13.241315138991922,
      "time_db": 0.018549903761595488,
      "time_synthesis": 14.319930724333972
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST_13_FORNITORE_CON_PIU_DOCUMENTI",
      "question": "Quale fornitore ci ha inviato pi\u00f9 documenti?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (f:Fornitore)-[:HA_EMESSO]->(doc:Documento)\nWITH f, COUNT(doc) AS documentoCount\nORDER BY documentoCount DESC\nRETURN f.ragioneSociale AS fornitore, documentoCount AS conteggio\nLIMIT 1",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(doc:Documento) RETURN gf.ragioneSociale AS fornitore, count(doc) AS numeroDocumenti ORDER BY numeroDocumenti DESC LIMIT 1",
      "time_total": 31.2216037241742,
      "time_generation": 23.658041382208467,
      "time_db": 0.025884245987981558,
      "time_synthesis": 5.9153884360566735
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST_14_CLIENTI_SENZA_PRODOTTO",
      "question": "Elenca 5 clienti che non hanno mai acquistato il prodotto 'GAS FREON SOLSTICE N40 R448A'",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (a:Articolo {descrizione: 'GAS FREON SOLSTICE N40 R448A'})\nWITH a\nMATCH (c:Cliente)\nWHERE NOT (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a)\nRETURN c.name AS cliente\nORDER BY cliente\nLIMIT 5",
      "expected_cypher": "MATCH (a:Articolo) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' WITH a MATCH (c:Cliente) WHERE NOT (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a) RETURN c.name AS cliente ORDER BY cliente LIMIT 5",
      "time_total": 28.478002712130547,
      "time_generation": 16.17711368575692,
      "time_db": 0.25546881183981895,
      "time_synthesis": 9.981222569011152
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST_15_LOCALITA_CON_PIU_FORNITORI",
      "question": "Qual \u00e8 la localit\u00e0 con il maggior numero di fornitori?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (f:Fornitore)-[:SI_TROVA_A]->(l:Luogo)\nWITH l, COUNT(f) AS supplier_count\nORDER BY supplier_count DESC\nLIMIT 1\nRETURN l.localita AS location, supplier_count AS num_suppliers",
      "expected_cypher": "MATCH (f:Fornitore)-[:SI_TROVA_A]->(l:Luogo) WHERE l.localita IS NOT NULL RETURN l.localita AS localita, count(DISTINCT f) AS numeroFornitori ORDER BY numeroFornitori DESC LIMIT 1",
      "time_total": 33.99037658283487,
      "time_generation": 24.137134672608227,
      "time_db": 0.12408222118392587,
      "time_synthesis": 8.210685077123344
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST_16_IMPORTO_MEDIO_RIGA",
      "question": "Qual \u00e8 l'importo medio per riga documento nelle fatture di vendita?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN avg(dr.importo) AS average_amount_per_document_line",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN avg(dr.importo) AS importoMedioRiga",
      "time_total": 30.337648821994662,
      "time_generation": 18.75850987713784,
      "time_db": 0.36501433001831174,
      "time_synthesis": 9.451713480986655
    },
    {
      "config": "specialist-llama3-coder",
      "test_id": "TEST_17_FILTRO_MULTIPLO",
      "question": "Mostrami i documenti di tipo 'FVC' emessi a Gennaio 2025 al cliente 'L'ABBONDANZA SRL'",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente {name: 'L\\'ABBONDANZA SRL'})-[:HA_RICEVUTO]->(d:Documento)\nWHERE d.tipoOriginale = 'FVC' AND d.dataEmissione >= datetime('2025-01-01') AND d.dataEmissione <= datetime('2025-01-31')\nRETURN DISTINCT d.documentoId AS documento, d.dataEmissione AS dataEmissione\nORDER BY dataEmissione\nLIMIT 20",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType) WHERE toLower(trim(c.name)) = 'l\\'abbondanza srl' AND dt.codice = 'FVC' AND doc.dataEmissione.year = 2025 AND doc.dataEmissione.month = 1 RETURN doc.documentoId AS documento",
      "time_total": 31.151588717009872,
      "time_generation": 21.118456155993044,
      "time_db": 0.18341223988682032,
      "time_synthesis": 8.165839954745024
    }
  ]
}