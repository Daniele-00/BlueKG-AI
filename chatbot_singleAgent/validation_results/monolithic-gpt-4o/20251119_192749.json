{
  "config": "monolithic-llama3",
  "approach": "monolithic",
  "config_name": "llama3",
  "timestamp": "20251119_192749",
  "examples_top_k": null,
  "summary": {
    "total": 106,
    "success_strict": 30,
    "success_similarity": 25,
    "success_jaccard": 29,
    "failures": 76,
    "accuracy": 28.30188679245283,
    "accuracy_strict": 28.30188679245283,
    "accuracy_similarity": 23.58490566037736,
    "accuracy_jaccard": 27.358490566037734,
    "min_query_similarity": 0.8,
    "min_jaccard": 0.8,
    "avg_time": 0.0,
    "avg_jaccard": 0.37429318789540483,
    "avg_query_similarity": 0.6571394857527084
  },
  "results": [
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-01-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il fatturato totale del cliente BARONE DI FERRANTE EZIO?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente {name: 'Barone di Ferrante Ezio'})-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN sum(dr.importo) AS fatturatoTotale",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE toLower(trim(c.name)) = 'barone di ferrante ezio' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN sum(dr.importo) AS fatturatoTotale",
      "time_total": null,
      "time_generation": 45.58846974698827,
      "time_db": 0.08244704999378882,
      "time_synthesis": 18.61736781799118,
      "jaccard_index": 0.0,
      "query_similarity": 0.44594594594594594,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "fatturatoTotale": 1557.38
        }
      ],
      "mismatch_extra": [
        {
          "fatturatoTotale": 0
        }
      ]
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-02-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi \u00e8 il cliente con il maggior fatturato?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale\nORDER BY fatturatoTotale DESC\nLIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC LIMIT 1",
      "time_total": null,
      "time_generation": 53.18686033398262,
      "time_db": 0.19422243698500097,
      "time_synthesis": 14.803733483015094,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": null,
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-03-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca i 5 clienti che hanno fatturato di pi\u00f9 che si trovano a Perugia",
      "success": false,
      "error": "Query mancante",
      "generated_cypher": null,
      "expected_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo) WHERE toLower(trim(l.localita)) = 'perugia' MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC LIMIT 5",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": null,
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-04-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami i 5 prodotti pi\u00f9 popolari in termini di quantit\u00e0 venduta",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nRETURN a.descrizione AS prodotto, sum(dr.quantita) AS quantitaTotale\nORDER BY quantitaTotale DESC\nLIMIT 5",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN a.descrizione AS prodotto, sum(dr.quantita) AS quantitaTotale ORDER BY quantitaTotale DESC LIMIT 5",
      "time_total": null,
      "time_generation": 44.55339787900448,
      "time_db": 0.282821517001139,
      "time_synthesis": 35.64837505100877,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": null,
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-05-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami i 5 prodotti meno popolari in termini di quantit\u00e0 venduta",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nRETURN a.descrizione AS prodotto, sum(dr.quantita) AS quantitaTotale\nORDER BY quantitaTotale ASC\nLIMIT 5",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN a.descrizione AS prodotto, sum(dr.quantita) AS quantitaTotale ORDER BY quantitaTotale ASC LIMIT 5",
      "time_total": null,
      "time_generation": 41.24814484801027,
      "time_db": 0.32182970401481725,
      "time_synthesis": 38.55281545800972,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": null,
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-06-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Dimmi il fatturato di ogni ditta.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 \nRETURN d.dittaId AS ditta, sum(dr.importo) AS fatturatoTotale\nORDER BY fatturatoTotale DESC",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN d.dittaId AS ditta, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC",
      "time_total": null,
      "time_generation": 45.85922761200345,
      "time_db": 0.3745896859909408,
      "time_synthesis": 23.20936414101743,
      "jaccard_index": 1.0,
      "query_similarity": 0.9941291585127201,
      "specialist": null,
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-07-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Il fatturato di ogni ditta, nel loro anno migliore",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH d, doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoAnnuale\nORDER BY d.dittaId, fatturatoAnnuale DESC\nWITH d, collect({anno: anno, fatturato: fatturatoAnnuale}) AS fatturatiOrdinati\nRETURN d.dittaId AS ditta, fatturatiOrdinati[0].anno AS annoTop, fatturatiOrdinati[0].fatturato AS fatturatoMassimo",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH d, doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoAnnuale ORDER BY d.dittaId, fatturatoAnnuale DESC WITH d, collect({anno: anno, fatturato: fatturatoAnnuale}) AS fatturatiOrdinati RETURN d.dittaId AS ditta, fatturatiOrdinati[0].anno AS annoTop, fatturatiOrdinati[0].fatturato AS fatturatoMassimo",
      "time_total": null,
      "time_generation": 52.56485403000261,
      "time_db": 0.30739878601161763,
      "time_synthesis": 33.186797322006896,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": null,
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-08-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Il fatturato di ogni ditta, nel loro anno peggiore",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo < 0\nWITH d, doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoAnnuale\nORDER BY d.dittaId, fatturatoAnnuale ASC\nRETURN d.dittaId AS ditta, anno AS annoPeggior, fatturatoAnnuale AS fatturatoPeggior",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH d, doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoAnnuale ORDER BY d.dittaId, fatturatoAnnuale ASC WITH d, collect({anno: anno, fatturato: fatturatoAnnuale}) AS fatturatiOrdinati RETURN d.dittaId AS ditta, fatturatiOrdinati[0].anno AS annoTop, fatturatiOrdinati[0].fatturato AS fatturatoMassimo",
      "time_total": null,
      "time_generation": 55.89024739799788,
      "time_db": 0.14871644199592993,
      "time_synthesis": 0.0,
      "jaccard_index": 0.0,
      "query_similarity": 0.7171597633136094,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "ditta": "2",
          "annoTop": 2025,
          "fatturatoMassimo": 1365461.8499999994
        },
        {
          "ditta": "3",
          "annoTop": 2025,
          "fatturatoMassimo": 60777.76
        },
        {
          "ditta": "4",
          "annoTop": 2025,
          "fatturatoMassimo": 26752.0
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-09-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 la famiglia di prodotti pi\u00f9 acquistata?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (fam:Famiglia)<-[:INCLUSA_IN]-(sfam:Sottofamiglia)<-[:APPARTIENE_A]-(:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Acquistato' AND dr.importo > 0\nRETURN fam.nome AS famiglia, sum(dr.quantita) AS quantitaTotale\nORDER BY quantitaTotale DESC\nLIMIT 1",
      "expected_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)-[:APPARTIENE_A]->(sf:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia) RETURN fam.nome AS famiglia, sum(dr.quantita) AS quantitaTotale ORDER BY quantitaTotale DESC LIMIT 1",
      "time_total": null,
      "time_generation": 46.08690379100153,
      "time_db": 0.07777007098775357,
      "time_synthesis": 0.0,
      "jaccard_index": 0.0,
      "query_similarity": 0.49911504424778763,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "famiglia": "COPERCHI NOTTE",
          "quantitaTotale": 316216.0
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-10-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 la famiglia di prodotti meno acquistata?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (fam:Famiglia)<-[:INCLUSA_IN]-(sfam:Sottofamiglia)<-[:APPARTIENE_A]-(:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Acquistato' AND dr.importo > 0\nWITH fam, sum(dr.quantita) AS quantitaTotale\nORDER BY quantitaTotale ASC\nRETURN fam.nome AS famiglia, quantitaTotale AS acquisti\nLIMIT 1;",
      "expected_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)-[:APPARTIENE_A]->(sf:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia) RETURN fam.nome AS famiglia, sum(dr.quantita) AS quantitaTotale ORDER BY quantitaTotale ASC LIMIT 1",
      "time_total": null,
      "time_generation": 48.256111900002,
      "time_db": 0.0794190259766765,
      "time_synthesis": 0.0,
      "jaccard_index": 0.0,
      "query_similarity": 0.37271214642262895,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "famiglia": "COPERCHI NOTTE",
          "quantitaTotale": 316216.0
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-11-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il prodotto pi\u00f9 venduto in generale (per valore)?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN a.descrizione AS prodotto, sum(dr.importo) AS valoreVenduto\nORDER BY valoreVenduto DESC\nLIMIT 1",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN a.descrizione AS prodotto, sum(dr.importo) AS valoreVenduto ORDER BY valoreVenduto DESC LIMIT 1",
      "time_total": null,
      "time_generation": 44.30439579999074,
      "time_db": 0.2576297420018818,
      "time_synthesis": 19.1456641650002,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": null,
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-12-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il prodotto meno venduto in generale (per valore)?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN a.descrizione AS prodotto, sum(dr.importo) AS valoreVenduto\nORDER BY valoreVenduto ASC\nLIMIT 1",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN a.descrizione AS prodotto, sum(dr.importo) AS valoreVenduto ORDER BY valoreVenduto ASC LIMIT 1",
      "time_total": null,
      "time_generation": 37.5674764260184,
      "time_db": 0.2617745570023544,
      "time_synthesis": 14.62453042002744,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": null,
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-13-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "A quanto ho acquistato il prodotto GAS FREON SOLSTICE N40 R448A?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (a:Articolo {descrizione: 'GAS FREON SOLSTICE N40 R448A'})-[:RIGUARDA_ARTICOLO]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Acquistato' AND dr.importo > 0\nRETURN sum(dr.importo) AS acquistatoTotale",
      "expected_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' RETURN sum(dr.importo) AS costoTotaleAcquisto",
      "time_total": null,
      "time_generation": 46.11540563998278,
      "time_db": 0.05512336999527179,
      "time_synthesis": 17.588876900001196,
      "jaccard_index": 0.0,
      "query_similarity": 0.3187066974595843,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "costoTotaleAcquisto": 578501.2
        }
      ],
      "mismatch_extra": [
        {
          "acquistatoTotale": 0
        }
      ]
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-14-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "A quanto l'ho venduto il prodotto GAS FREON SOLSTICE N40 R448A?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN sum(dr.importo) AS totaleVenduto",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN sum(dr.importo) AS totaleVenduto",
      "time_total": null,
      "time_generation": 45.1683088959835,
      "time_db": 0.3119302680133842,
      "time_synthesis": 20.079880270990543,
      "jaccard_index": 1.0,
      "query_similarity": 0.9981916817359855,
      "specialist": null,
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-15-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Situazione attuale della ditta '2'",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta {dittaId: '2'})<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nAND doc.dataEmissione.year IN [date().year, date().year - 1]\nRETURN doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoAnnuale\nORDER BY anno DESC",
      "expected_cypher": "MATCH (d:Ditta {dittaId: '2'})<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year IN [date().year, date().year - 1] RETURN doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoAnnuale ORDER BY anno DESC",
      "time_total": null,
      "time_generation": 69.53049233500496,
      "time_db": 0.13356900800135918,
      "time_synthesis": 12.860494452004787,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": null,
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-16-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali ditte vendono prodotti della famiglia 'CENTRALI FRIGO'?",
      "success": false,
      "error": "Query mancante",
      "generated_cypher": null,
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia) WHERE toLower(trim(fam.nome)) = 'centrali frigo' RETURN DISTINCT d.dittaId AS ditta ORDER BY ditta",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": null,
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-17-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quanti clienti unici ha la ditta '1'?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(c:Cliente)\nRETURN COUNT(DISTINCT c) AS numClienti",
      "expected_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(c:Cliente) RETURN count(DISTINCT c) AS numeroClientiUnici",
      "time_total": null,
      "time_generation": 27.639424017019337,
      "time_db": 0.04675952601246536,
      "time_synthesis": 11.830407439003466,
      "jaccard_index": 1.0,
      "query_similarity": 0.9117647058823529,
      "specialist": null,
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-18-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale fornitore ci ha inviato pi\u00f9 documenti?",
      "success": false,
      "error": "Query mancante",
      "generated_cypher": null,
      "expected_cypher": "MATCH (f:Fornitore)-[:HA_EMESSO]->(doc:Documento) RETURN f.ragioneSociale AS fornitore, count(doc) AS numeroDocumenti ORDER BY numeroDocumenti DESC LIMIT 1",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": null,
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-19-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca 5 clienti che non hanno mai acquistato il prodotto 'GAS FREON SOLSTICE N40 R448A'",
      "success": false,
      "error": "Query mancante",
      "generated_cypher": null,
      "expected_cypher": "MATCH (a:Articolo) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' WITH a MATCH (c:Cliente) WHERE NOT (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a) RETURN c.name AS cliente ORDER BY cliente LIMIT 5",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": null,
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-20-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 la localit\u00e0 con il maggior numero di fornitori?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (f:Fornitore)-[:SI_TROVA_A]->(l:Luogo)\nWITH l, count(f) AS numFornitori\nORDER BY numFornitori DESC\nRETURN l.localita AS localita, numFornitori AS numeroFornitori\nLIMIT 1",
      "expected_cypher": "MATCH (f:Fornitore)-[:SI_TROVA_A]->(l:Luogo) WHERE l.localita IS NOT NULL RETURN l.localita AS localita, count(DISTINCT f) AS numeroFornitori ORDER BY numeroFornitori DESC LIMIT 1",
      "time_total": null,
      "time_generation": 45.402051342010964,
      "time_db": 0.04544005400384776,
      "time_synthesis": 12.610058385995217,
      "jaccard_index": 0.0,
      "query_similarity": 0.6610169491525424,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "localita": "PERUGIA",
          "numeroFornitori": 835
        }
      ],
      "mismatch_extra": [
        {
          "localita": "PERUGIA",
          "numeroFornitori": 825
        }
      ]
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-21-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 l'importo medio per riga documento nelle fatture di vendita?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) \nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 \nRETURN avg(dr.importo) AS importoMedioRiga",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN avg(dr.importo) AS importoMedioRiga",
      "time_total": null,
      "time_generation": 44.279482401005225,
      "time_db": 0.17173426700173877,
      "time_synthesis": 15.19644014298683,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": null,
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-22-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami 10 documenti di tipo 'FVC' emessi a Gennaio 2025 al cliente 'L'ABBONDANZA SRL'",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente {name: 'L\\'ABbondanza SRL'})-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(:DocType {codice: 'FVC'})\nWHERE doc.dataEmissione.year = 2025 AND doc.dataEmissione.month = 1\nRETURN doc AS documento\nLIMIT 10",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType) WHERE toLower(trim(c.name)) = 'l\\'abbondanza srl' AND dt.codice = 'FVC' AND doc.dataEmissione.year = 2025 AND doc.dataEmissione.month = 1 RETURN doc.documentoId AS documento LIMIT 10",
      "time_total": null,
      "time_generation": 47.98927297099726,
      "time_db": 0.07446100999368355,
      "time_synthesis": 0.0,
      "jaccard_index": 0.0,
      "query_similarity": 0.729957805907173,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "documento": "2-202500001227"
        },
        {
          "documento": "2-202500000830"
        },
        {
          "documento": "2-202500001233"
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-23-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il margine di profitto del prodotto 'GAS FREON SOLSTICE N40 R448A'?",
      "success": false,
      "error": "Query mancante",
      "generated_cypher": null,
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr1:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' AND dr1.tipoValore = 'Fatturato' AND dr1.importo > 0 WITH a, sum(dr1.importo) AS fatturato MATCH (f:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr2:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a) WITH a, fatturato, sum(dr2.importo) AS costo RETURN a.descrizione AS prodotto, fatturato, costo, (fatturato - costo) AS margine",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": null,
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-24-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali fornitori ci forniscono prodotti venduti al cliente 'BARONE DI FERRANTE EZIO'?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente {name: 'Barone di Ferrante Ezio'})-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nMATCH (f:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocument) - [:RIGUARDA_ARTICOLO]->(a)\nWHERE c = 'Barone di Ferrante Ezio' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN DISTINCT f.ragioneSociale AS fornitore, sum(dr.importo) AS fatturatoTotale\nORDER BY fatturatoTotale DESC;",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(c.name)) = 'barone di ferrante ezio' WITH collect(DISTINCT a) AS articoliVenduti MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a) WHERE a IN articoliVenduti RETURN DISTINCT gf.ragioneSociale AS fornitore ORDER BY fornitore",
      "time_total": null,
      "time_generation": 68.41965876799077,
      "time_db": 0.2986240300233476,
      "time_synthesis": 0.0,
      "jaccard_index": 0.0,
      "query_similarity": 0.368763557483731,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "fornitore": "AMAZON EU S.A.R.L. 5"
        },
        {
          "fornitore": "SHENZHEN DEYUAN E-COMMERCE LIMITED COMPANY"
        },
        {
          "fornitore": "AMAZON EU S.A.R.L., SUCCURSALE ITALIANA"
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-25-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca 5 prodotti che abbiamo venduto ma mai acquistato",
      "success": false,
      "error": "Query mancante",
      "generated_cypher": null,
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE NOT EXISTS { MATCH (a)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) } RETURN DISTINCT a.descrizione AS prodotto ORDER BY prodotto LIMIT 5",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": null,
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-26-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca 5 prodotti che abbiamo acquistato ma mai venduto",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE dr.tipoValore = 'Acquisto' AND dr.importo > 0\nWITH a, count(*) AS acquistiTotali\nORDER BY acquistiTotali DESC\nLIMIT 5\nRETURN DISTINCT a.descrizione AS prodotto",
      "expected_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)\nWHERE NOT (a)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento {tipoValore: 'Fatturato'})\nRETURN DISTINCT a.descrizione AS prodottoMaiVenduto\nORDER BY prodottoMaiVenduto\nLIMIT 5",
      "time_total": null,
      "time_generation": 52.090350976999616,
      "time_db": 0.09059557900764048,
      "time_synthesis": 0.0,
      "jaccard_index": 0.0,
      "query_similarity": 0.17667844522968199,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "prodottoMaiVenduto": "ACCESSORIO-P5"
        },
        {
          "prodottoMaiVenduto": "ADBLUE CISTERNA DA 1000LT"
        },
        {
          "prodottoMaiVenduto": "AEROEVAPORATORE HDI 406 E 3"
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-27-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il fatturato della sottofamiglia 'COMPRESSORI SEMIERMETICI'?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (sfam:Sottofamiglia {nome: 'COMPRESSORI SEMIERMETICI'})<-[:INCLUSA_IN]-(fam:Famiglia)<-[:APPARTIENE_A]-(:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN sum(dr.importo) AS fatturatoSottofamiglia",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(:Articolo)-[:APPARTIENE_A]->(sf:Sottofamiglia) WHERE toLower(trim(sf.nome)) = 'compressori semiermetici' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN sum(dr.importo) AS fatturatoSottofamiglia",
      "time_total": null,
      "time_generation": 60.4455530050036,
      "time_db": 0.08131922900793143,
      "time_synthesis": 14.933474191988353,
      "jaccard_index": 1.0,
      "query_similarity": 0.08362369337979095,
      "specialist": null,
      "jaccard_success": true,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-28-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca le sottofamiglie della famiglia 'CENTRALI FRIGO'",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (fam:Famiglia {nome: 'CENTRALI FRIGO'})<-[:INCLUSA_IN]-(sfam:Sottofamiglia)-[:APPARTIENE_A]->(a:Articolo)\nRETURN sfam.nome AS sottofamiglia\nORDER BY sottofamiglia ASC",
      "expected_cypher": "MATCH (f:Famiglia)<-[:INCLUSA_IN]-(sf:Sottofamiglia) WHERE toLower(trim(f.nome)) = 'centrali frigo' RETURN DISTINCT sf.nome AS sottofamiglia ORDER BY sottofamiglia",
      "time_total": null,
      "time_generation": 42.61114055200596,
      "time_db": 0.05511340999510139,
      "time_synthesis": 0.0,
      "jaccard_index": 0.0,
      "query_similarity": 0.6746268656716418,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "sottofamiglia": "N/D"
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-29-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il fatturato del primo trimestre 2024?",
      "success": false,
      "error": "Query mancante",
      "generated_cypher": null,
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year = 2024 AND doc.dataEmissione.month >= 1 AND doc.dataEmissione.month <= 3 RETURN sum(dr.importo) AS fatturatoTrimestre",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": null,
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-30-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il fatturato tra Gennaio 2024 e Marzo 2024?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE doc.dataEmissione.year = 2024 AND doc.dataEmissione.month IN [1, 2, 3] AND dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN sum(dr.importo) AS fatturatoPeriodo",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione >= date('2024-01-01') AND doc.dataEmissione <= date('2024-03-31') RETURN sum(dr.importo) AS fatturatoPeriodo",
      "time_total": null,
      "time_generation": 43.89594534301432,
      "time_db": 0.13335436102352105,
      "time_synthesis": 16.851468316017417,
      "jaccard_index": 1.0,
      "query_similarity": 0.5207956600361664,
      "specialist": null,
      "jaccard_success": true,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-31-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca i clienti con fatturato superiore a 50000 euro",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 50000\nRETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale\nORDER BY fatturatoTotale DESC",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH c, sum(dr.importo) AS fatturatoTotale WHERE fatturatoTotale > 50000 RETURN c.name AS cliente, fatturatoTotale ORDER BY fatturatoTotale DESC",
      "time_total": null,
      "time_generation": 46.235413007991156,
      "time_db": 0.09774727199692279,
      "time_synthesis": 28.431162102002418,
      "jaccard_index": 0.023076923076923078,
      "query_similarity": 0.78515625,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "cliente": "GMF SRL UNIPERSONALE",
          "fatturatoTotale": 5649146.039999996
        },
        {
          "cliente": "SUPERMERCATO S.LUCIA S.R.L. UNIPERSONALE",
          "fatturatoTotale": 108851.15
        },
        {
          "cliente": "GREENCORE I.E. SRL",
          "fatturatoTotale": 52044.0
        }
      ],
      "mismatch_extra": [
        {
          "cliente": "VeO SAS di Danilo e Gianluca Ortali",
          "fatturatoTotale": 81000.0
        },
        {
          "cliente": "DISCOUNT UNO SRL",
          "fatturatoTotale": 85000.0
        },
        {
          "cliente": "UNICOMM SRL Societ\u00e0 unipersonale",
          "fatturatoTotale": 720000.0
        }
      ]
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-32-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali sono i 3 prodotti pi\u00f9 venduti al cliente 'BARONE DI FERRANTE EZIO'?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente {name: 'Barone di Ferrante Ezio'})-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN a.descrizione AS prodotto, sum(dr.quantita) AS quantitaTotale\nORDER BY quantitaTotale DESC\nLIMIT 3",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(c.name)) = 'barone di ferrante ezio' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN a.descrizione AS prodotto, sum(dr.importo) AS totaleVenduto ORDER BY totaleVenduto DESC LIMIT 3",
      "time_total": null,
      "time_generation": 56.17876557301497,
      "time_db": 0.10024050300125964,
      "time_synthesis": 0.0,
      "jaccard_index": 0.0,
      "query_similarity": 0.7543035993740219,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "prodotto": "Articolo placeholder: ID_NON_DISPONIBILE",
          "totaleVenduto": 1557.38
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-33-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali sono i 3 prodotti meno venduti al cliente 'BARONE DI FERRANTE EZIO'?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente {name: 'Barone di Ferrante Ezio'})-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH a, sum(dr.quantita) AS quantitaTotale\nORDER BY quantitaTotale ASC\nLIMIT 3\nRETURN a.descrizione AS prodotto, quantitaTotale AS quantitaVenduta",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(c.name)) = 'barone di ferrante ezio' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN a.descrizione AS prodotto, sum(dr.importo) AS totaleVenduto ORDER BY totaleVenduto ASC LIMIT 3",
      "time_total": null,
      "time_generation": 66.9976441859908,
      "time_db": 0.08649417400010861,
      "time_synthesis": 0.0,
      "jaccard_index": 0.0,
      "query_similarity": 0.5684830633284241,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "prodotto": "Articolo placeholder: ID_NON_DISPONIBILE",
          "totaleVenduto": 1557.38
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-34-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quanti fornitori appartengono a ciascun gruppo di fornitori?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (gf:GruppoFornitore)-[:RAGGRUPPATO_SOTTO]->(f:Fornitore)\nRETURN gf.ragioneSociale AS gruppo, count(f) AS numeroFornitori\nORDER BY numeroFornitori DESC",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(f:Fornitore) RETURN gf.ragioneSociale AS gruppo, count(f) AS numeroFornitori ORDER BY numeroFornitori DESC",
      "time_total": null,
      "time_generation": 42.54390212497674,
      "time_db": 0.03546809099498205,
      "time_synthesis": 0.0,
      "jaccard_index": 0.0,
      "query_similarity": 0.9935897435897436,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "gruppo": "TONITRUS GMBH",
          "numeroFornitori": 1
        },
        {
          "gruppo": "LIOLA' S.R.L.",
          "numeroFornitori": 1
        },
        {
          "gruppo": "LA CASCINA S.R.L.",
          "numeroFornitori": 1
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-35-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 l'importo minimo registrato in una singola riga di fattura di vendita?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN MIN(dr.importo) AS minimoImporto",
      "expected_cypher": "MATCH (dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN min(dr.importo) AS importoMinimo",
      "time_total": null,
      "time_generation": 47.72042861400405,
      "time_db": 0.2005230739887338,
      "time_synthesis": 26.961255744012306,
      "jaccard_index": 1.0,
      "query_similarity": 0.7372013651877133,
      "specialist": null,
      "jaccard_success": true,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-36-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 l'importo massimo registrato in una singola riga di fattura di vendita?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN MAX(dr.importo) AS importoMassimo",
      "expected_cypher": "MATCH (dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN max(dr.importo) AS importoMassimo",
      "time_total": null,
      "time_generation": 45.468194579007104,
      "time_db": 0.2153858320089057,
      "time_synthesis": 14.565839316986967,
      "jaccard_index": 1.0,
      "query_similarity": 0.7796610169491526,
      "specialist": null,
      "jaccard_success": true,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-37-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 la quantit\u00e0 media di articoli per riga nei documenti di acquisto?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (f:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Acquisto' AND dr.importo > 0\nRETURN avg(dr.quantita) AS quantitaMedia",
      "expected_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) RETURN avg(dr.quantita) AS quantitaMediaAcquisto",
      "time_total": null,
      "time_generation": 29.866261702991324,
      "time_db": 0.06106056697899476,
      "time_synthesis": 12.394689628999913,
      "jaccard_index": 0.0,
      "query_similarity": 0.8013029315960912,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "quantitaMediaAcquisto": 15.556584842962813
        }
      ],
      "mismatch_extra": [
        {
          "quantitaMedia": null
        }
      ]
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-38-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quanti articoli unici sono presenti nel catalogo?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (a:Articolo)\nRETURN COUNT(DISTINCT a.id) AS numArticles",
      "expected_cypher": "MATCH (a:Articolo) RETURN count(DISTINCT a) AS totaleArticoli",
      "time_total": null,
      "time_generation": 41.30990163999377,
      "time_db": 0.03230216298834421,
      "time_synthesis": 13.479364563012496,
      "jaccard_index": 0.0,
      "query_similarity": 0.7868852459016393,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "totaleArticoli": 18756
        }
      ],
      "mismatch_extra": [
        {
          "numArticles": 0
        }
      ]
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-39-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca i clienti dell'azienda '1' situati nella provincia di 'PG'",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(c:Cliente)-[:HAS_ADDRESS]->(l:Luogo)\nWHERE toLower(trim(l.localita)) = 'perugia'\nRETURN DISTINCT c.name AS cliente\nORDER BY cliente",
      "expected_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(c:Cliente)-[:HAS_ADDRESS]->(l:Luogo) WHERE toLower(trim(l.provincia)) = 'pg' RETURN c.name AS cliente ORDER BY cliente",
      "time_total": null,
      "time_generation": 37.113925898011075,
      "time_db": 0.10482434401637875,
      "time_synthesis": 21.63960818797932,
      "jaccard_index": 0.32786885245901637,
      "query_similarity": 0.9279538904899135,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "cliente": "BOARIA SRL"
        },
        {
          "cliente": "VOLUMNIA ORTOFRUTTA SRL"
        },
        {
          "cliente": "GRAMACCIA DINA"
        }
      ],
      "mismatch_extra": [
        {
          "cliente": "MENCONI ORNELLA"
        }
      ]
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-40-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Calcola il fatturato totale per il secondo trimestre del 2024 (aprile, maggio, giugno).",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'FVC'})\nWHERE doc.dataEmissione.year = 2024 AND doc.dataEmissione.month IN [4, 5, 6]\nRETURN sum(doc.importo) AS fatturatoSecondoTrimestre",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year = 2024 AND doc.dataEmissione.month IN [4, 5, 6] RETURN sum(dr.importo) AS fatturatoTrimestre",
      "time_total": null,
      "time_generation": 36.2126118769811,
      "time_db": 0.0782230350014288,
      "time_synthesis": 14.908290726016276,
      "jaccard_index": 0.0,
      "query_similarity": 0.7066666666666667,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "fatturatoTrimestre": 3466773.780000001
        }
      ],
      "mismatch_extra": [
        {
          "fatturatoSecondoTrimestre": 0
        }
      ]
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-41-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Trova tutti gli articoli la cui descrizione inizia con 'TUBO'",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (a:Articolo)-[:RIGUARDA_ARTICOLO]->(dr:RigaDocumento)\nWHERE toLower(trim(a.descrizione)) STARTS WITH 'tubo'\nRETURN a.descrizione AS articolo, dr.quantita AS quantita\nORDER BY articolo ASC",
      "expected_cypher": "MATCH (a:Articolo) WHERE toLower(trim(a.descrizione)) STARTS WITH 'tubo' RETURN a.descrizione AS articolo",
      "time_total": null,
      "time_generation": 39.63568525100709,
      "time_db": 0.0680993839923758,
      "time_synthesis": 0.0,
      "jaccard_index": 0.0,
      "query_similarity": 0.7046979865771812,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "articolo": "TUBO RAME RIC.D.18-20"
        },
        {
          "articolo": "TUBOLARE FERRO 80X40"
        },
        {
          "articolo": "TUBO NEON NAT.DE LUXE 36W/76"
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-42-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami i documenti di tipo 'FNA' ricevuti dal fornitore 'FORNITORE ESEMPIO SPA'",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (f:Fornitore {ragioneSociale: 'FORNITORE ESEMPIO SPA'})-[:HA_EMESSO]->(doc:Documento)-[:IS_TYPE]->(:DocType {codice: 'FNA'})\nRETURN doc AS documento",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType) WHERE toLower(trim(gf.ragioneSociale)) = 'fornitore esempio spa' AND dt.codice = 'FNA' RETURN doc.documentoId AS documento",
      "time_total": null,
      "time_generation": 35.60261242298293,
      "time_db": 0.09031217399751768,
      "time_synthesis": 0.0,
      "jaccard_index": 1.0,
      "query_similarity": 0.549618320610687,
      "specialist": null,
      "jaccard_success": true,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-43-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi sono i 3 clienti con il fatturato pi\u00f9 basso?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH c, sum(dr.importo) AS fatturatoTotale\nORDER BY fatturatoTotale ASC\nLIMIT 3\nRETURN c.name AS cliente, fatturatoTotale AS fatturato",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale ASC LIMIT 3",
      "time_total": null,
      "time_generation": 38.376444224995794,
      "time_db": 0.2265302879968658,
      "time_synthesis": 29.843110649992013,
      "jaccard_index": 0.5,
      "query_similarity": 0.8316831683168316,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "cliente": "LA DISPENSA SRL",
          "fatturatoTotale": 90.0
        }
      ],
      "mismatch_extra": [
        {
          "cliente": "MORELLI SPA",
          "fatturato": 70.0
        }
      ]
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-44-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi sono i 3 clienti con il fatturato pi\u00f9 alto?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH c, sum(dr.importo) AS fatturatoTotale\nORDER BY fatturatoTotale DESC\nLIMIT 3\nRETURN c.name AS cliente, fatturatoTotale AS fatturato",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC LIMIT 3",
      "time_total": null,
      "time_generation": 52.502101129008224,
      "time_db": 0.23564843198983,
      "time_synthesis": 23.328343750006752,
      "jaccard_index": 0.2,
      "query_similarity": 0.8323471400394478,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "cliente": "L'ABBONDANZA SRL",
          "fatturatoTotale": 6077563.659999978
        },
        {
          "cliente": "GMF SRL UNIPERSONALE",
          "fatturatoTotale": 5827112.03999998
        }
      ],
      "mismatch_extra": [
        {
          "cliente": "GMF SRL UNIPERSONALE",
          "fatturato": 5649146.039999996
        },
        {
          "cliente": "L'ABBONDANZA SRL",
          "fatturato": 5785617.85999999
        }
      ]
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-45-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali sono i 5 articoli con il costo totale di acquisto pi\u00f9 alto?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (a:Articolo)-[:RIGUARDA_ARTICOLO]->(:Sottofamiglia)<-[:INCLUSA_IN]-(fam:Famiglia)\nWHERE fam.nome = 'Elettrodomestici'\nWITH a, sum(a.prezzoAcquisto * a.quantita) AS costoTotale\nORDER BY costoTotale DESC\nLIMIT 5\nRETURN a.descrizione AS articolo, costoTotale AS costoTotale",
      "expected_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) RETURN a.descrizione AS articolo, sum(dr.importo) AS costoTotale ORDER BY costoTotale DESC LIMIT 5",
      "time_total": null,
      "time_generation": 49.22525531300926,
      "time_db": 0.06765137700131163,
      "time_synthesis": 0.0,
      "jaccard_index": 0.0,
      "query_similarity": 0.3861788617886179,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "articolo": "GAS FREON SOLSTICE N40 R448A",
          "costoTotale": 578501.2
        },
        {
          "articolo": "CENTRALINA MCX08M2 DANFOSS",
          "costoTotale": 37814.88
        },
        {
          "articolo": "INVERTER",
          "costoTotale": 62394.390000000014
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-46-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali sono i 5 articoli con il costo totale di acquisto pi\u00f9 basso?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (a:Articolo)-[:RIGUARDA_ARTICOLO]->(:Sottofamiglia)<-[:INCLUSA_IN]-(fam:Famiglia)\nWHERE fam.nome = 'Elettrodomestici'\nWITH a, sum(a.prezzoAcquisto) AS costoTotale\nORDER BY costoTotale ASC\nLIMIT 5\nRETURN a.descrizione AS articolo, costoTotale AS costoAcquisto",
      "expected_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) RETURN a.descrizione AS articolo, sum(dr.importo) AS costoTotale ORDER BY costoTotale ASC LIMIT 5",
      "time_total": null,
      "time_generation": 49.02245114301331,
      "time_db": 0.0674652729940135,
      "time_synthesis": 0.0,
      "jaccard_index": 0.0,
      "query_similarity": 0.3298538622129436,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "articolo": "SERB.ACC A/REFR.LT1000",
          "costoTotale": 0.0
        },
        {
          "articolo": "cap de cddc",
          "costoTotale": 0.0
        },
        {
          "articolo": "COMPR.COPELAND ZF13K4E",
          "costoTotale": 0.0
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-47-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale fornitore ci vende la gamma pi\u00f9 ampia di articoli unici?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (f:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE a.isUnico = true\nWITH f, collect(a) AS articoliUnici\nORDER BY size(articoliUnici) DESC\nRETURN f.ragioneSociale AS fornitore, size(articoliUnici) AS numeroArticoliUnici\nLIMIT 1",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS varietaProdotti ORDER BY varietaProdotti DESC LIMIT 1",
      "time_total": null,
      "time_generation": 55.50210048802546,
      "time_db": 0.08260861100279726,
      "time_synthesis": 0.0,
      "jaccard_index": 0.0,
      "query_similarity": 0.5734265734265734,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "fornitore": "MORELLI SPA",
          "varietaProdotti": 383
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-48-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale fornitore ci vende la gamma meno ampia di articoli unici?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (f:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE a.quantita = 1 AND dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH f, collect(DISTINCT a) AS articoliUnici\nORDER BY size(articoliUnici) ASC\nRETURN f.ragioneSociale AS fornitore, size(articoliUnici) AS gammaArticoli\nLIMIT 1",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS varietaProdotti ORDER BY varietaProdotti ASC LIMIT 1",
      "time_total": null,
      "time_generation": 60.064556017983705,
      "time_db": 0.10569546700571664,
      "time_synthesis": 0.0,
      "jaccard_index": 0.0,
      "query_similarity": 0.15434083601286175,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "fornitore": "10GTEK TRANSCEIVERS CO.LIMITED",
          "varietaProdotti": 1
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-49-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Ordina le aziende in base al numero totale di documenti di vendita emessi.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)\nRETURN d.dittaId AS ditta, count(doc) AS numeroDocumenti\nORDER BY numeroDocumenti DESC",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento) RETURN d.dittaId AS ditta, count(doc) AS numeroDocumenti ORDER BY numeroDocumenti DESC",
      "time_total": null,
      "time_generation": 38.476668174000224,
      "time_db": 0.04375499801244587,
      "time_synthesis": 27.27924340000027,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": null,
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-50-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il fornitore con il maggior numero di articoli forniti?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (f:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH f, count(a) AS articoliForniti\nORDER BY articoliForniti DESC\nLIMIT 1\nRETURN f.ragioneSociale AS fornitoreTop, articoliForniti AS numeroArticoli",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS numeroArticoli ORDER BY numeroArticoli DESC LIMIT 1",
      "time_total": null,
      "time_generation": 76.88916843399056,
      "time_db": 0.22436414202093147,
      "time_synthesis": 0.0,
      "jaccard_index": 0.0,
      "query_similarity": 0.4101694915254237,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "fornitore": "MORELLI SPA",
          "numeroArticoli": 383
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-51-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi sono i principali fornitori degli articoli venduti al nostro miglior cliente?",
      "success": false,
      "error": "Query mancante",
      "generated_cypher": null,
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH c, sum(dr.importo) AS fatturatoCliente ORDER BY fatturatoCliente DESC LIMIT 1 WITH c AS topCliente MATCH (topCliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WITH topCliente, collect(DISTINCT a) AS articoliDelTopCliente MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE a IN articoliDelTopCliente RETURN gf.ragioneSociale AS fornitore, count(DISTINCT a) AS numeroArticoliDiversiForniti ORDER BY numeroArticoliDiversiForniti DESC",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": null,
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-52-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali sono le famiglie di prodotti vendute sia dalla ditta '1' che dalla ditta '2'?",
      "success": false,
      "error": "Query mancante",
      "generated_cypher": null,
      "expected_cypher": "MATCH (fam1:Famiglia)<-[:INCLUSA_IN*0..]-(:Sottofamiglia)<-[:APPARTIENE_A]-(:Articolo)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(:Cliente)-[:APPARTIENE_A]->(:Ditta {dittaId: '1'}) WITH collect(DISTINCT fam1) AS famiglieDitta1 MATCH (fam2:Famiglia)<-[:INCLUSA_IN*0..]-(:Sottofamiglia)<-[:APPARTIENE_A]-(:Articolo)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(:Cliente)-[:APPARTIENE_A]->(:Ditta {dittaId: '2'}) WHERE fam2 IN famiglieDitta1 RETURN DISTINCT fam2.nome AS famigliaComune ORDER BY famigliaComune",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": null,
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-53-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami 5 prodotti che abbiamo acquistato ma mai venduto.",
      "success": false,
      "error": "Query mancante",
      "generated_cypher": null,
      "expected_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) WITH DISTINCT a WHERE NOT (a)<-[:RIGUARDA_ARTICOLO]-(:RigaDocumento {tipoValore: 'Fatturato'}) RETURN a.descrizione AS prodottoMaiVenduto LIMIT 5",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": null,
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-54-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami il fatturato totale per ogni mese dell'anno corrente della ditta '1'.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE doc.dataEmissione.year = date().year AND dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN doc.dataEmissione.month AS mese, sum(dr.importo) AS fatturatoMensile\nORDER BY mese ASC",
      "expected_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE date(doc.dataEmissione).year = date().year AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN date(doc.dataEmissione).month AS mese, sum(dr.importo) AS fatturatoMensile ORDER BY mese ASC",
      "time_total": null,
      "time_generation": 48.220569802011596,
      "time_db": 0.13268231297843158,
      "time_synthesis": 21.23549046300468,
      "jaccard_index": 1.0,
      "query_similarity": 0.881619937694704,
      "specialist": null,
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-55-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Confronta il fatturato totale del 2024 con quello del 2023.",
      "success": false,
      "error": "Query mancante",
      "generated_cypher": null,
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year IN [2023, 2024] RETURN doc.dataEmissione.year AS anno, sum(dr.importo) AS fatturatoTotale ORDER BY anno",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": null,
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-56-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale fornitore \u00e8 stato il pi\u00f9 attivo (per valore di acquisto) nell'ultimo trimestre?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (f:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.dataEmissione.year = date().year AND dr.dataEmissione.month >= 7 AND dr.dataEmissione.month <= 12\nWITH f, sum(dr.importo) AS importoTotale\nORDER BY importoTotale DESC\nRETURN f.ragioneSociale AS fornitore, importoTotale AS valoreAcquistato\nLIMIT 1",
      "expected_cypher": "WITH date() - duration({months: 3}) AS dataInizioTrimestre MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE doc.dataEmissione >= dataInizioTrimestre RETURN gf.ragioneSociale AS fornitore, sum(dr.importo) AS totaleAcquistato ORDER BY totaleAcquistato DESC LIMIT 1",
      "time_total": null,
      "time_generation": 65.25653803700698,
      "time_db": 0.15482771798269823,
      "time_synthesis": 0.0,
      "jaccard_index": 1.0,
      "query_similarity": 0.4104803493449782,
      "specialist": null,
      "jaccard_success": true,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-57-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami i clienti il cui primo documento di vendita \u00e8 stato emesso negli ultimi 6 mesi.",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)\nWHERE doc.dataEmissione.year = date().year AND doc.dataEmissione.month <= date().month - 6\nRETURN c.name AS cliente\nORDER BY cliente",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento) WITH c, min(doc.dataEmissione) AS primoAcquisto WHERE primoAcquisto >= date() - duration({months: 6}) RETURN c.name AS clienteRecente, primoAcquisto ORDER BY primoAcquisto DESC",
      "time_total": null,
      "time_generation": 38.80786209600046,
      "time_db": 0.19408667998504825,
      "time_synthesis": 21.661619057005737,
      "jaccard_index": 0.0,
      "query_similarity": 0.6421568627450981,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [],
      "mismatch_extra": [
        {
          "cliente": "TARPANELLI SRL"
        },
        {
          "cliente": "SUPERMERCATO S.LUCIA S.R.L. UNIPERSONALE"
        },
        {
          "cliente": "NEW BO.PAR.SRL"
        }
      ]
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-58-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Ci sono aziende che non hanno registrato alcun fatturato?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo = 0\nRETURN d.dittaId AS ditta, count(*) AS numeroFattureVuote\nORDER BY numeroFattureVuote DESC",
      "expected_cypher": "MATCH (d:Ditta) WHERE NOT (d)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento {tipoValore: 'Fatturato'}) RETURN d.dittaId AS dittaSenzaFatturato",
      "time_total": null,
      "time_generation": 44.75575338501949,
      "time_db": 0.1003757749858778,
      "time_synthesis": 0.0,
      "jaccard_index": 1.0,
      "query_similarity": 0.30699774266365687,
      "specialist": null,
      "jaccard_success": true,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-59-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Ultimo documento emesso nel 2024",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'FVC'})\nWHERE doc.dataEmissione.year = 2024 AND doc.dataEmissione IS NOT NULL\nRETURN doc.dataEmissione AS dataUltimoDocumento",
      "expected_cypher": "MATCH (doc:Documento) WHERE doc.dataEmissione.year = 2024 WITH doc ORDER BY doc.dataEmissione DESC LIMIT 1 OPTIONAL MATCH (doc)<-[:HA_RICEVUTO]-(c:Cliente) OPTIONAL MATCH (doc)<-[:HA_EMESSO]-(f:Fornitore)-[:RAGGRUPPATO_SOTTO]->(gf:GruppoFornitore) RETURN doc.documentoId AS UltimodocumentoId,  doc.dataEmissione AS DataEmissione, CASE WHEN gf IS NOT NULL THEN gf.ragioneSociale ELSE 'Nostra Azienda (Vendita)' END AS EmessoDa, CASE WHEN c IS NOT NULL THEN c.name ELSE 'Nostra Azienda (Acquisto)' END AS EmessoA",
      "time_total": null,
      "time_generation": 35.30274897199706,
      "time_db": 0.9696942809969187,
      "time_synthesis": 31.43455851500039,
      "jaccard_index": 0.0,
      "query_similarity": 0.36284470246734396,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "UltimodocumentoId": "2-202400020704",
          "DataEmissione": "2024-12-31",
          "EmessoDa": "Nostra Azienda (Vendita)",
          "EmessoA": "ROMI S.R.L."
        }
      ],
      "mismatch_extra": [
        {
          "dataUltimoDocumento": "2024-02-22"
        },
        {
          "dataUltimoDocumento": "2024-03-11"
        },
        {
          "dataUltimoDocumento": "2024-07-08"
        }
      ]
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-60-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Trova i fornitori che non ci hanno mai venduto prodotti della famiglia 'CENTRALI FRIGO'",
      "success": false,
      "error": "Query mancante",
      "generated_cypher": null,
      "expected_cypher": "MATCH (fam:Famiglia) WHERE toLower(trim(fam.nome)) = 'centrali frigo' WITH fam MATCH (gf:GruppoFornitore) WHERE NOT (gf)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(fam) RETURN gf.ragioneSociale AS fornitore",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": null,
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-61-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali clienti appartengono esclusivamente all'azienda '1' e non ad altre?",
      "success": false,
      "error": "Query mancante",
      "generated_cypher": null,
      "expected_cypher": "MATCH (c:Cliente)-[:APPARTIENE_A]->(d:Ditta) WITH c, collect(d.dittaId) AS ditte WHERE size(ditte) = 1 AND ditte[0] = '1' RETURN c.name AS clienteEsclusivo",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": null,
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-62-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Per ogni famiglia di prodotto, chi \u00e8 il cliente che ha generato il fatturato maggiore?",
      "success": false,
      "error": "Query mancante",
      "generated_cypher": null,
      "expected_cypher": "MATCH (fam:Famiglia)<-[:INCLUSA_IN]-(:Sottofamiglia)<-[:APPARTIENE_A]-(:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(c:Cliente) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH fam, c, sum(dr.importo) AS fatturato ORDER BY fam.nome, fatturato DESC WITH fam, collect({cliente: c.name, fatturato: fatturato}) AS clientiOrdinati RETURN fam.nome AS famiglia, clientiOrdinati[0].cliente AS topCliente, clientiOrdinati[0].fatturato AS fatturatoMassimo",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": null,
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-63-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Calcola il rapporto tra costo totale e fatturato totale per il prodotto 'GAS FREON SOLSTICE N40 R448A'",
      "success": false,
      "error": "Query mancante",
      "generated_cypher": null,
      "expected_cypher": "MATCH (a:Articolo) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' OPTIONAL MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_acq:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) WITH a, sum(dr_acq.importo) AS costoTotale OPTIONAL MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_ven:RigaDocumento {tipoValore: 'Fatturato'})<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(:Cliente) WHERE dr_ven.importo > 0 WITH costoTotale, sum(dr_ven.importo) AS fatturatoTotale RETURN  costoTotale, fatturatoTotale, CASE WHEN costoTotale <> 0 THEN fatturatoTotale / costoTotale ELSE null END AS rapporto",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": null,
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-64-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale provincia ha generato il volume di fatturato pi\u00f9 alto?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (l:Luogo)<-[:HAS_ADDRESS]-(c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH l, sum(dr.importo) AS fatturatoProvincia\nORDER BY fatturatoProvincia DESC\nRETURN l.localita AS provincia, fatturatoProvincia AS volumeFatturato\nLIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo) MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN l.provincia AS provincia, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC LIMIT 1",
      "time_total": null,
      "time_generation": 65.1071360539936,
      "time_db": 0.3637674329802394,
      "time_synthesis": 15.584743486018851,
      "jaccard_index": 0.0,
      "query_similarity": 0.6366666666666667,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "provincia": "PG",
          "fatturatoTotale": 25544465.930000313
        }
      ],
      "mismatch_extra": [
        {
          "provincia": "PERUGIA",
          "volumeFatturato": 10266900.859999988
        }
      ]
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-65-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale provincia ha generato il volume di fatturato pi\u00f9 basso?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (l:Luogo)<-[:HAS_ADDRESS]-(c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH l, sum(dr.importo) AS fatturatoProvincia\nORDER BY fatturatoProvincia ASC\nRETURN DISTINCT l.localita AS provincia, fatturatoProvincia AS volumeFatturato\nLIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo) MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN l.provincia AS provincia, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale ASC LIMIT 1",
      "time_total": null,
      "time_generation": 67.48665064599481,
      "time_db": 0.3224335619888734,
      "time_synthesis": 14.453127259010216,
      "jaccard_index": 0.0,
      "query_similarity": 0.6293245469522241,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "provincia": "GR",
          "fatturatoTotale": 772.0
        }
      ],
      "mismatch_extra": [
        {
          "provincia": "SESTO SAN GIOVANNI",
          "volumeFatturato": 1.0
        }
      ]
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-66-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Lista dei clienti il cui fatturato totale \u00e8 superiore al fatturato medio di tutti i clienti.",
      "success": false,
      "error": "Query mancante",
      "generated_cypher": null,
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH count(DISTINCT c) AS totalCustomers, sum(dr.importo) AS totalRevenue WITH CASE WHEN totalCustomers = 0 THEN null ELSE totalRevenue / totalCustomers END AS avgRevenue WHERE avgRevenue IS NOT NULL MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH c, sum(dr.importo) AS customerRevenue, avgRevenue WHERE customerRevenue > avgRevenue RETURN c.name AS cliente, customerRevenue ORDER BY customerRevenue DESC",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": null,
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-67-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami il numero di documenti per ciascun tipo (codice).",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType)\nRETURN dt.codice AS codice, count(doc) AS numeroDocumenti\nORDER BY numeroDocumenti DESC;",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType) RETURN dt.codice AS tipoDocumento, count(doc) AS numeroDocumenti ORDER BY numeroDocumenti DESC",
      "time_total": null,
      "time_generation": 36.40969857599703,
      "time_db": 0.06150828002137132,
      "time_synthesis": 29.76349183000275,
      "jaccard_index": 0.0,
      "query_similarity": 0.9492753623188406,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-68-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il fatturato totale associato ai documenti di tipo 'FVC'?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'FVC'})\nWHERE doc.dataEmissione.year = date().year\nRETURN sum(doc.importo) AS fatturatoTotale",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'FVC'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN sum(dr.importo) AS fatturatoFVC",
      "time_total": null,
      "time_generation": 28.821232460002648,
      "time_db": 0.09072606201516464,
      "time_synthesis": 15.311031202989398,
      "jaccard_index": 0.0,
      "query_similarity": 0.6381766381766382,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "fatturatoFVC": 43854717.48000137
        }
      ],
      "mismatch_extra": [
        {
          "fatturatoTotale": 0
        }
      ]
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-69-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale cliente ha ricevuto il maggior numero di note di credito (codice 'NCC')?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'NCC' AND dr.importo > 0\nRETURN c.name AS cliente, count(dr) AS numeroNcc\nORDER BY numeroNcc DESC\nLIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'NCC'}) RETURN c.name AS cliente, count(doc) AS numeroNoteCredito ORDER BY numeroNoteCredito DESC LIMIT 1",
      "time_total": null,
      "time_generation": 43.748358158016345,
      "time_db": 0.06789695200859569,
      "time_synthesis": 0.0,
      "jaccard_index": 0.0,
      "query_similarity": 0.42105263157894735,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "cliente": "I.G.E.S. S.R.L.",
          "numeroNoteCredito": 49
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-70-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Calcola il valore medio di un documento per ciascun tipo (considerando solo il fatturato).",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType)\nWHERE dt.codice IN ['FVC', 'FVG'] // adjust this to include only the desired types\nWITH doc, dt, sum(doc.importo) AS totale\nRETURN dt.nome AS tipo, avg(totale) AS valoreMedio\nORDER BY valoreMedio DESC;",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH dt, doc, sum(dr.importo) AS valoreDocumento RETURN dt.codice AS tipoDocumento, avg(valoreDocumento) AS valoreMedio ORDER BY valoreMedio DESC",
      "time_total": null,
      "time_generation": 46.642269723000936,
      "time_db": 0.11747466700035147,
      "time_synthesis": 22.381496920017526,
      "jaccard_index": 0.0,
      "query_similarity": 0.5129151291512916,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "tipoDocumento": "NCC",
          "valoreMedio": 2662.121951219513
        },
        {
          "tipoDocumento": "FVC",
          "valoreMedio": 2511.5810938663294
        },
        {
          "tipoDocumento": "NDC",
          "valoreMedio": 6835.246666666666
        }
      ],
      "mismatch_extra": [
        {
          "tipo": "Fattura Cliente",
          "valoreMedio": 0.0
        }
      ]
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-71-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi \u00e8 il cliente con il fatturato pi\u00f9 alto?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale\nORDER BY fatturatoTotale DESC\nLIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC LIMIT 1",
      "time_total": null,
      "time_generation": 52.027454674011096,
      "time_db": 0.22503922201576643,
      "time_synthesis": 14.231732994987397,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": null,
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-72-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca 5 clienti situati a Perugia",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo)\nWHERE l.localita = 'Perugia'\nRETURN c.name AS cliente, l.localita AS localita\nORDER BY c.name ASC\nLIMIT 5",
      "expected_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo) WHERE toLower(trim(l.localita)) = 'perugia' RETURN DISTINCT c.name AS cliente ORDER BY cliente LIMIT 5",
      "time_total": null,
      "time_generation": 39.325167795002926,
      "time_db": 0.04616826999699697,
      "time_synthesis": 16.77131985599408,
      "jaccard_index": 0.0,
      "query_similarity": 0.7864406779661017,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "cliente": "A.M. SRL"
        },
        {
          "cliente": "3F TECNOSYSTEM SRL"
        },
        {
          "cliente": "4 B SRL"
        }
      ],
      "mismatch_extra": [
        {
          "cliente": "CHIUCHINI GIANNI",
          "localita": "Perugia"
        }
      ]
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-73-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami i 5 prodotti pi\u00f9 popolari in termini di quantit\u00e0 venduta",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nRETURN a.descrizione AS prodotto, sum(dr.quantita) AS quantitaTotale\nORDER BY quantitaTotale DESC\nLIMIT 5",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) RETURN a.descrizione AS prodotto, sum(dr.quantita) AS quantitaTotale ORDER BY quantitaTotale DESC LIMIT 5",
      "time_total": null,
      "time_generation": 43.382919488009065,
      "time_db": 0.2916386919969227,
      "time_synthesis": 35.366639993997524,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": null,
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-74-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Dimmi il fatturato di ciascuna azienda.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN d.dittaId AS ditta, sum(dr.importo) AS fatturatoTotale\nORDER BY fatturatoTotale DESC",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN d.dittaId AS ditta, sum(dr.importo) AS fatturatoTotale ORDER BY fatturatoTotale DESC",
      "time_total": null,
      "time_generation": 49.54699890498887,
      "time_db": 0.289842383004725,
      "time_synthesis": 23.579811067000264,
      "jaccard_index": 1.0,
      "query_similarity": 0.9941291585127201,
      "specialist": null,
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-75-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quanto ho speso per acquistare il prodotto GAS FREON SOLSTICE N40 R448A?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (a:Articolo {descrizione: 'GAS FREON SOLSTICE N40 R448A'})-[:RIGUARDA_ARTICOLO]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Acquistato' AND dr.importo > 0\nRETURN sum(dr.importo) AS spesaTotale",
      "expected_cypher": "MATCH (a:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' RETURN sum(dr.importo) AS costoTotaleAcquisto",
      "time_total": null,
      "time_generation": 41.869099909003126,
      "time_db": 0.05807373402058147,
      "time_synthesis": 23.38391877998947,
      "jaccard_index": 0.0,
      "query_similarity": 0.5233644859813084,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "costoTotaleAcquisto": 578501.2
        }
      ],
      "mismatch_extra": [
        {
          "spesaTotale": 0
        }
      ]
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-76-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quanto ho guadagnato vendendo il prodotto GAS FREON SOLSTICE N40 R448A?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN sum(dr.importo) AS totaleVenduto",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE toLower(trim(a.descrizione)) = 'gas freon solstice n40 r448a' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN sum(dr.importo) AS totaleVenduto",
      "time_total": null,
      "time_generation": 44.844031585002085,
      "time_db": 0.28543612200883217,
      "time_synthesis": 13.634315976989456,
      "jaccard_index": 1.0,
      "query_similarity": 0.9981916817359855,
      "specialist": null,
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-77-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali aziende vendono prodotti della famiglia 'CENTRALI FRIGO'?",
      "success": false,
      "error": "Query mancante",
      "generated_cypher": null,
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia) WHERE toLower(trim(fam.nome)) = 'centrali frigo' RETURN DISTINCT d.dittaId AS ditta ORDER BY ditta",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": null,
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-78-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 l'importo medio per riga documento nelle fatture di vendita?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) \nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 \nRETURN avg(dr.importo) AS importoMedioRiga",
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN avg(dr.importo) AS importoMedioRiga",
      "time_total": null,
      "time_generation": 42.90729108999949,
      "time_db": 0.17085532698547468,
      "time_synthesis": 15.628710613003932,
      "jaccard_index": 1.0,
      "query_similarity": 1.0,
      "specialist": null,
      "jaccard_success": true,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-79-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Per ogni azienda, classifica il suo fatturato totale come 'Alto' se supera i 10 milioni, 'Medio' se \u00e8 tra 1 e 10 milioni, e 'Basso' altrimenti.",
      "success": false,
      "error": "Query mancante",
      "generated_cypher": null,
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH d, sum(dr.importo) AS fatturatoTotale RETURN d.dittaId AS ditta, fatturatoTotale, CASE WHEN fatturatoTotale > 10000000 THEN 'Alto' WHEN fatturatoTotale > 1000000 THEN 'Medio' ELSE 'Basso' END AS categoriaFatturato",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": null,
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-80-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il primo e l'ultimo documento di vendita mai registrato per il cliente 'ACME SRL'?",
      "success": false,
      "error": "Query mancante",
      "generated_cypher": null,
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento) WHERE toLower(trim(c.name)) = 'acme srl' RETURN min(doc.dataEmissione) AS primoDocumento, max(doc.dataEmissione) AS ultimoDocumento",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": null,
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-81-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 la media del fatturato mensile per il cliente 'ACME SRL' nel 2024?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente {name: 'ACME SRL'})<-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE doc.dataEmissione.year = 2024 AND dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN avg(dr.importo) AS mediaFatturatoMensile",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE toLower(trim(c.name)) = 'l\\'abbondanza srl' AND dr.tipoValore = 'Fatturato' AND dr.importo > 0 AND doc.dataEmissione.year = 2024 WITH date(doc.dataEmissione).month AS mese, sum(dr.importo) AS fatturatoMensile RETURN avg(fatturatoMensile) AS mediaFatturatoMensile",
      "time_total": null,
      "time_generation": 52.11170945799677,
      "time_db": 0.11765179599751718,
      "time_synthesis": 19.20554045800236,
      "jaccard_index": 0.0,
      "query_similarity": 0.5100671140939598,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "mediaFatturatoMensile": 170779.8825
        }
      ],
      "mismatch_extra": [
        {
          "mediaFatturatoMensile": null
        }
      ]
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-82-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Per i primi 3 clienti per fatturato, mostra il loro prodotto pi\u00f9 acquistato per valore.",
      "success": false,
      "error": "Query mancante",
      "generated_cypher": null,
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH c, sum(dr.importo) AS fatturatoCliente ORDER BY fatturatoCliente DESC LIMIT 3 MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr2:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WHERE dr2.tipoValore = 'Fatturato' AND dr2.importo > 0 WITH c, a, sum(dr2.importo) AS valoreProdotto ORDER BY c.name, valoreProdotto DESC WITH c, head(collect({prodotto: a.descrizione, valore: valoreProdotto})) AS topProdotto RETURN c.name AS cliente, topProdotto.prodotto AS prodottoTop, topProdotto.valore AS valoreTop ORDER BY c.name",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": null,
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-83-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quali clienti hanno effettuato ordini ma non hanno ancora ricevuto una fattura?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)<-[:CONTIENE_RIGA]-(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo IS NULL\nRETURN c.name AS cliente, count(dr) AS numeroOrdiniSenzaFattura\nORDER BY numeroOrdiniSenzaFattura DESC",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento {tipoValore: 'Ordinato'}) WITH DISTINCT c MATCH (c) WHERE NOT (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento {tipoValore: 'Fatturato'}) RETURN c.name AS clienteSenzaFattura",
      "time_total": null,
      "time_generation": 48.49511770601384,
      "time_db": 0.10174438200192526,
      "time_synthesis": 0.0,
      "jaccard_index": 0.0,
      "query_similarity": 0.5310077519379846,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "clienteSenzaFattura": "MACELLERIA SAN SECONDO"
        },
        {
          "clienteSenzaFattura": "HONG KONG UGREEN LIMITED"
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-84-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi \u00e8 il fornitore principale per ogni famiglia di prodotto, in base al valore acquistato?",
      "success": false,
      "error": "Query mancante",
      "generated_cypher": null,
      "expected_cypher": "MATCH (fam:Famiglia)<-[:INCLUSA_IN]-(:Sottofamiglia)<-[:APPARTIENE_A]-(:Articolo)<-[:RIGUARDA_ARTICOLO]-(dr:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore)-[:RAGGRUPPATO_SOTTO]->(gf:GruppoFornitore) WITH fam, gf, sum(dr.importo) AS valoreAcquistato ORDER BY fam.nome, valoreAcquistato DESC WITH fam, collect({fornitore: gf.ragioneSociale, valore: valoreAcquistato})[0] AS fornitoreTop RETURN fam.nome AS famiglia, fornitoreTop.fornitore AS fornitorePrincipale",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": null,
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-85-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il valore totale degli ordini in sospeso (ordinati ma non fatturati)?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (o:Ordine {stato: 'IN SOSPESO'})-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'ORDINE' AND dr.importo > 0\nRETURN sum(dr.importo) AS valoreTotale",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Ordinato' WITH c, doc, sum(dr.importo) AS valoreOrdinato WHERE NOT (doc)<-[:CONTIENE_RIGA]-(:RigaDocumento {tipoValore:'Fatturato'}) RETURN sum(valoreOrdinato) AS totaleOrdiniSospesi",
      "time_total": null,
      "time_generation": 39.302359487017384,
      "time_db": 0.060179826017702,
      "time_synthesis": 23.204571934009437,
      "jaccard_index": 0.0,
      "query_similarity": 0.5,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "totaleOrdiniSospesi": 2376823.710000001
        }
      ],
      "mismatch_extra": [
        {
          "valoreTotale": 0
        }
      ]
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-86-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami i clienti che acquistano pi\u00f9 di 10 articoli unici diversi.",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo)\nWHERE dr.quantita > 0 AND a.descrizione IS NOT NULL\nWITH c, collect(DISTINCT a) AS articoliUnici\nWHERE size(articoliUnici) > 10\nRETURN c.name AS cliente, size(articoliUnici) AS numeroArticoliUnici\nORDER BY numeroArticoliUnici DESC",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WITH c, count(DISTINCT a) AS numeroArticoliUnici WHERE numeroArticoliUnici > 10 RETURN c.name AS cliente, numeroArticoliUnici ORDER BY numeroArticoliUnici DESC",
      "time_total": null,
      "time_generation": 58.554704912996385,
      "time_db": 0.41077306799707003,
      "time_synthesis": 24.307112729991786,
      "jaccard_index": 0.2668024439918534,
      "query_similarity": 0.7392,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "cliente": "COMMERCIALE TADINA SRL",
          "numeroArticoliUnici": 47
        },
        {
          "cliente": "RIER SRL",
          "numeroArticoliUnici": 33
        },
        {
          "cliente": "I.G.E.S. S.R.L.",
          "numeroArticoliUnici": 615
        }
      ],
      "mismatch_extra": [
        {
          "cliente": "F B SRL",
          "numeroArticoliUnici": 45
        },
        {
          "cliente": "NUOVA C.R.SUPERMERCATI SRL",
          "numeroArticoliUnici": 214
        },
        {
          "cliente": "SIMAN SRL",
          "numeroArticoliUnici": 23
        }
      ]
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-87-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Per il prodotto pi\u00f9 venduto per quantit\u00e0, qual \u00e8 il suo costo medio di acquisto?",
      "success": false,
      "error": "Query mancante",
      "generated_cypher": null,
      "expected_cypher": "MATCH (:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a:Articolo) WITH a, sum(dr.quantita) AS quantitaTotale ORDER BY quantitaTotale DESC LIMIT 1 MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_acq:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) RETURN a.descrizione AS prodotto, avg(CASE WHEN dr_acq.quantita = 0 OR dr_acq.quantita IS NULL THEN null ELSE dr_acq.importo / dr_acq.quantita END) AS costoMedioUnitario",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": null,
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-88-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca i fornitori che trattano solo prodotti di una singola famiglia.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (f:Famiglia)-[:INCLUSA_IN]->(sf:Sottofamiglia)<-[:APPARTIENE_A]-(a:Articolo)\nWITH sf, collect({articolo: a}) AS articoli\nMATCH (fornitore:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(a)\nWHERE a IN articoli AND dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN DISTINCT fornitore.ragioneSociale AS fornitore, count(*) AS numArticoli\nORDER BY numArticoli DESC;",
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(:RigaDocumento)-[:RIGUARDA_ARTICOLO]->(:Articolo)-[:APPARTIENE_A]->(:Sottofamiglia)-[:INCLUSA_IN]->(fam:Famiglia) WITH gf, count(DISTINCT fam) AS numeroFamiglie WHERE numeroFamiglie = 1 RETURN gf.ragioneSociale AS fornitoreMonoFamiglia",
      "time_total": null,
      "time_generation": 82.26590612600558,
      "time_db": 0.1093184270139318,
      "time_synthesis": 0.0,
      "jaccard_index": 1.0,
      "query_similarity": 0.20418848167539266,
      "specialist": null,
      "jaccard_success": true,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-89-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 la percentuale di fatturato generata dai clienti nella regione 'Umbria' sul totale?",
      "success": false,
      "error": "Query mancante",
      "generated_cypher": null,
      "expected_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo),(c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH sum(dr.importo) AS totaleFatturato,  sum(CASE WHEN toLower(trim(l.regione)) = 'umbria' THEN dr.importo ELSE 0 END) AS fatturatoUmbria RETURN CASE WHEN totaleFatturato = 0 THEN 0.0 ELSE (fatturatoUmbria * 100.0 / totaleFatturato) END AS percentualeUmbria",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": null,
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-90-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Trova il cliente con il valore medio degli ordini pi\u00f9 alto.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH c, avg(dr.importo) AS mediaOrdine\nORDER BY mediaOrdine DESC\nRETURN c.name AS cliente, mediaOrdine AS valoreMedio\nLIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 WITH c, doc, sum(dr.importo) AS valoreOrdine RETURN c.name AS cliente, avg(valoreOrdine) AS valoreMedioOrdine ORDER BY valoreMedioOrdine DESC LIMIT 1",
      "time_total": null,
      "time_generation": 36.9880953989923,
      "time_db": 0.24544160600635223,
      "time_synthesis": 13.878883605997544,
      "jaccard_index": 1.0,
      "query_similarity": 0.6678765880217786,
      "specialist": null,
      "jaccard_success": true,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-91-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami i 3 mesi con il maggior numero di documenti di acquisto registrati.",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'FVC'})\nWHERE dt.dataEmissione.month IN [1, 2, 3]\nRETURN dt.dataEmissione.month AS mese, count(doc) AS numeroDocumenti\nORDER BY numeroDocumenti DESC\nLIMIT 3",
      "expected_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(doc:Documento) RETURN doc.dataEmissione.year AS anno, doc.dataEmissione.month AS mese, count(doc) AS numeroDocumenti ORDER BY numeroDocumenti DESC LIMIT 3",
      "time_total": null,
      "time_generation": 55.75847734999843,
      "time_db": 0.06082560098730028,
      "time_synthesis": 0.0,
      "jaccard_index": 0.0,
      "query_similarity": 0.6215538847117794,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "anno": 2024,
          "mese": 2,
          "numeroDocumenti": 266
        },
        {
          "anno": 2024,
          "mese": 9,
          "numeroDocumenti": 269
        },
        {
          "anno": 2021,
          "mese": 3,
          "numeroDocumenti": 270
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-92-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Ci sono prodotti venduti a un prezzo inferiore al loro costo medio di acquisto?",
      "success": false,
      "error": "Query mancante",
      "generated_cypher": null,
      "expected_cypher": "MATCH (a:Articolo) OPTIONAL MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_acq:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_EMESSO]-(:Fornitore) WITH a, avg(CASE WHEN dr_acq.quantita = 0 OR dr_acq.quantita IS NULL THEN null ELSE dr_acq.importo / dr_acq.quantita END) AS costoMedio OPTIONAL MATCH (a)<-[:RIGUARDA_ARTICOLO]-(dr_ven:RigaDocumento)<-[:CONTIENE_RIGA]-(:Documento)<-[:HA_RICEVUTO]-(:Cliente) WHERE dr_ven.tipoValore = 'Fatturato' AND dr_ven.importo > 0 WITH a, costoMedio, avg(CASE WHEN dr_ven.quantita = 0 OR dr_ven.quantita IS NULL THEN null ELSE dr_ven.importo / dr_ven.quantita END) AS prezzoMedioVendita WHERE prezzoMedioVendita < costoMedio RETURN a.descrizione AS prodottoInPerdita",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": null,
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-93-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale tipo di documento (codice) \u00e8 pi\u00f9 frequentemente associato al ciclo di acquisto?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType)\nWHERE dt.codice IS NOT NULL\nRETURN dt.codice AS tipoDocumento, count(doc) AS conteggio\nORDER BY conteggio DESC\nLIMIT 1;",
      "expected_cypher": "MATCH (:Fornitore)-[:HA_EMESSO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType) RETURN dt.codice AS tipoDocumento, count(doc) AS frequenza ORDER BY frequenza DESC LIMIT 1",
      "time_total": null,
      "time_generation": 34.90693243502756,
      "time_db": 0.06389596499502659,
      "time_synthesis": 23.65933011000743,
      "jaccard_index": 0.0,
      "query_similarity": 0.7333333333333333,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "tipoDocumento": "OF",
          "frequenza": 6571
        }
      ],
      "mismatch_extra": [
        {
          "tipoDocumento": "FVC",
          "conteggio": 20614
        }
      ]
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-94-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca i fornitori situati in un luogo dove non abbiamo clienti.",
      "success": false,
      "error": "Query mancante",
      "generated_cypher": null,
      "expected_cypher": "MATCH (gf:GruppoFornitore)<-[:RAGGRUPPATO_SOTTO]-(f:Fornitore)-[:SI_TROVA_A]->(lf:Luogo) WHERE NOT EXISTS { MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo {localita: lf.localita}) } RETURN DISTINCT gf.ragioneSociale AS fornitore ORDER BY fornitore",
      "time_total": null,
      "time_generation": null,
      "time_db": null,
      "time_synthesis": null,
      "jaccard_index": null,
      "query_similarity": null,
      "specialist": null,
      "jaccard_success": null,
      "similarity_success": null,
      "examples_top_k": null,
      "success_reason": null
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-95-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quante note di credito clienti (NCC) abbiamo emesso in totale?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (ncc:NoleCreditoCliente)\nRETURN count(ncc) AS nccTotale",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'NCC'}) RETURN count(doc) AS numeroNoteCredito",
      "time_total": null,
      "time_generation": 26.362771273008548,
      "time_db": 0.043246672983514145,
      "time_synthesis": 19.83005155000137,
      "jaccard_index": 0.0,
      "query_similarity": 0.48148148148148145,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "numeroNoteCredito": 639
        }
      ],
      "mismatch_extra": [
        {
          "nccTotale": 0
        }
      ]
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-96-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami tutti gli ordini fornitori (OF) per maggio 2024.",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (f:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.dataEmissione.month = 5 AND dr.dataEmissione.year = 2024 AND dr.tipoValore = 'Ordine Fornitore'\nRETURN f.ragioneSociale AS fornitore, count(dr) AS numeroOrdini\nORDER BY numeroOrdini DESC;",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'OF'}) WHERE doc.dataEmissione.year = 2024 AND doc.dataEmissione.month = 5 RETURN doc.documentoId AS ordine",
      "time_total": null,
      "time_generation": 49.82144982900354,
      "time_db": 0.08592771700932644,
      "time_synthesis": 0.0,
      "jaccard_index": 0.0,
      "query_similarity": 0.3167420814479638,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "ordine": "2-202400006916"
        },
        {
          "ordine": "2-202400007330"
        },
        {
          "ordine": "2-202400006741"
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-97-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il valore totale delle fatture fornitori (FFA) ricevute?",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (f:Fornitore)-[:HA_EMESSO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'FFA' AND dr.importo > 0\nRETURN sum(dr.importo) AS valoreTotale",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'FFA'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) RETURN sum(dr.importo) AS totaleFattureFornitore",
      "time_total": null,
      "time_generation": 40.5193022939784,
      "time_db": 0.056591681990539655,
      "time_synthesis": 7.373015569988638,
      "jaccard_index": 1.0,
      "query_similarity": 0.5349544072948328,
      "specialist": null,
      "jaccard_success": true,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-98-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca i clienti a cui abbiamo inviato una nota di consegna clienti (DDTV) a Roma.",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HAS_ADDRESS]->(l:Luogo)\nWHERE l.localita = 'ROMA'\nAND EXISTS ((c)-[:HA_RICEVUTO]->(:Documento {tipoOriginale: 'DDTV'}))\nRETURN c.name AS cliente\nORDER BY cliente",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'DDTV'}) WHERE toLower(trim(doc.tipoOriginale)) CONTAINS 'roma' RETURN DISTINCT c.name AS cliente",
      "time_total": null,
      "time_generation": 45.48105013099848,
      "time_db": 0.11365339302574284,
      "time_synthesis": 0.0,
      "jaccard_index": 0.0,
      "query_similarity": 0.481994459833795,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "cliente": "EVOLUZIONE SPESA SRL"
        },
        {
          "cliente": "ALICAM S.R.L."
        },
        {
          "cliente": "MAVE.DIS SRLS"
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-99-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il valore fatturato presente solo nelle fatture clienti (FVC)?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento {codice: 'FVC'})-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN sum(dr.importo) AS fatturatoFVC",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'FVC'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' RETURN sum(dr.importo) AS totaleFatturatoInFVC",
      "time_total": null,
      "time_generation": 37.96600415499415,
      "time_db": 0.09497934501268901,
      "time_synthesis": 18.964114347007126,
      "jaccard_index": 0.0,
      "query_similarity": 0.7519582245430809,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "totaleFatturatoInFVC": 43854717.48000137
        }
      ],
      "mismatch_extra": [
        {
          "fatturatoFVC": 0
        }
      ]
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-100-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami il totale ordinato attraverso gli ordini clienti (OC) per la ditta '1'.",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN c.name AS cliente, sum(dr.importo) AS totaleOrdine\nORDER BY totaleOrdine DESC",
      "expected_cypher": "MATCH (d:Ditta {dittaId: '1'})<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'OC'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Ordinato' RETURN sum(dr.importo) AS totaleOrdinatoDitta1",
      "time_total": null,
      "time_generation": 48.14222396002151,
      "time_db": 0.11811510799452662,
      "time_synthesis": 19.29600192399812,
      "jaccard_index": 0.0,
      "query_similarity": 0.72,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "totaleOrdinatoDitta1": 0
        }
      ],
      "mismatch_extra": [
        {
          "cliente": "JACS SRL",
          "totaleOrdine": 2400.0
        },
        {
          "cliente": "PIC SRLS",
          "totaleOrdine": 1066.0
        },
        {
          "cliente": "PAGEST S.R.L.",
          "totaleOrdine": 8750.0
        }
      ]
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-101-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Qual \u00e8 il valore medio delle righe fatturate nelle note di consegna clienti (DDTV)?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH c, avg(dr.importo) AS valoreMedio\nRETURN valoreMedio AS valoreMedioNole",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'DDTV'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Bollato' RETURN avg(dr.importo) AS valoreMedioBollato",
      "time_total": null,
      "time_generation": 39.69448747302522,
      "time_db": 0.29454109899234027,
      "time_synthesis": 31.663949009001954,
      "jaccard_index": 0.0,
      "query_similarity": 0.22388059701492538,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "valoreMedioBollato": 287.930263878516
        }
      ],
      "mismatch_extra": [
        {
          "valoreMedioNole": 588.4363636363636
        },
        {
          "valoreMedioNole": 69.70599999999999
        },
        {
          "valoreMedioNole": 1833.3333333333333
        }
      ]
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-102-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Chi \u00e8 il cliente con il valore fatturato pi\u00f9 alto considerando solo le fatture immediate (FVC)?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(:Documento {codice: 'FVC'})-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nRETURN c.name AS cliente, sum(dr.importo) AS fatturatoTotale\nORDER BY fatturatoTotale DESC\nLIMIT 1",
      "expected_cypher": "MATCH (c:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'FVC'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN c.name AS cliente, sum(dr.importo) AS totale ORDER BY totale DESC LIMIT 1",
      "time_total": null,
      "time_generation": 50.6404785499908,
      "time_db": 0.10885846999008209,
      "time_synthesis": 0.0,
      "jaccard_index": 0.0,
      "query_similarity": 0.8435114503816794,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": true,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "cliente": "L'ABBONDANZA SRL",
          "totale": 6071834.069999974
        }
      ],
      "mismatch_extra": []
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-103-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Per il cliente 'ACME SRL', confronta il totale ordinato e il totale fatturato.",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (c:Cliente {name: 'ACME SRL'})-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Ordinato' OR dr.tipoValore = 'Fatturato'\nRETURN sum(CASE WHEN dr.tipoValore = 'Ordinato' THEN -1 * dr.importo ELSE dr.importo END) AS totale",
      "expected_cypher": "MATCH (c:Cliente) WHERE toLower(trim(c.name)) = 'acme srl' OPTIONAL MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr_ord:RigaDocumento {tipoValore: 'Ordinato'}) WITH c, sum(dr_ord.importo) AS totaleOrdinato OPTIONAL MATCH (c)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr_fat:RigaDocumento {tipoValore: 'Fatturato'}) WHERE dr_fat.importo > 0 RETURN totaleOrdinato, sum(dr_fat.importo) AS totaleFatturato",
      "time_total": null,
      "time_generation": 44.11625620000996,
      "time_db": 0.07859349402133375,
      "time_synthesis": 27.02948003698839,
      "jaccard_index": 0.0,
      "query_similarity": 0.27113702623906705,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [],
      "mismatch_extra": [
        {
          "totale": 0
        }
      ]
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-104-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Elenca i documenti d'ordine clienti (OC) che non sono ancora stati completamente fatturati.",
      "success": true,
      "error": null,
      "generated_cypher": "MATCH (doc:Documento {tipoOriginale: 'OC'})-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo < 0\nRETURN doc.numero AS documento, sum(dr.importo) AS importoManca\nORDER BY importoManca DESC",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType {codice: 'OC'}) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento {tipoValore: 'Ordinato'}) WITH doc, sum(dr.importo) AS valoreOrdinato MATCH (doc)-[:CONTIENE_RIGA]->(dr_fat:RigaDocumento {tipoValore: 'Fatturato'}) WITH doc, valoreOrdinato, sum(dr_fat.importo) AS valoreFatturato WHERE valoreOrdinato > valoreFatturato RETURN doc.documentoId AS ordineNonSaldato",
      "time_total": null,
      "time_generation": 43.71106808001059,
      "time_db": 0.10830315601197071,
      "time_synthesis": 0.0,
      "jaccard_index": 1.0,
      "query_similarity": 0.22257551669316375,
      "specialist": null,
      "jaccard_success": true,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": "strict",
      "strict_success": true
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-105-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Quale tipo di documento (nome) ha il valore medio pi\u00f9 alto per riga (considerando solo i valori fatturati)?",
      "success": false,
      "error": "Results mismatch",
      "generated_cypher": "MATCH (doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH doc, avg(dr.importo) AS valoreMedio\nORDER BY valoreMedio DESC\nRETURN DISTINCT doc.nome AS documento, valoreMedio AS valoreMedio\nLIMIT 1",
      "expected_cypher": "MATCH (doc:Documento)-[:IS_TYPE]->(dt:DocType) MATCH (doc)-[:CONTIENE_RIGA]->(dr:RigaDocumento) WHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0 RETURN dt.nome AS nomeTipoDocumento, avg(dr.importo) AS valoreMedioRiga ORDER BY valoreMedioRiga DESC LIMIT 1",
      "time_total": null,
      "time_generation": 41.93707288699807,
      "time_db": 0.16549300798214972,
      "time_synthesis": 20.567583141004434,
      "jaccard_index": 0.0,
      "query_similarity": 0.6313725490196078,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null,
      "strict_success": false,
      "mismatch_missing": [
        {
          "nomeTipoDocumento": "Nota Debito Cliente",
          "valoreMedioRiga": 6835.246666666666
        }
      ],
      "mismatch_extra": [
        {
          "documento": null,
          "valoreMedio": 565000.0
        }
      ]
    },
    {
      "config": "monolithic-llama3",
      "test_id": "TEST-106-Genera la query Cypher per rispondere a questo input in italiano",
      "question": "Mostrami il totale fatturato e il totale ordinato per ciascuna ditta.",
      "success": false,
      "error": "unhashable type: 'list'",
      "generated_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(doc:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento)\nWHERE dr.tipoValore = 'Fatturato' AND dr.importo > 0\nWITH d, sum(dr.importo) AS fatturatoTotale, collect({nome: doc.nome, dataEmissione: doc.dataEmissione}) AS documenti\nRETURN d.dittaId AS ditta, fatturatoTotale AS totaleFatturato, documenti AS documenti\nORDER BY ditta, totaleFatturato DESC",
      "expected_cypher": "MATCH (d:Ditta)<-[:APPARTIENE_A]-(:Cliente)-[:HA_RICEVUTO]->(:Documento)-[:CONTIENE_RIGA]->(dr:RigaDocumento) RETURN d.dittaId AS ditta, sum(CASE dr.tipoValore WHEN 'Fatturato' THEN dr.importo ELSE 0 END) AS totaleFatturato, sum(CASE dr.tipoValore WHEN 'Ordinato' THEN dr.importo ELSE 0 END) AS totaleOrdinato ORDER BY ditta ASC",
      "time_total": null,
      "time_generation": 55.2528077760071,
      "time_db": 2.7066556999925524,
      "time_synthesis": 84.59745258899056,
      "jaccard_index": 0.0,
      "query_similarity": 0.461118690313779,
      "specialist": null,
      "jaccard_success": false,
      "similarity_success": false,
      "examples_top_k": null,
      "success_reason": null
    }
  ]
}