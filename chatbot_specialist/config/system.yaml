# System configuration for Chatbot Specialist application

# Cache settings to optimize performance
cache:
  enabled: true
  max_cache_size: 100
  query_ttl_seconds: 600

# Logging configuration for diagnostics and monitoring
logging:
  diagnostics_dir: diagnostics
  level: INFO
  save_diagnostics: true
# File paths for various resources
paths:
  config_dir: config
  prompts_dir: prompts
  test_results: test_results.json
  validation_set: validation_set.json
# Query limits and timeouts for external providers  
query_limits:
  max_results_display: 50
  max_results_for_synthesizer: 10
  provider_overrides:
    synthesizer:
      ollama: 8
      openai: 10
  query_timeout_seconds: 30
# Retry mechanism configuration for error handling  
retry:
  enabled: true
  hints_files:
  - chatbot_specialist/diagnostics/repair_hints.md
  max_attempts: 3
  max_recent_repairs: 8
  repairable_error_patterns:
  - SyntaxError
  - Variable .* not defined
  - Invalid input
  - Type mismatch
  retry_on_syntax_error: true
  retry_on_zero_results: false
  semantic_expansion:
    enabled: true
    max_attempts: 1
    prompt: query_expansion_prompt.yaml
    top_k_examples: 0
# Example retrieval settings
examples:
  min_similarity: 0.45
# Session management settings  
sessions:
  cleanup_interval_seconds: 300
  enable_memory: true
  max_messages_per_session: 15
  timeout_minutes: 30
  memory:
    scope_reset_keywords:
      - "in generale"
      - "nel complesso"
      - "complessivamente"
      - "overall"
      - "in general"
      - "globalmente"
      - "su tutti"
      - "per tutti"
      - "considerando tutti"
      - "senza filtri"
      - "tutti i clienti"
      - "tutte le ditte"
      - "tutti i fornitori"
    explicit_reset_keywords:
      - "nuova domanda"
      - "nuovo argomento"
      - "ricomincia"
      - "ricomincia da capo"
      - "partiamo da capo"
      - "resetta"
      - "reset conversazione"
      - "cambia argomento"
      - "ignora la conversazione precedente"
    
    DOMINIO_KEYWORDS : 
      - "fatturato"
      - "cliente"
      - "clienti"
      - "ditta"
      - "ditte"
      - "fornitore"
      - "fornitori"
      - "articolo"
      - "articoli"
      - "documento"
      - "documenti"
      - "famiglia"
      - "famiglie"

    INTERROGATIVE_START :
      - "qual"
      - "quale"
      - "quali"
      - "chi"
      - "mostrami"
      - "dimmi"
      - "elenca"
      - "elencami"
      - "trova"
      - "che"
      - "cos'Ã¨"
      - "cosa"

    recency_minutes: 10
    embedding_similarity:
      enabled: true
      reuse_example_retriever: true
      model_name: "all-MiniLM-L6-v2"
      history_size: 10
      threshold: 0.75
small_talk:
  keywords:
    - "ciao"
    - "ciaoo"
    - "salve"
    - "buongiorno"
    - "buonasera"
    - "hey"
    - "ehi"
    - "perfetto"
    - "come stai"
    - "come te la passi"
    - "come ti va"
    - "tutto bene?"
    - "grazie mille"
    - "grazie tante"
    - "molte grazie"
    - "ti ringrazio"
    - "per favore"
    - "aiuto"
    - "assistimi"
    - "supportami"
    - "sei disponibile?"
    - "come va"
    - "chi sei"
    - "cosa puoi fare"
    - "di cosa ti occupi"
    - "aiutami"
    - "puoi aiutarmi"
    - "grazie"
    - "help"
    - "sei li"
dangerous_operations:
  keywords:
    - "delete"
    - "drop"
    - "truncate"
    - "update"
    - "insert"
    - "merge"
    - "create record"
    - "remove"
    - "destroy"
    - "wipe"
    - "elimina"
    - "eliminare"
    - "cancella"
    - "cancellare"
    - "cancellami"
    - "modifica"
    - "modificare"
    - "aggiorna"
    - "aggiungi"
    - "inserisci"
    - "inserire"
    - "crea"
cypher_write_blocklist:
  - "delete"
  - "detach"
  - "remove"
  - "set"
  - "create"
  - "merge"
  - "drop"
  - "truncate"
  - "load csv"
  - "call dbms"
  - "call apoc.write"
query_safety:
  risky_timeout_seconds: 12
  critical_timeout_seconds: 8
  safe_rewrite_limit: 200
  slow_query_log: diagnostics/slow_queries.log
feedback:
  enabled: true
  storage_path: diagnostics/user_feedback.jsonl
  categories:
    - corretta
    - incompleta
    - fuori_fuoco
    - troppo_formale
    - troppo_lunga

social_router:
  enabled: true
  confidence_threshold: 0.7
